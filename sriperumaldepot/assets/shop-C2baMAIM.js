import{r as p,b as pe,T as fe,c as ue,g as ge,j as e,d as J,e as be,f as O,a as re,I as Q,B as o,R as Y,A as ye,h as m,C as oe,i as se,k as je,l as ne}from"./index-Dg6OSMVy.js";import{A as ie,T as ae,a as ve,M as Ce}from"./ArrowBackIosNew-CcCuYhtd.js";import{C as Se}from"./CheckCircle-DtFTexqj.js";import{S as we}from"./Straighten-CmMBZ71w.js";import{L as ke}from"./LocalShipping-CNA8Gj03.js";import{u as H}from"./productStore-BiZ8ho-Z.js";import{u as _}from"./cartStore-DqoWjS20.js";import{u as le}from"./pricingStore-CyexPtkc.js";import{Q as Ie,p as ze}from"./profile-Dcm13qfA.js";import{A as Te}from"./Add-Dg4vFytR.js";import{S as Re}from"./Search-BmSkvHpI.js";import{S as ce}from"./ShoppingCart-BCjAUzy0.js";import{F as We}from"./FitnessCenter-B9QiSSxk.js";import{B as Ee,E as Fe}from"./EnergySavingsLeaf-CsmmpXgw.js";import{F as Ae}from"./FlashOn-CLm_KX7p.js";import{D as de}from"./Dialog-BcOc2AJl.js";import{A as ee}from"./Alert-DqzrpwJn.js";import{B as U}from"./Button-DK2hI-ka.js";import{d as Pe,o as xe,I as G,F as Le,S as Me}from"./TextField-BKzV6U3I.js";import{Q as Ve}from"./QuantitySelector-BVPCD0qX.js";import{H as Be}from"./Header-CvAsREaK.js";import{P as De}from"./Page-Bty_NVZI.js";import{C as Oe}from"./Chip-B3gwcAKH.js";import{G as N}from"./Grid-Bo2RbQY_.js";import{D as q}from"./Divider-CdYamF3_.js";import{C as Ne}from"./CardContent-foe8WI7a.js";import"./dividerClasses-Ct_9BTYH.js";import"./isMuiElement-DXVAVI3f.js";function He(s,x,t){const n=x.getBoundingClientRect(),l=t&&t.getBoundingClientRect(),y=xe(x);let v;if(x.fakeTransform)v=x.fakeTransform;else{const g=y.getComputedStyle(x);v=g.getPropertyValue("-webkit-transform")||g.getPropertyValue("transform")}let I=0,C=0;if(v&&v!=="none"&&typeof v=="string"){const g=v.split("(")[1].split(")")[0].split(",");I=parseInt(g[4],10),C=parseInt(g[5],10)}return s==="left"?l?`translateX(${l.right+I-n.left}px)`:`translateX(${y.innerWidth+I-n.left}px)`:s==="right"?l?`translateX(-${n.right-l.left-I}px)`:`translateX(-${n.left+n.width-I}px)`:s==="up"?l?`translateY(${l.bottom+C-n.top}px)`:`translateY(${y.innerHeight+C-n.top}px)`:l?`translateY(-${n.top-l.top+n.height-C}px)`:`translateY(-${n.top+n.height-C}px)`}function Ue(s){return typeof s=="function"?s():s}function X(s,x,t){const n=Ue(t),l=He(s,x,n);l&&(x.style.webkitTransform=l,x.style.transform=l)}const he=p.forwardRef(function(x,t){const n=pe(),l={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},y={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:v,appear:I=!0,children:C,container:g,direction:W="down",easing:z=l,in:T,onEnter:D,onEntered:S,onEntering:w,onExit:V,onExited:b,onExiting:L,style:R,timeout:E=y,TransitionComponent:F=fe,...i}=x,u=p.useRef(null),r=ue(ge(C),u,t),j=d=>P=>{d&&(P===void 0?d(u.current):d(u.current,P))},a=j((d,P)=>{X(W,d,g),be(d),D&&D(d,P)}),c=j((d,P)=>{const $=J({timeout:E,style:R,easing:z},{mode:"enter"});d.style.webkitTransition=n.transitions.create("-webkit-transform",{...$}),d.style.transition=n.transitions.create("transform",{...$}),d.style.webkitTransform="none",d.style.transform="none",w&&w(d,P)}),h=j(S),k=j(L),f=j(d=>{const P=J({timeout:E,style:R,easing:z},{mode:"exit"});d.style.webkitTransition=n.transitions.create("-webkit-transform",P),d.style.transition=n.transitions.create("transform",P),X(W,d,g),V&&V(d)}),M=j(d=>{d.style.webkitTransition="",d.style.transition="",b&&b(d)}),A=d=>{v&&v(u.current,d)},B=p.useCallback(()=>{u.current&&X(W,u.current,g)},[W,g]);return p.useEffect(()=>{if(T||W==="down"||W==="right")return;const d=Pe(()=>{u.current&&X(W,u.current,g)}),P=xe(u.current);return P.addEventListener("resize",d),()=>{d.clear(),P.removeEventListener("resize",d)}},[W,T,g]),p.useEffect(()=>{T||B()},[T,B]),e.jsx(F,{nodeRef:u,onEnter:a,onEntered:h,onEntering:c,onExit:f,onExited:M,onExiting:k,addEndListener:A,appear:I,in:T,timeout:E,...i,children:(d,{ownerState:P,...$})=>p.cloneElement(C,{ref:r,style:{visibility:d==="exited"&&!T?"hidden":void 0,...R,...C.props.style},...$})})}),Qe=O(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),Ye=O(e.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8M6 18l6-4.5 6 4.5z"})),_e=O(e.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"})),$e=O(e.jsx("path",{d:"M3.27 3 2 4.27l5 5V13h3v9l3.58-6.14L17.73 20 19 18.73zM17 10h-4l4-8H7v2.18l8.46 8.46z"})),Xe=O(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),Ge=O(e.jsx("path",{d:"M3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1m17-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 9h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1m-4 4h-4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1m4-8h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1"})),Ze=O(e.jsx("path",{d:"m3 2 2.01 18.23C5.13 21.23 5.97 22 7 22h10c1.03 0 1.87-.77 1.99-1.77L21 2zm9 17c-1.66 0-3-1.34-3-3 0-2 3-5.4 3-5.4s3 3.4 3 5.4c0 1.66-1.34 3-3 3m6.33-11H5.67l-.44-4h13.53z"})),qe=O(e.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),Ke=O(e.jsx("path",{d:"M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8M7.83 14c.37 0 .67.26.74.62.41 2.22 2.28 2.98 3.64 2.87.43-.02.79.32.79.75 0 .4-.32.73-.72.75-2.13.13-4.62-1.09-5.19-4.12-.08-.45.28-.87.74-.87"})),me=()=>{const x=_(n=>n.items).length,t=re();return e.jsxs(Q,{sx:{bgcolor:"action.hover"},onClick:()=>t({to:"/checkout"}),children:[e.jsx(ce,{}),x>0&&e.jsx(o,{sx:{position:"absolute",top:0,right:0,width:16,height:16,bgcolor:"red",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",color:"white",fontWeight:"bold",border:"2px solid",borderColor:"background.paper"},children:x})]})},Je=Y.forwardRef(function(x,t){return e.jsx(he,{direction:"up",ref:t,...x})}),et=({open:s,onClose:x,onScanSuccess:t})=>{const n=p.useRef(null),[l,y]=p.useState(null),[v,I]=p.useState(!0),[C,g]=p.useState(!1),[W,z]=p.useState(!0),[T,D]=p.useState(!1),[S,w]=p.useState(null),[V,b]=p.useState(1),[L,R]=p.useState(1),[E,F]=p.useState(!1),i=p.useCallback(()=>{D(!1),S&&S.stop(),n.current&&n.current.srcObject&&(n.current.srcObject.getTracks().forEach(c=>c.stop()),n.current.srcObject=null)},[S]),u=p.useCallback(async()=>{if(z(!0),y(null),!("BarcodeDetector"in window)){I(!1),z(!1);return}try{const a=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{min:1280,ideal:3840,max:4096},height:{min:720,ideal:2160,max:2160},frameRate:{ideal:30,max:60}}});if(n.current){n.current.srcObject=a;const c=a.getVideoTracks()[0];w(c),await n.current.play();try{const h=c.getCapabilities(),k={advanced:[]};h.zoom&&(F(!0),R(h.zoom.max),b(h.zoom.min||1)),h.focusMode?.includes("continuous")&&k.advanced.push({focusMode:"continuous"}),h.whiteBalanceMode?.includes("continuous")&&k.advanced.push({whiteBalanceMode:"continuous"}),h.exposureMode?.includes("continuous")&&k.advanced.push({exposureMode:"continuous"}),k.advanced.length>0&&await c.applyConstraints(k)}catch(h){console.warn("Advanced constraints not supported:",h)}z(!1),D(!0)}}catch(a){console.error("Error accessing camera:",a),y(a.name==="NotAllowedError"?"Camera permission denied":"Could not access camera"),z(!1)}},[]);p.useEffect(()=>{s?u():i()},[s,u,i]),p.useEffect(()=>{let a,c=0;const h=300,k="BarcodeDetector"in window?new window.BarcodeDetector({formats:["qr_code","ean_13","ean_8","code_128","code_39","upc_a","upc_e"]}):null,f=async M=>{if(!(!T||!n.current||!k)){if(M-c>h){c=M;try{if(n.current.readyState===n.current.HAVE_ENOUGH_DATA){const A=await k.detect(n.current);if(A.length>0){const B=A[0].rawValue;t(B),i();return}}}catch(A){console.error("Detection error:",A)}}a=requestAnimationFrame(f)}};return T&&(a=requestAnimationFrame(f)),()=>{a&&cancelAnimationFrame(a)}},[T,t,i]);const r=async()=>{if(S&&"applyConstraints"in S)try{await S.applyConstraints({advanced:[{torch:!C}]}),g(!C)}catch(a){console.error("Error toggling torch:",a)}},j=async a=>{if(S&&"applyConstraints"in S)try{await S.applyConstraints({advanced:[{zoom:a}]}),b(a)}catch(c){console.error("Error adjusting zoom:",c)}};return e.jsxs(de,{fullScreen:!0,open:s,onClose:x,TransitionComponent:Je,PaperProps:{sx:{bgcolor:"#000",color:"white",overflow:"hidden"}},children:[e.jsx(ie,{sx:{position:"relative",bgcolor:"transparent",boxShadow:"none"},children:e.jsxs(ae,{children:[e.jsx(Q,{edge:"start",color:"inherit",onClick:x,"aria-label":"close",children:e.jsx(ye,{})}),e.jsx(m,{sx:{ml:2,flex:1,fontWeight:700},variant:"h6",children:"Scan Barcode"}),S&&e.jsx(Q,{color:"inherit",onClick:r,children:C?e.jsx(Ae,{sx:{color:"primary.main"}}):e.jsx($e,{})})]})}),e.jsxs(o,{sx:{flex:1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#000"},children:[W&&e.jsx(o,{sx:{position:"absolute",zIndex:2,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(oe,{color:"primary"})}),l&&e.jsxs(o,{sx:{p:4,textAlign:"center",zIndex:2},children:[e.jsx(ee,{severity:"error",sx:{mb:2},children:l}),e.jsx(U,{variant:"contained",onClick:u,children:"Retry"})]}),!v&&e.jsxs(o,{sx:{p:4,textAlign:"center",zIndex:2},children:[e.jsx(ee,{severity:"warning",sx:{mb:2},children:"Native barcode scanning is not supported in this browser. Please use Chrome or Edge."}),e.jsx(U,{variant:"outlined",color:"inherit",onClick:x,children:"Close"})]}),e.jsxs(o,{sx:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("video",{ref:n,style:{width:"100%",height:"100%",objectFit:"cover"},playsInline:!0,muted:!0}),e.jsx(o,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:e.jsx(o,{sx:{width:"280px",height:"280px",border:"2px solid rgba(255, 255, 255, 0.5)",borderRadius:"24px",position:"relative","&::before, &::after":{content:'""',position:"absolute",width:"40px",height:"40px",borderColor:"primary.main",borderStyle:"solid"},"&::before":{top:-2,left:-2,borderTopWidth:4,borderLeftWidth:4,borderBottomWidth:0,borderRightWidth:0,borderTopLeftRadius:"24px"},"&::after":{bottom:-2,right:-2,borderBottomWidth:4,borderRightWidth:4,borderTopWidth:0,borderLeftWidth:0,borderBottomRightRadius:"24px"}},children:e.jsx(o,{sx:{position:"absolute",top:0,left:"10%",width:"80%",height:"2px",bgcolor:"primary.main",boxShadow:"0 0 15px #2196f3",willChange:"transform",animation:"scan 2.5s ease-in-out infinite","@keyframes scan":{"0%":{transform:"translateY(28px)",opacity:0},"50%":{transform:"translateY(140px)",opacity:1},"100%":{transform:"translateY(252px)",opacity:0}}}})})}),e.jsxs(o,{sx:{position:"absolute",bottom:40,display:"flex",gap:2,zIndex:3},children:[E&&e.jsx(U,{variant:"contained",sx:{borderRadius:"20px",bgcolor:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:()=>j(V===1?Math.min(2,L):1),children:V===1?"2x Zoom":"1x Zoom"}),e.jsx(U,{variant:"contained",sx:{borderRadius:"20px",bgcolor:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:r,children:C?"Flash Off":"Flash On"})]})]})]})]})},tt={shopping_cart:e.jsx(ce,{}),search:e.jsx(Re,{}),tune:e.jsx(qe,{}),favorite:e.jsx(_e,{}),nutrition:e.jsx(Fe,{}),bolt:e.jsx(Ee,{}),checkroom:e.jsx(Ye,{}),water_drop:e.jsx(Ke,{}),local_drink:e.jsx(Ze,{}),fitness_center:e.jsx(We,{})},rt=Y.forwardRef(function(x,t){return e.jsx(he,{direction:"up",ref:t,...x})}),Z=({name:s,filled:x=!1,className:t=""})=>e.jsx(e.Fragment,{children:tt[s]});function At(){const s=H(r=>r.activeCategory),x=H(r=>r.setActiveCategory),t=H(r=>r.categories),n=H(r=>r.categoryItems),l=H(r=>r.products),y=H(r=>r.fetchProducts),v=le(r=>r.fetchRules),I=H(r=>r.isLoading),C=re();p.useEffect(()=>{y(),v()},[y]);const[g,W]=p.useState(null),[z,T]=p.useState(""),[D,S]=p.useState(!1),[w,V]=p.useState(!1),[b,L]=p.useState(""),R=(r,j,a=!0)=>{if(!j)return 0;const c=r.toLowerCase(),h=j.toLowerCase();if(c===h)return 100;if(c.startsWith(h))return 80;if(c.includes(h))return 60;if(!a)return 0;let k=0;const f=h.split("");let M=-1;for(const B of f){const d=c.indexOf(B,M+1);d>-1&&(k++,M=d)}const A=k/h.length*40;return A>20?A:0},E=z?l.filter(r=>b?r.category.toLowerCase().includes(b.toLowerCase()):!0).map(r=>{const j=z.trim().toLowerCase().split(/\s+/),a=n.find(h=>h.name===r.category);let c=0;for(const h of j){const k=R(r.name,h,!1)*10,f=r.sku?R(r.sku,h,!0)*8:0,M=a?.sku?R(a.sku,h,!0)*5:0,A=R(r.detail,h,!0),B=R(r.category,h,!1),d=r.id?R(String(r.id),h,!0):0,P=Math.max(k,f,M,A,B,d);c+=P}return{...r,searchScore:c}}).filter(r=>r.searchScore>0).sort((r,j)=>(j.searchScore||0)-(r.searchScore||0)):l,F=r=>{x(r),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)},i=r=>{W(r),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)},u=()=>{W(null),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)};return e.jsxs(o,{sx:{pb:10,bgcolor:"background.default",minHeight:"100vh",color:"text.primary"},children:[e.jsxs(o,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:"background.default",borderBottom:1,borderColor:"divider"},children:[e.jsx(Be,{title:"Shop Online",icon:e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(se,{src:ze,sx:{width:40,height:40,border:"2px solid",borderColor:"primary.main"},onClick:()=>C({to:"/admin"})}),e.jsx(o,{sx:{position:"absolute",bottom:0,right:0,width:12,height:12,bgcolor:"primary.main",borderRadius:"50%",border:"2px solid",borderColor:"background.paper"}})]}),rightContent:e.jsxs(e.Fragment,{children:[e.jsx(Ie,{sx:{cursor:"pointer",pr:2,color:"text.secondary"},onClick:()=>S(!0)}),e.jsx(Ge,{sx:{cursor:"pointer",pr:2,color:"text.secondary"},onClick:()=>C({to:"/history"})}),e.jsx(me,{})]})}),e.jsxs(o,{sx:{px:2,pt:0,pb:1.5},children:[e.jsxs(o,{sx:{position:"relative"},children:[e.jsx(o,{sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",display:"flex",zIndex:100},children:e.jsx(Z,{name:"search"})}),e.jsx(G,{placeholder:"Search supplements, gear...",value:z,onChange:r=>T(r.target.value),onKeyDown:r=>{r.key==="Escape"&&(T(""),r.target.blur())},sx:{width:"100%",bgcolor:"background.paper",borderRadius:4,py:1.5,pl:6,pr:6,border:1,borderColor:"divider","&.Mui-focused":{borderColor:"primary.main",boxShadow:"0 0 0 2px rgba(242, 215, 13, 0.2)"}}}),e.jsx(Q,{onClick:()=>V(!w),sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",bgcolor:w||b?"primary.main":"action.hover",color:w||b?"common.black":"inherit",p:.5,borderRadius:2,"&:hover":{bgcolor:w||b?"primary.dark":"action.selected"}},children:e.jsx(Z,{name:"tune"})})]}),e.jsx(je,{in:w,children:e.jsx(o,{sx:{pt:1},children:e.jsx(G,{placeholder:"Filter categories...",value:b,onChange:r=>L(r.target.value),sx:{width:"100%",bgcolor:"background.paper",borderRadius:3,py:1,px:2,border:1,borderColor:"divider",fontSize:"0.9rem"}})})})]})]}),e.jsx(De,{children:I?e.jsx(o,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:e.jsx(oe,{})}):e.jsxs(e.Fragment,{children:[!z&&e.jsx(o,{sx:{display:"flex",gap:1.5,overflowX:"auto",pb:2,"&::-webkit-scrollbar":{display:"none"}},children:(()=>{const r=t.filter(c=>c!=="All Items");return(l.some(c=>!c.categoryOnly&&(!c.category||!r.includes(c.category)))?[...t,"Un-grouped"]:t).map(c=>e.jsx(Oe,{label:c,onClick:()=>F(c),sx:{fontWeight:"bold",borderRadius:50,height:40,px:1,bgcolor:"background.paper",color:s===c?"primary.main":"text.secondary",border:1,borderColor:s===c?"primary.main":"divider","&:hover":{bgcolor:s===c?"primary.dark":"action.hover"}}},c))})()}),e.jsx(o,{sx:{px:0,pb:10},children:z?e.jsxs(o,{children:[e.jsxs(m,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:["Search Results (",E.length,")"]}),E.length>0?e.jsx(N,{container:!0,spacing:2,children:E.map(r=>e.jsx(N,{size:{xs:6,sm:6,md:3,lg:2,xl:2},children:e.jsx(K,{product:r,onClick:()=>i(r),setActiveCategory:F})},r.id))}):e.jsx(o,{sx:{textAlign:"center",py:8,opacity:.6},children:e.jsxs(m,{variant:"body1",children:['No products found matching "',z,'"']})})]}):e.jsx(e.Fragment,{children:s==="All Items"?e.jsx(e.Fragment,{children:e.jsx(N,{container:!0,spacing:2,children:(()=>{const r=t.filter(f=>f!=="All Items"),j=l.filter(f=>!f.categoryOnly&&(!f.category||!r.includes(f.category))),a=t.filter(f=>f!=="All Items").filter(f=>!b||f.toLowerCase().includes(b.toLowerCase())),c=[],h=[];a.forEach(f=>{l.filter(A=>A.category===f).length>0?c.push(f):h.push(f)});const k=f=>{const M=n.find(B=>B.name===f);if(!M)return null;const A=l.filter(B=>B.category===f).length;return e.jsx(N,{size:{xs:12,md:4},children:e.jsx(te,{title:f,count:A,products:[M],onProductClick:()=>F(f),onViewAll:()=>F(f),setActiveCategory:F})},f)};return e.jsxs(e.Fragment,{children:[c.map(k),j.length>0&&(!b||"un-grouped".includes(b.toLowerCase()))&&e.jsx(N,{size:{xs:12,md:4},children:e.jsx(te,{title:"Un-grouped",count:j.length,products:[{id:"ungrouped-dummy",name:"Un-grouped Items",detail:"Items not yet categorized",icon:"shopping_cart",sale:!1,isNew:!1,category:"Un-grouped",imageColor:"#f5f5f5",categoryOnly:!0}],onProductClick:()=>F("Un-grouped"),onViewAll:()=>F("Un-grouped"),setActiveCategory:F})},"Un-grouped"),h.length>0&&e.jsx(N,{size:12,children:e.jsxs(o,{sx:{display:"flex",alignItems:"center",my:3},children:[e.jsx(q,{sx:{flex:1}}),e.jsx(m,{variant:"caption",sx:{px:2,fontWeight:"bold",color:"text.secondary",textTransform:"uppercase"},children:"Empty Categories"}),e.jsx(q,{sx:{flex:1}})]})}),h.map(k)]})})()})}):e.jsx(o,{sx:{px:0},children:e.jsx(N,{container:!0,spacing:2,children:(()=>{const r=t.filter(a=>a!=="All Items");let j=l;return s==="Un-grouped"?j=l.filter(a=>!a.categoryOnly&&(!a.category||!r.includes(a.category))):j=l.filter(a=>a.category===s&&!a.categoryOnly),j.map(a=>e.jsx(N,{size:{xs:6,sm:6,md:6,lg:4,xl:4},children:e.jsx(K,{product:a,onClick:()=>i(a),setActiveCategory:F})},a.id))})()})})})})]})}),e.jsx(st,{open:g!==null,handleClose:u,product:g}),e.jsx(et,{open:D,onClose:()=>S(!1),onScanSuccess:r=>{S(!1),T(r),window.scrollTo({top:0,behavior:"smooth"})}})]})}const ot=({onClick:s})=>e.jsxs(ne,{onClick:s,sx:{minWidth:120,height:"100%",borderRadius:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"action.hover",border:1,borderColor:"divider",cursor:"pointer","&:hover":{borderColor:"primary.main",bgcolor:"action.selected",transform:"scale(1.02)",transition:"all 0.2s"}},children:[e.jsx(se,{sx:{bgcolor:"primary.main",mb:1.5,width:48,height:48},children:e.jsx(Qe,{sx:{color:"black",fontSize:20,ml:.5}})}),e.jsx(m,{variant:"subtitle2",sx:{fontWeight:800,color:"text.primary"},children:"View All"})]}),te=({title:s,count:x,products:t,onProductClick:n,onViewAll:l,setActiveCategory:y})=>e.jsxs(o,{children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:0,mb:1.5},children:[e.jsxs(m,{variant:"h6",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,fontSize:"0.9rem"},children:[s," ",e.jsxs(m,{component:"span",sx:{color:"text.secondary",fontWeight:600},children:["(",x,")"]})]}),e.jsx(U,{size:"small",onClick:l,sx:{fontWeight:700,textTransform:"none",color:"primary.main",minWidth:0,p:0,"&:hover":{bgcolor:"transparent",textDecoration:"underline"}},children:"View all"})]}),e.jsxs(o,{sx:{display:"flex",gap:2,overflowX:"auto",px:2,pb:1,"&::-webkit-scrollbar":{display:"none"},scrollSnapType:"x mandatory","& > *":{scrollSnapAlign:"start"}},children:[t.filter(v=>v.categoryOnly).slice(0,1).map(v=>e.jsx(o,{sx:{minWidth:200,maxWidth:200},children:e.jsx(K,{product:v,onClick:n,setActiveCategory:y})},v.id)),e.jsx(o,{sx:{minWidth:120,py:.5},children:e.jsx(ot,{onClick:l})})]})]}),st=({open:s,handleClose:x,product:t})=>{const[n,l]=p.useState(1),[y,v]=p.useState(""),[I,C]=p.useState(""),[g,W]=p.useState(null),z=_(i=>i.addToCart),T=_(i=>i.items),D=_(i=>i.updateQuantity),{rules:S}=le(),w=T.find(i=>i.id===t?.id&&i.selectedSize?.label===g?.label);if(Y.useEffect(()=>{s&&t&&(w?l(w.quantity):(l(1),v(""),C("")))},[s,t?.id,g?.label]),Y.useEffect(()=>{if(t?.isComplexVariant&&y&&I){const i=Number(y)*Number(I);l(Math.round(i*100)/100)}},[y,I,t?.isComplexVariant]),Y.useEffect(()=>{s&&t&&!g&&t.sizes&&t.sizes.length>0&&W(t.sizes[0])},[s,t]),!t)return null;const V=g?g.price:t.price;let b=0;if(t.taxRuleId){const i=S.find(u=>u.id===t.taxRuleId);i&&(i.valueType==="percentage"?b=V*(i.value/100):b=i.value)}let L=0;t.addonRuleIds&&t.addonRuleIds.length>0&&t.addonRuleIds.forEach(i=>{const u=S.find(r=>r.id===i);u&&(u.valueType==="percentage"?L+=V*(u.value/100):L+=u.value)});const R=V,E=R+b+L,F=()=>{let i=g;t.isComplexVariant&&(i={label:`${y} x ${I} ${t.unitName||"units"}`,price:V}),w?(t.isComplexVariant?T.find(r=>r.id===t.id&&r.selectedSize?.label===i.label):w)?D(t.id,n,i?.label):z({id:t.id,sku:t.sku,name:t.name,buyPrice:R,taxAmount:b,addonAmount:L,totalPrice:E,src:t.src,quantity:n,selectedSize:i,category:t.category,isComplexVariant:t.isComplexVariant,unitName:t.unitName}):z({id:t.id,sku:t.sku,name:t.name,buyPrice:R,taxAmount:b,addonAmount:L,totalPrice:E,src:t.src,quantity:n,selectedSize:i,category:t.category,isComplexVariant:t.isComplexVariant,unitName:t.unitName}),x()};return e.jsx(de,{fullScreen:!0,open:s,onClose:x,TransitionComponent:rt,PaperProps:{sx:{bgcolor:"background.default",color:"text.primary"}},children:e.jsxs(o,{sx:{position:"relative",display:"flex",flexDirection:"column",height:"100%",maxWidth:"sm",mx:"auto",width:"100%",bgcolor:"background.paper",boxShadow:i=>i.shadows[10]},children:[e.jsx(ie,{sx:{position:"sticky",bgcolor:"background.paper",color:"text.primary",boxShadow:"none",borderBottom:1,borderColor:"divider"},children:e.jsxs(ae,{sx:{justifyContent:"space-between",minHeight:56},children:[e.jsx(Q,{edge:"start",onClick:x,"aria-label":"close",size:"small",children:e.jsx(ve,{fontSize:"small"})}),e.jsx(m,{sx:{fontWeight:800,fontSize:"1.1rem",letterSpacing:-.5},variant:"h6",children:"Product Details"}),e.jsx(o,{sx:{position:"relative",display:"flex"},children:e.jsx(me,{})})]})}),e.jsxs(o,{sx:{flex:1,overflowY:"auto",pb:13},children:[e.jsxs(o,{sx:{width:"100%",aspectRatio:"16/9",bgcolor:"#121212",borderRadius:"0 0 20px 20px",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 -10px 20px rgba(0,0,0,0.2)"},children:[t.src&&e.jsx(o,{component:"img",src:t.src,alt:t.name,sx:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}),e.jsx(o,{sx:{position:"absolute",bottom:12,right:12,bgcolor:"rgba(0,0,0,0.6)",color:"white",px:1.2,py:.4,borderRadius:10,fontSize:11,fontWeight:"bold",backdropFilter:"blur(8px)",zIndex:1},children:"1 / 3"})]}),e.jsxs(o,{sx:{px:2.5,pt:2.5},children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:.5},children:[e.jsxs(o,{sx:{flex:1,pr:2},children:[e.jsx(m,{variant:"h6",sx:{fontWeight:800,lineHeight:1.2,mb:.5},children:t.name}),e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:.5,color:"success.main"},children:[e.jsx(Se,{sx:{fontSize:14}}),e.jsx(m,{variant:"caption",sx:{fontWeight:600},children:"In Stock • Ready to ship"})]}),t.sku&&e.jsxs(m,{variant:"caption",sx:{fontWeight:800,color:"text.disabled",letterSpacing:1,mt:.5,display:"block"},children:["SKU: ",t.sku]})]}),e.jsxs(o,{sx:{textAlign:"right"},children:[e.jsxs(m,{variant:"h6",color:"primary.main",sx:{fontWeight:800,lineHeight:1},children:["₹",E?.toFixed(2)]}),(b>0||L>0)&&e.jsxs(e.Fragment,{children:[e.jsxs(m,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5,fontSize:"0.7rem"},children:["(Base: ₹",R.toFixed(2),")"]}),e.jsxs(m,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.2,fontSize:"0.7rem"},children:["(Tax: ₹",b.toFixed(2),")"]}),e.jsxs(m,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.2,fontSize:"0.7rem"},children:["(Addon: ₹",L.toFixed(2),")"]})]})]})]}),e.jsx(q,{sx:{my:2,opacity:.6}}),e.jsxs(o,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(o,{children:[e.jsxs(o,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(m,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:1,color:"text.secondary"},children:"Size Selection"}),e.jsx(U,{variant:"text",size:"small",startIcon:e.jsx(we,{sx:{fontSize:"14px !important"}}),sx:{textTransform:"none",color:"text.secondary",fontSize:"0.75rem",fontWeight:600,minWidth:0,p:0},children:"Size Guide"})]}),t.sizes&&t.sizes.length>0?e.jsx(Le,{fullWidth:!0,size:"small",children:e.jsx(Me,{value:g?g.label:"",onChange:i=>{const u=t.sizes.find(r=>r.label===i.target.value);W(u)},sx:{borderRadius:2,fontWeight:700,fontSize:"0.85rem",bgcolor:"background.paper","& .MuiSelect-select":{py:1}},children:t.sizes.map(i=>e.jsxs(Ce,{value:i.label,children:[i.label," - ₹",i.price.toFixed(2)]},i.label))})}):e.jsx(m,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",bgcolor:"action.hover",p:1,borderRadius:2,textAlign:"center"},children:"SIngle Variant"})]}),e.jsxs(o,{sx:{bgcolor:"action.hover",borderRadius:3,p:2,display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[e.jsx(o,{sx:{flex:1,mr:2},children:t.isComplexVariant?e.jsxs(o,{sx:{width:"100%"},children:[e.jsxs(m,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:1},children:["Measurements (",t.unitName,")"]}),e.jsxs(o,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(G,{type:"number",placeholder:"X",value:y,onChange:i=>v(Number(i.target.value)),sx:{bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:2,px:2,py:1,width:"100%",fontWeight:"bold"}}),e.jsx(m,{sx:{color:"text.secondary",fontWeight:"bold"},children:"x"}),e.jsx(G,{type:"number",placeholder:"Y",value:I,onChange:i=>C(Number(i.target.value)),sx:{bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:2,px:2,py:1,width:"100%",fontWeight:"bold"}})]}),e.jsxs(m,{variant:"body2",sx:{mt:1,fontWeight:"bold",color:"primary.main",textAlign:"right"},children:["Total: ",n," ",t.unitName,"²"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(m,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:.5},children:"Quantity"}),e.jsx(Ve,{quantity:n,onQuantityChange:l})]})}),e.jsxs(o,{sx:{textAlign:"right",marginTop:"auto",marginBottom:"auto"},children:[e.jsx(m,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:.5},children:"Total Value"}),e.jsxs(m,{sx:{fontWeight:900,color:"text.primary",fontSize:"1.1rem"},children:["₹",(E*n).toFixed(2)]})]})]}),e.jsxs(o,{children:[e.jsxs(o,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(m,{variant:"subtitle1",sx:{fontWeight:800},children:"Description"}),e.jsx(Xe,{sx:{fontSize:16,color:"text.disabled"}})]}),e.jsx(m,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.6,fontSize:"0.875rem"},children:t.detail}),e.jsxs(o,{sx:{mt:2.5,p:1.5,borderRadius:3,display:"flex",gap:1.5,bgcolor:"primary.light",background:"linear-gradient(135deg, rgba(242, 215, 13, 0.1) 0%, rgba(242, 215, 13, 0.05) 100%)",border:"1px solid rgba(242, 215, 13, 0.2)",alignItems:"center"},children:[e.jsx(o,{sx:{width:36,height:36,borderRadius:"10px",bgcolor:"primary.main",display:"flex",alignItems:"center",justifyContent:"center",color:"common.black",flexShrink:0},children:e.jsx(ke,{sx:{fontSize:18}})}),e.jsxs(o,{children:[e.jsx(m,{sx:{fontWeight:800,fontSize:"0.8rem",color:"text.primary"},children:"Free Desk Delivery"}),e.jsx(m,{sx:{fontSize:"0.7rem",color:"text.secondary",fontWeight:500},children:"Collection available within 2 hours at front desk"})]})]})]})]})]})]}),e.jsx(o,{sx:{position:"fixed",bottom:0,left:0,right:0,p:2,bgcolor:"background.paper",borderTop:1,borderColor:"divider",maxWidth:"sm",mx:"auto",zIndex:10},children:e.jsxs(U,{fullWidth:!0,variant:"contained",size:"large",onClick:F,sx:{py:2,borderRadius:4,fontWeight:800,textTransform:"none",fontSize:"1.1rem",bgcolor:w?"success.main":"primary.main",color:w?"white":"black",boxShadow:"0 8px 20px -4px rgba(242, 215, 13, 0.4)","&:hover":{bgcolor:w?"success.dark":"primary.dark"}},children:["Add to Cart • ₹",(E*n).toFixed(2)]})})]})})},K=({product:s,onClick:x,setActiveCategory:t})=>{const l=_(y=>y.items).some(y=>y.id===s.id);return e.jsx(ne,{onClick:()=>{s.categoryOnly?t(s.category):x(s)},sx:{cursor:"pointer",borderRadius:4,height:"100%",display:"flex",flexDirection:"column",bgcolor:"background.paper",border:1,borderColor:"divider",boxShadow:"0 2px 6px -1px rgba(0, 0, 0, 0.1),0 2px 4px -1px rgba(0, 0, 0, 0.06)","&:hover":{borderColor:"primary.main"}},children:e.jsxs(Ne,{sx:{p:1.5,flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs(o,{sx:{aspectRatio:"1/1",bgcolor:"action.hover",borderRadius:3,mb:1.5,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[s.src?e.jsx("img",{loading:"lazy",src:s.src,alt:s.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:3}}):e.jsx(Z,{name:s.icon,className:"!text-6xl text-gray-400"}),s.sale&&e.jsx(o,{sx:{position:"absolute",top:8,left:8,bgcolor:"secondary.main",color:"white",fontSize:10,fontWeight:"bold",px:1,py:.25,borderRadius:10,textTransform:"uppercase"},children:"Sale"}),s.isNew&&e.jsx(o,{sx:{position:"absolute",top:8,left:8,bgcolor:"info.main",color:"black",fontSize:10,fontWeight:"bold",px:1,py:.25,borderRadius:10,textTransform:"uppercase"},children:"New"}),e.jsx(Q,{size:"small",sx:{position:"absolute",top:8,right:8,bgcolor:"background.paper",backdropFilter:"blur(4px)",backgroundColor:"#ffffff63",color:"text.secondary","&:hover":{color:"secondary.main"}},children:e.jsx(Z,{name:"favorite",className:"!text-lg"})})]}),e.jsx(m,{variant:"body2",sx:{fontWeight:"bold",lineHeight:1.2,mb:.5,overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical"},children:s.name}),e.jsx(m,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:s.detail?.length>30?s.detail.substring(0,30)+"...":s.detail}),s.sku&&e.jsxs(m,{variant:"caption",color:"text.disabled",sx:{display:"block",fontWeight:800,fontSize:"0.65rem",mt:.5,letterSpacing:.5},children:["SKU: ",s.sku]}),!s.categoryOnly&&e.jsxs(o,{sx:{mt:2,display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsx(o,{sx:{display:"flex",flexDirection:"column"},children:e.jsxs(m,{variant:"subtitle1",sx:{fontWeight:"bold",color:s.sale?"primary.main":"text.primary",lineHeight:1},children:["₹",s?.price?.toFixed(2)]})}),e.jsx(Q,{sx:{bgcolor:l?"primary.main":"action.hover",color:l?"black":"text.primary",borderRadius:3,width:36,height:36,"&:hover":{bgcolor:"primary.main",color:"black"}},children:e.jsx(Te,{})})]})]})})};export{At as component};
