import{f as ke,j as a,ah as Te,a as ze,r as be,B as fe,I as De,A as Le,h as se,l as Se,a4 as Fe}from"./index-DHY1Ru8d.js";import{G as pe}from"./Grid-CW8kZ2Pf.js";import{C as we}from"./CardContent-Ce5oJmi1.js";import{B as ve}from"./Button-I2KpT16O.js";import{C as Re}from"./CloudUpload-DiEWdVuh.js";import{T as Ne,a as Me,b as Ue,c as Oe,d as Q,e as Pe}from"./TableRow-sNeFL_iU.js";import"./isMuiElement-cndmTMkq.js";const Be=ke(a.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),We=ke(a.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-6 10H6v-2h8zm4-4H6v-2h12z"})),He=ke(a.jsx("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2M3 19c0 1.1.9 2 2 2h3V10H3z"}));var ge={exports:{}};var qe=ge.exports,Ae;function Je(){return Ae||(Ae=1,(function(me,G){((de,k)=>{me.exports=k()})(qe,function de(){var k=typeof self<"u"?self:typeof window<"u"?window:k!==void 0?k:{},X,Z=!k.document&&!!k.postMessage,ae=k.IS_PAPA_WORKER||!1,oe={},_e=0,o={};function H(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=ye(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new z(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(t,r){var i=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<i){let c=this._config.newline;c||(n=this._config.quoteChar||'"',c=this._handle.guessLineEndings(t,n)),t=[...t.split(c).slice(i)].join(c)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(n=this._config.beforeFirstChunk(t))!==void 0&&(t=n),this.isFirstChunk=!1,this._halted=!1;var i=this._partialLine+t,n=(this._partialLine="",this._handle.parse(i,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=n.meta.cursor,i=(this._finished||(this._partialLine=i.substring(t-this._baseIndex),this._baseIndex=t),n&&n.data&&(this._rowCount+=n.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),ae)k.postMessage({results:n,workerId:o.WORKER_ID,finished:i});else if(b(this._config.chunk)&&!r){if(this._config.chunk(n,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=n=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(n.data),this._completeResults.errors=this._completeResults.errors.concat(n.errors),this._completeResults.meta=n.meta),this._completed||!i||!b(this._config.complete)||n&&n.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),i||n&&n.meta.paused||this._nextChunk(),n}this._halted=!0},this._sendError=function(t){b(this._config.error)?this._config.error(t):ae&&this._config.error&&k.postMessage({workerId:o.WORKER_ID,error:t,finished:!1})}}function w(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),H.call(this,e),this._nextChunk=Z?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),Z||(t.onload=ee(this._chunkLoaded,this),t.onerror=ee(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!Z),this._config.downloadRequestHeaders){var r,i=this._config.downloadRequestHeaders;for(r in i)t.setRequestHeader(r,i[r])}var n;this._config.chunkSize&&(n=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+n));try{t.send(this._config.downloadRequestBody)}catch(c){this._chunkError(c.message)}Z&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function T(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),H.call(this,e);var t,r,i=typeof FileReader<"u";this.stream=function(n){this._input=n,r=n.slice||n.webkitSlice||n.mozSlice,i?((t=new FileReader).onload=ee(this._chunkLoaded,this),t.onerror=ee(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var n=this._input,c=(this._config.chunkSize&&(c=Math.min(this._start+this._config.chunkSize,this._input.size),n=r.call(n,this._start,c)),t.readAsText(n,this._config.encoding));i||this._chunkLoaded({target:{result:c}})},this._chunkLoaded=function(n){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(n.target.result)},this._chunkError=function(){this._sendError(t.error)}}function y(e){var t;H.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,i;if(!this._finished)return r=this._config.chunkSize,t=r?(i=t.substring(0,r),t.substring(r)):(i=t,""),this._finished=!t,this.parseChunk(i)}}function U(e){H.call(this,e=e||{});var t=[],r=!0,i=!1;this.pause=function(){H.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){H.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(n){this._input=n,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){i&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=ee(function(n){try{t.push(typeof n=="string"?n:n.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(c){this._streamError(c)}},this),this._streamError=ee(function(n){this._streamCleanUp(),this._sendError(n)},this),this._streamEnd=ee(function(){this._streamCleanUp(),i=!0,this._streamData("")},this),this._streamCleanUp=ee(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function z(e){var t,r,i,n,c=Math.pow(2,53),O=-c,P=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,B=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,f=this,C=0,l=0,F=!1,d=!1,p=[],s={data:[],errors:[],meta:{}};function A(g){return e.skipEmptyLines==="greedy"?g.join("").trim()==="":g.length===1&&g[0].length===0}function R(){if(s&&i&&(W("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),i=!1),e.skipEmptyLines&&(s.data=s.data.filter(function(h){return!A(h)})),L()){let h=function(S,I){b(e.transformHeader)&&(S=e.transformHeader(S,I)),p.push(S)};if(s)if(Array.isArray(s.data[0])){for(var g=0;L()&&g<s.data.length;g++)s.data[g].forEach(h);s.data.splice(0,1)}else s.data.forEach(h)}function _(h,S){for(var I=e.header?{}:[],x=0;x<h.length;x++){var v=x,m=h[x],m=((J,u)=>(E=>(e.dynamicTypingFunction&&e.dynamicTyping[E]===void 0&&(e.dynamicTyping[E]=e.dynamicTypingFunction(E)),(e.dynamicTyping[E]||e.dynamicTyping)===!0))(J)?u==="true"||u==="TRUE"||u!=="false"&&u!=="FALSE"&&((E=>{if(P.test(E)&&(E=parseFloat(E),O<E&&E<c))return 1})(u)?parseFloat(u):B.test(u)?new Date(u):u===""?null:u):u)(v=e.header?x>=p.length?"__parsed_extra":p[x]:v,m=e.transform?e.transform(m,v):m);v==="__parsed_extra"?(I[v]=I[v]||[],I[v].push(m)):I[v]=m}return e.header&&(x>p.length?W("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+x,l+S):x<p.length&&W("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+x,l+S)),I}var j;s&&(e.header||e.dynamicTyping||e.transform)&&(j=1,!s.data.length||Array.isArray(s.data[0])?(s.data=s.data.map(_),j=s.data.length):s.data=_(s.data,0),e.header&&s.meta&&(s.meta.fields=p),l+=j)}function L(){return e.header&&p.length===0}function W(g,_,j,h){g={type:g,code:_,message:j},h!==void 0&&(g.row=h),s.errors.push(g)}b(e.step)&&(n=e.step,e.step=function(g){s=g,L()?R():(R(),s.data.length!==0&&(C+=g.data.length,e.preview&&C>e.preview?r.abort():(s.data=s.data[0],n(s,f))))}),this.parse=function(g,_,j){var h=e.quoteChar||'"',h=(e.newline||(e.newline=this.guessLineEndings(g,h)),i=!1,e.delimiter?b(e.delimiter)&&(e.delimiter=e.delimiter(g),s.meta.delimiter=e.delimiter):((h=((S,I,x,v,m)=>{var J,u,E,te;m=m||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var le=0;le<m.length;le++){for(var K,ue=m[le],N=0,V=0,D=0,M=(E=void 0,new re({comments:v,delimiter:ue,newline:I,preview:10}).parse(S)),Y=0;Y<M.data.length;Y++)x&&A(M.data[Y])?D++:(K=M.data[Y].length,V+=K,E===void 0?E=K:0<K&&(N+=Math.abs(K-E),E=K));0<M.data.length&&(V/=M.data.length-D),(u===void 0||N<=u)&&(te===void 0||te<V)&&1.99<V&&(u=N,J=ue,te=V)}return{successful:!!(e.delimiter=J),bestDelimiter:J}})(g,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=h.bestDelimiter:(i=!0,e.delimiter=o.DefaultDelimiter),s.meta.delimiter=e.delimiter),ye(e));return e.preview&&e.header&&h.preview++,t=g,r=new re(h),s=r.parse(t,_,j),R(),F?{meta:{paused:!0}}:s||{meta:{paused:!1}}},this.paused=function(){return F},this.pause=function(){F=!0,r.abort(),t=b(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){f.streamer._halted?(F=!1,f.streamer.parseChunk(t,!0)):setTimeout(f.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,r.abort(),s.meta.aborted=!0,b(e.complete)&&e.complete(s),t=""},this.guessLineEndings=function(S,h){S=S.substring(0,1048576);var h=new RegExp(q(h)+"([^]*?)"+q(h),"gm"),j=(S=S.replace(h,"")).split("\r"),h=S.split(`
`),S=1<h.length&&h[0].length<j[0].length;if(j.length===1||S)return`
`;for(var I=0,x=0;x<j.length;x++)j[x][0]===`
`&&I++;return I>=j.length/2?`\r
`:"\r"}}function q(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function re(e){var t=(e=e||{}).delimiter,r=e.newline,i=e.comments,n=e.step,c=e.preview,O=e.fastMode,P=null,B=!1,f=e.quoteChar==null?'"':e.quoteChar,C=f;if(e.escapeChar!==void 0&&(C=e.escapeChar),(typeof t!="string"||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),i===t)throw new Error("Comment character same as delimiter");i===!0?i="#":(typeof i!="string"||-1<o.BAD_DELIMITERS.indexOf(i))&&(i=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var l=0,F=!1;this.parse=function(d,p,s){if(typeof d!="string")throw new Error("Input must be a string");var A=d.length,R=t.length,L=r.length,W=i.length,g=b(n),_=[],j=[],h=[],S=l=0;if(!d)return N();if(O||O!==!1&&d.indexOf(f)===-1){for(var I=d.split(r),x=0;x<I.length;x++){if(h=I[x],l+=h.length,x!==I.length-1)l+=r.length;else if(s)return N();if(!i||h.substring(0,W)!==i){if(g){if(_=[],te(h.split(t)),V(),F)return N()}else te(h.split(t));if(c&&c<=x)return _=_.slice(0,c),N(!0)}}return N()}for(var v=d.indexOf(t,l),m=d.indexOf(r,l),J=new RegExp(q(C)+q(f),"g"),u=d.indexOf(f,l);;)if(d[l]===f)for(u=l,l++;;){if((u=d.indexOf(f,u+1))===-1)return s||j.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:_.length,index:l}),K();if(u===A-1)return K(d.substring(l,u).replace(J,f));if(f===C&&d[u+1]===C)u++;else if(f===C||u===0||d[u-1]!==C){v!==-1&&v<u+1&&(v=d.indexOf(t,u+1));var E=le((m=m!==-1&&m<u+1?d.indexOf(r,u+1):m)===-1?v:Math.min(v,m));if(d.substr(u+1+E,R)===t){h.push(d.substring(l,u).replace(J,f)),d[l=u+1+E+R]!==f&&(u=d.indexOf(f,l)),v=d.indexOf(t,l),m=d.indexOf(r,l);break}if(E=le(m),d.substring(u+1+E,u+1+E+L)===r){if(h.push(d.substring(l,u).replace(J,f)),ue(u+1+E+L),v=d.indexOf(t,l),u=d.indexOf(f,l),g&&(V(),F))return N();if(c&&_.length>=c)return N(!0);break}j.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:_.length,index:l}),u++}}else if(i&&h.length===0&&d.substring(l,l+W)===i){if(m===-1)return N();l=m+L,m=d.indexOf(r,l),v=d.indexOf(t,l)}else if(v!==-1&&(v<m||m===-1))h.push(d.substring(l,v)),l=v+R,v=d.indexOf(t,l);else{if(m===-1)break;if(h.push(d.substring(l,m)),ue(m+L),g&&(V(),F))return N();if(c&&_.length>=c)return N(!0)}return K();function te(D){_.push(D),S=l}function le(D){var M=0;return M=D!==-1&&(D=d.substring(u+1,D))&&D.trim()===""?D.length:M}function K(D){return s||(D===void 0&&(D=d.substring(l)),h.push(D),l=A,te(h),g&&V()),N()}function ue(D){l=D,te(h),h=[],m=d.indexOf(r,l)}function N(D){if(e.header&&!p&&_.length&&!B){var M=_[0],Y=Object.create(null),xe=new Set(M);let Ce=!1;for(let he=0;he<M.length;he++){let $=M[he];if(Y[$=b(e.transformHeader)?e.transformHeader($,he):$]){let ce,je=Y[$];for(;ce=$+"_"+je,je++,xe.has(ce););xe.add(ce),M[he]=ce,Y[$]++,Ce=!0,(P=P===null?{}:P)[ce]=$}else Y[$]=1,M[he]=$;xe.add($)}Ce&&console.warn("Duplicate headers found and renamed."),B=!0}return{data:_,errors:j,meta:{delimiter:t,linebreak:r,aborted:F,truncated:!!D,cursor:S+(p||0),renamedHeaders:P}}}function V(){n(N()),_=[],j=[]}},this.abort=function(){F=!0},this.getCharIndex=function(){return l}}function ne(e){var t=e.data,r=oe[t.workerId],i=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var n={abort:function(){i=!0,ie(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:Ee,resume:Ee};if(b(r.userStep)){for(var c=0;c<t.results.data.length&&(r.userStep({data:t.results.data[c],errors:t.results.errors,meta:t.results.meta},n),!i);c++);delete t.results}else b(r.userChunk)&&(r.userChunk(t.results,n,t.file),delete t.results)}t.finished&&!i&&ie(t.workerId,t.results)}function ie(e,t){var r=oe[e];b(r.userComplete)&&r.userComplete(t),r.terminate(),delete oe[e]}function Ee(){throw new Error("Not implemented.")}function ye(e){if(typeof e!="object"||e===null)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=ye(e[t]);return r}function ee(e,t){return function(){e.apply(t,arguments)}}function b(e){return typeof e=="function"}return o.parse=function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(b(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!b(t.transform)&&t.transform,!t.worker||!o.WORKERS_SUPPORTED)return r=null,o.NODE_STREAM_INPUT,typeof e=="string"?(e=(i=>i.charCodeAt(0)!==65279?i:i.slice(1))(e),r=new(t.download?w:y)(t)):e.readable===!0&&b(e.read)&&b(e.on)?r=new U(t):(k.File&&e instanceof File||e instanceof Object)&&(r=new T(t)),r.stream(e);(r=(()=>{var i;return!!o.WORKERS_SUPPORTED&&(i=(()=>{var n=k.URL||k.webkitURL||null,c=de.toString();return o.BLOB_URL||(o.BLOB_URL=n.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",c,")();"],{type:"text/javascript"})))})(),(i=new k.Worker(i)).onmessage=ne,i.id=_e++,oe[i.id]=i)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=b(t.step),t.chunk=b(t.chunk),t.complete=b(t.complete),t.error=b(t.error),delete t.worker,r.postMessage({input:e,config:t,workerId:r.id})},o.unparse=function(e,t){var r=!1,i=!0,n=",",c=`\r
`,O='"',P=O+O,B=!1,f=null,C=!1,l=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||o.BAD_DELIMITERS.filter(function(p){return t.delimiter.indexOf(p)!==-1}).length||(n=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(B=t.skipEmptyLines),typeof t.newline=="string"&&(c=t.newline),typeof t.quoteChar=="string"&&(O=t.quoteChar),typeof t.header=="boolean"&&(i=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");f=t.columns}t.escapeChar!==void 0&&(P=t.escapeChar+O),t.escapeFormulae instanceof RegExp?C=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(C=/^[=+\-@\t\r].*$/)}})(),new RegExp(q(O),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return F(null,e,B);if(typeof e[0]=="object")return F(f||Object.keys(e[0]),e,B)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||f),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),F(e.fields||[],e.data||[],B);throw new Error("Unable to serialize unrecognized input");function F(p,s,A){var R="",L=(typeof p=="string"&&(p=JSON.parse(p)),typeof s=="string"&&(s=JSON.parse(s)),Array.isArray(p)&&0<p.length),W=!Array.isArray(s[0]);if(L&&i){for(var g=0;g<p.length;g++)0<g&&(R+=n),R+=d(p[g],g);0<s.length&&(R+=c)}for(var _=0;_<s.length;_++){var j=(L?p:s[_]).length,h=!1,S=L?Object.keys(s[_]).length===0:s[_].length===0;if(A&&!L&&(h=A==="greedy"?s[_].join("").trim()==="":s[_].length===1&&s[_][0].length===0),A==="greedy"&&L){for(var I=[],x=0;x<j;x++){var v=W?p[x]:x;I.push(s[_][v])}h=I.join("").trim()===""}if(!h){for(var m=0;m<j;m++){0<m&&!S&&(R+=n);var J=L&&W?p[m]:m;R+=d(s[_][J],m)}_<s.length-1&&(!A||0<j&&!S)&&(R+=c)}}return R}function d(p,s){var A,R;return p==null?"":p.constructor===Date?JSON.stringify(p).slice(1,25):(R=!1,C&&typeof p=="string"&&C.test(p)&&(p="'"+p,R=!0),A=p.toString().replace(l,P),(R=R||r===!0||typeof r=="function"&&r(p,s)||Array.isArray(r)&&r[s]||((L,W)=>{for(var g=0;g<W.length;g++)if(-1<L.indexOf(W[g]))return!0;return!1})(A,o.BAD_DELIMITERS)||-1<A.indexOf(n)||A.charAt(0)===" "||A.charAt(A.length-1)===" ")?O+A+O:A)}},o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!Z&&!!k.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=re,o.ParserHandle=z,o.NetworkStreamer=w,o.FileStreamer=T,o.StringStreamer=y,o.ReadableStreamStreamer=U,k.jQuery&&((X=k.jQuery).fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(c){if(!(X(this).prop("tagName").toUpperCase()==="INPUT"&&X(this).attr("type").toLowerCase()==="file"&&k.FileReader)||!this.files||this.files.length===0)return!0;for(var O=0;O<this.files.length;O++)r.push({file:this.files[O],inputElem:this,instanceConfig:X.extend({},t)})}),i(),this;function i(){if(r.length===0)b(e.complete)&&e.complete();else{var c,O,P,B,f=r[0];if(b(e.before)){var C=e.before(f.file,f.inputElem);if(typeof C=="object"){if(C.action==="abort")return c="AbortError",O=f.file,P=f.inputElem,B=C.reason,void(b(e.error)&&e.error({name:c},O,P,B));if(C.action==="skip")return void n();typeof C.config=="object"&&(f.instanceConfig=X.extend(f.instanceConfig,C.config))}else if(C==="skip")return void n()}var l=f.instanceConfig.complete;f.instanceConfig.complete=function(F){b(l)&&l(F,f.file,f.inputElem),n()},o.parse(f.file,f.instanceConfig)}}function n(){r.splice(0,1),i()}}),ae&&(k.onmessage=function(e){e=e.data,o.WORKER_ID===void 0&&e&&(o.WORKER_ID=e.workerId),typeof e.input=="string"?k.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(k.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&k.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(w.prototype=Object.create(H.prototype)).constructor=w,(T.prototype=Object.create(H.prototype)).constructor=T,(y.prototype=Object.create(y.prototype)).constructor=y,(U.prototype=Object.create(H.prototype)).constructor=U,o})})(ge)),ge.exports}var Ke=Je();const Ie=Te(Ke);function et(){const me=ze(),[G,de]=be.useState([]),[k,X]=be.useState(""),[Z,ae]=be.useState(null),oe=w=>{const T=w.target.files?.[0];if(!T)return;X(T.name),ae("json");const y=new FileReader;y.onload=U=>{try{const z=JSON.parse(U.target?.result),q=z.products||z;if(!Array.isArray(q)){alert("Invalid JSON format. Expected an array of products.");return}const re=q.map(ne=>({...ne,sizes:Array.isArray(ne.sizes)?ne.sizes.map(ie=>`${ie.label}:${ie.price}`).join("|"):""}));de(re)}catch(z){console.error(z),alert("Error parsing JSON file.")}},y.readAsText(T)},_e=w=>{const T=w.target.files?.[0];T&&(X(T.name),ae("csv"),Ie.parse(T,{header:!0,dynamicTyping:!0,complete:y=>{const U=y.data.map(z=>{let q=[];return z.sizes&&typeof z.sizes=="string"&&(q=z.sizes.split("|").filter(Boolean).map(re=>{const[ne,ie]=re.split(":");return{label:ne?.trim(),price:Number(ie)||0}})),{...z,sizes:q,categoryOnly:z.categoryOnly==="true"||z.categoryOnly===!0,isNew:z.isNew==="true"||z.isNew===!0,sale:z.sale==="true"||z.sale===!0}});de(U)},error:y=>{console.error(y),alert("Error parsing CSV file.")}}))},o=()=>{if(G.length===0)return;const w=Ie.unparse(G),T=new Blob([w],{type:"text/csv;charset=utf-8;"}),y=document.createElement("a"),U=URL.createObjectURL(T);y.setAttribute("href",U),y.setAttribute("download",k.replace(".json",".csv")),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)},H=()=>{if(G.length===0)return;const w=JSON.stringify({products:G},null,2),T=new Blob([w],{type:"application/json"}),y=document.createElement("a"),U=URL.createObjectURL(T);y.setAttribute("href",U),y.setAttribute("download",k.replace(".csv",".json")),y.style.visibility="hidden",document.body.appendChild(y),y.click(),document.body.removeChild(y)};return a.jsxs(fe,{sx:{p:{xs:2,md:4},bgcolor:"background.default",minHeight:"100vh"},children:[a.jsxs(fe,{sx:{display:"flex",alignItems:"center",mb:4,gap:2},children:[a.jsx(De,{onClick:()=>me({to:"/admin"}),sx:{bgcolor:"background.paper"},children:a.jsx(Le,{})}),a.jsx(se,{variant:"h4",sx:{fontWeight:"bold"},children:"Catalog Converter"})]}),a.jsxs(pe,{container:!0,spacing:3,children:[a.jsx(pe,{size:{xs:12,md:6},children:a.jsx(Se,{sx:{height:"100%",borderRadius:4,border:"1px dashed",borderColor:"divider",bgcolor:"background.paper"},children:a.jsxs(we,{sx:{textAlign:"center",py:6},children:[a.jsx(We,{sx:{fontSize:48,mb:2,color:"primary.main"}}),a.jsx(se,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"JSON to CSV"}),a.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Upload `offline_catalog.json` to edit in Excel or Google Sheets."}),a.jsxs(ve,{variant:"contained",component:"label",startIcon:a.jsx(Re,{}),sx:{borderRadius:3,px:4,py:1.5,fontWeight:"bold"},children:["Upload JSON",a.jsx("input",{type:"file",hidden:!0,accept:".json",onChange:oe})]})]})})}),a.jsx(pe,{size:{xs:12,md:6},children:a.jsx(Se,{sx:{height:"100%",borderRadius:4,border:"1px dashed",borderColor:"divider",bgcolor:"background.paper"},children:a.jsxs(we,{sx:{textAlign:"center",py:6},children:[a.jsx(He,{sx:{fontSize:48,mb:2,color:"info.main"}}),a.jsx(se,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"CSV to JSON"}),a.jsx(se,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Convert your edited CSV back to JSON for the app."}),a.jsxs(ve,{variant:"contained",component:"label",color:"info",startIcon:a.jsx(Re,{}),sx:{borderRadius:3,px:4,py:1.5,fontWeight:"bold",color:"white"},children:["Upload CSV",a.jsx("input",{type:"file",hidden:!0,accept:".csv",onChange:_e})]})]})})}),G.length>0&&a.jsx(pe,{size:{xs:12},children:a.jsxs(Fe,{sx:{p:0,borderRadius:4,overflow:"hidden",boxShadow:3},children:[a.jsxs(fe,{sx:{p:2,bgcolor:"action.hover",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[a.jsxs(se,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Preview: ",k," (",G.length," items)"]}),a.jsxs(ve,{variant:"contained",color:Z==="json"?"success":"primary",startIcon:a.jsx(Be,{}),onClick:Z==="json"?o:H,sx:{borderRadius:2,fontWeight:"bold"},children:["Download ",Z==="json"?"CSV":"JSON"]})]}),a.jsx(Ne,{sx:{maxHeight:400},children:a.jsxs(Me,{stickyHeader:!0,size:"small",children:[a.jsx(Ue,{children:a.jsxs(Oe,{children:[a.jsx(Q,{sx:{fontWeight:"bold"},children:"ID"}),a.jsx(Q,{sx:{fontWeight:"bold"},children:"Name"}),a.jsx(Q,{sx:{fontWeight:"bold"},children:"Category"}),a.jsx(Q,{sx:{fontWeight:"bold"},children:"Price"}),a.jsx(Q,{sx:{fontWeight:"bold"},children:"Sizes (Serialized)"})]})}),a.jsx(Pe,{children:G.slice(0,10).map((w,T)=>a.jsxs(Oe,{children:[a.jsx(Q,{children:w.id}),a.jsx(Q,{sx:{fontWeight:500},children:w.name}),a.jsx(Q,{children:w.category}),a.jsxs(Q,{children:["â‚¹",w.price]}),a.jsx(Q,{sx:{color:"text.secondary",fontSize:"0.75rem"},children:Array.isArray(w.sizes)?w.sizes.map(y=>`${y.label}:${y.price}`).join("|"):w.sizes})]},T))})]})}),G.length>10&&a.jsx(fe,{sx:{p:1,textAlign:"center",bgcolor:"action.hover"},children:a.jsx(se,{variant:"caption",color:"text.secondary",children:"Showing first 10 items. Download to see all data."})})]})})]})]})}export{et as component};
