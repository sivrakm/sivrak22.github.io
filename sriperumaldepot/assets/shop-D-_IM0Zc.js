import{r as m,b as be,T as ye,c as je,g as ve,j as e,d as J,e as Se,f as B,a as ne,I as _,B as s,R as H,A as Ce,h,C as ie,i as ae,k as we,l as le}from"./index-hWqqEidX.js";import{A as ce,T as de,a as ke,M as Ie}from"./ArrowBackIosNew-CyWJsUe0.js";import{C as ze}from"./CheckCircle-CzapJOWk.js";import{S as Te}from"./Straighten-Bmf3mVz0.js";import{L as Re}from"./LocalShipping-CcBxapIc.js";import{u as $}from"./productStore-CKvLnhtR.js";import{u as Q}from"./cartStore-DU6kYG6s.js";import{u as xe}from"./pricingStore-CGBSpTbx.js";import{Q as We,p as Ee}from"./profile-DjnQjfZ6.js";import{A as Ae}from"./Add-DPs_5mhO.js";import{S as Pe}from"./Search-Dr6Tldl4.js";import{S as he}from"./ShoppingCart-CFWX_zRF.js";import{F as Fe}from"./FitnessCenter-BwZHc6gT.js";import{B as Me,E as Le}from"./EnergySavingsLeaf-DMs1PuYf.js";import{F as Oe}from"./FlashOn-C1DYkF0S.js";import{D as me}from"./DialogTitle-BUa6KLRt.js";import{A as ee}from"./Alert-BUREvrC4.js";import{B as Y}from"./Button-BfS2zT8f.js";import{d as Ve,o as pe,I as X,F as De,S as Be}from"./TextField-DwE7O7_A.js";import{Q as Ne}from"./QuantitySelector-BvALjoV0.js";import{O as $e}from"./OfflineDialog-O9dg1OoR.js";import{Q as te,Y as He}from"./index-DL9nLGov.js";import{H as Ye}from"./Header-DF9GXiMa.js";import{P as _e}from"./Page-DiHRrfG8.js";import{C as Qe}from"./Chip-DecVCN_f.js";import{D as G}from"./Divider-DXEa-dUJ.js";import{G as K}from"./Grid-D7RppRjU.js";import"./dividerClasses-M4d4isCD.js";import"./isMuiElement-lysYTGo2.js";import"./DialogContentText-D_m4JUkb.js";function Ue(o,i,r){const n=i.getBoundingClientRect(),a=r&&r.getBoundingClientRect(),b=pe(i);let u;if(i.fakeTransform)u=i.fakeTransform;else{const p=b.getComputedStyle(i);u=p.getPropertyValue("-webkit-transform")||p.getPropertyValue("transform")}let T=0,j=0;if(u&&u!=="none"&&typeof u=="string"){const p=u.split("(")[1].split(")")[0].split(",");T=parseInt(p[4],10),j=parseInt(p[5],10)}return o==="left"?a?`translateX(${a.right+T-n.left}px)`:`translateX(${b.innerWidth+T-n.left}px)`:o==="right"?a?`translateX(-${n.right-a.left-T}px)`:`translateX(-${n.left+n.width-T}px)`:o==="up"?a?`translateY(${a.bottom+j-n.top}px)`:`translateY(${b.innerHeight+j-n.top}px)`:a?`translateY(-${n.top-a.top+n.height-j}px)`:`translateY(-${n.top+n.height-j}px)`}function Xe(o){return typeof o=="function"?o():o}function U(o,i,r){const n=Xe(r),a=Ue(o,i,n);a&&(i.style.webkitTransform=a,i.style.transform=a)}const fe=m.forwardRef(function(i,r){const n=be(),a={enter:n.transitions.easing.easeOut,exit:n.transitions.easing.sharp},b={enter:n.transitions.duration.enteringScreen,exit:n.transitions.duration.leavingScreen},{addEndListener:u,appear:T=!0,children:j,container:p,direction:I="down",easing:M=a,in:R,onEnter:E,onEntered:C,onEntering:A,onExit:L,onExited:W,onExiting:N,style:v,timeout:P=b,TransitionComponent:z=ye,...w}=i,f=m.useRef(null),O=je(ve(j),f,r),D=c=>k=>{c&&(k===void 0?c(f.current):c(f.current,k))},t=D((c,k)=>{U(I,c,p),Se(c),E&&E(c,k)}),l=D((c,k)=>{const V=J({timeout:P,style:v,easing:M},{mode:"enter"});c.style.webkitTransition=n.transitions.create("-webkit-transform",{...V}),c.style.transition=n.transitions.create("transform",{...V}),c.style.webkitTransform="none",c.style.transform="none",A&&A(c,k)}),d=D(C),x=D(N),y=D(c=>{const k=J({timeout:P,style:v,easing:M},{mode:"exit"});c.style.webkitTransition=n.transitions.create("-webkit-transform",k),c.style.transition=n.transitions.create("transform",k),U(I,c,p),L&&L(c)}),F=D(c=>{c.style.webkitTransition="",c.style.transition="",W&&W(c)}),g=c=>{u&&u(f.current,c)},S=m.useCallback(()=>{f.current&&U(I,f.current,p)},[I,p]);return m.useEffect(()=>{if(R||I==="down"||I==="right")return;const c=Ve(()=>{f.current&&U(I,f.current,p)}),k=pe(f.current);return k.addEventListener("resize",c),()=>{c.clear(),k.removeEventListener("resize",c)}},[I,R,p]),m.useEffect(()=>{R||S()},[R,S]),e.jsx(z,{nodeRef:f,onEnter:t,onEntered:d,onEntering:l,onExit:y,onExited:F,onExiting:x,addEndListener:g,appear:T,in:R,timeout:P,...w,children:(c,{ownerState:k,...V})=>m.cloneElement(j,{ref:O,style:{visibility:c==="exited"&&!R?"hidden":void 0,...v,...j.props.style},...V})})}),Ge=B(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),Ze=B(e.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8M6 18l6-4.5 6 4.5z"})),qe=B(e.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"})),Ke=B(e.jsx("path",{d:"M3.27 3 2 4.27l5 5V13h3v9l3.58-6.14L17.73 20 19 18.73zM17 10h-4l4-8H7v2.18l8.46 8.46z"})),re=B(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),Je=B(e.jsx("path",{d:"M3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1m17-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 9h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1m-4 4h-4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1m4-8h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1"})),et=B(e.jsx("path",{d:"m3 2 2.01 18.23C5.13 21.23 5.97 22 7 22h10c1.03 0 1.87-.77 1.99-1.77L21 2zm9 17c-1.66 0-3-1.34-3-3 0-2 3-5.4 3-5.4s3 3.4 3 5.4c0 1.66-1.34 3-3 3m6.33-11H5.67l-.44-4h13.53z"})),tt=B(e.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),rt=B(e.jsx("path",{d:"M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8M7.83 14c.37 0 .67.26.74.62.41 2.22 2.28 2.98 3.64 2.87.43-.02.79.32.79.75 0 .4-.32.73-.72.75-2.13.13-4.62-1.09-5.19-4.12-.08-.45.28-.87.74-.87"})),ue=()=>{const i=Q(n=>n.items).length,r=ne();return e.jsxs(_,{sx:{bgcolor:"action.hover"},onClick:()=>r({to:"/checkout"}),children:[e.jsx(he,{}),i>0&&e.jsx(s,{sx:{position:"absolute",top:0,right:0,width:16,height:16,bgcolor:"red",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",color:"white",fontWeight:"bold",border:"2px solid",borderColor:"background.paper"},children:i})]})},ot=H.forwardRef(function(i,r){return e.jsx(fe,{direction:"up",ref:r,...i})}),st=({open:o,onClose:i,onScanSuccess:r})=>{const n=m.useRef(null),[a,b]=m.useState(null),[u,T]=m.useState(!0),[j,p]=m.useState(!1),[I,M]=m.useState(!0),[R,E]=m.useState(!1),[C,A]=m.useState(null),[L,W]=m.useState(1),[N,v]=m.useState(1),[P,z]=m.useState(!1),w=m.useCallback(()=>{E(!1),C&&C.stop(),n.current&&n.current.srcObject&&(n.current.srcObject.getTracks().forEach(l=>l.stop()),n.current.srcObject=null)},[C]),f=m.useCallback(async()=>{if(M(!0),b(null),!("BarcodeDetector"in window)){T(!1),M(!1);return}try{const t=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{min:1280,ideal:3840,max:4096},height:{min:720,ideal:2160,max:2160},frameRate:{ideal:30,max:60}}});if(n.current){n.current.srcObject=t;const l=t.getVideoTracks()[0];A(l),await n.current.play();try{const d=l.getCapabilities(),x={advanced:[]};d.zoom&&(z(!0),v(d.zoom.max),W(d.zoom.min||1)),d.focusMode?.includes("continuous")&&x.advanced.push({focusMode:"continuous"}),d.whiteBalanceMode?.includes("continuous")&&x.advanced.push({whiteBalanceMode:"continuous"}),d.exposureMode?.includes("continuous")&&x.advanced.push({exposureMode:"continuous"}),x.advanced.length>0&&await l.applyConstraints(x)}catch(d){console.warn("Advanced constraints not supported:",d)}M(!1),E(!0)}}catch(t){console.error("Error accessing camera:",t),b(t.name==="NotAllowedError"?"Camera permission denied":"Could not access camera"),M(!1)}},[]);m.useEffect(()=>{o?f():w()},[o,f,w]),m.useEffect(()=>{let t,l=0;const d=300,x="BarcodeDetector"in window?new window.BarcodeDetector({formats:["qr_code","ean_13","ean_8","code_128","code_39","upc_a","upc_e"]}):null,y=async F=>{if(!(!R||!n.current||!x)){if(F-l>d){l=F;try{if(n.current.readyState===n.current.HAVE_ENOUGH_DATA){const g=await x.detect(n.current);if(g.length>0){const S=g[0].rawValue;r(S),w();return}}}catch(g){console.error("Detection error:",g)}}t=requestAnimationFrame(y)}};return R&&(t=requestAnimationFrame(y)),()=>{t&&cancelAnimationFrame(t)}},[R,r,w]);const O=async()=>{if(C&&"applyConstraints"in C)try{await C.applyConstraints({advanced:[{torch:!j}]}),p(!j)}catch(t){console.error("Error toggling torch:",t)}},D=async t=>{if(C&&"applyConstraints"in C)try{await C.applyConstraints({advanced:[{zoom:t}]}),W(t)}catch(l){console.error("Error adjusting zoom:",l)}};return e.jsxs(me,{fullScreen:!0,open:o,onClose:i,TransitionComponent:ot,PaperProps:{sx:{bgcolor:"#000",color:"white",overflow:"hidden"}},children:[e.jsx(ce,{sx:{position:"relative",bgcolor:"transparent",boxShadow:"none"},children:e.jsxs(de,{children:[e.jsx(_,{edge:"start",color:"inherit",onClick:i,"aria-label":"close",children:e.jsx(Ce,{})}),e.jsx(h,{sx:{ml:2,flex:1,fontWeight:700},variant:"h6",children:"Scan Barcode"}),C&&e.jsx(_,{color:"inherit",onClick:O,children:j?e.jsx(Oe,{sx:{color:"primary.main"}}):e.jsx(Ke,{})})]})}),e.jsxs(s,{sx:{flex:1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#000"},children:[I&&e.jsx(s,{sx:{position:"absolute",zIndex:2,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(ie,{color:"primary"})}),a&&e.jsxs(s,{sx:{p:4,textAlign:"center",zIndex:2},children:[e.jsx(ee,{severity:"error",sx:{mb:2},children:a}),e.jsx(Y,{variant:"contained",onClick:f,children:"Retry"})]}),!u&&e.jsxs(s,{sx:{p:4,textAlign:"center",zIndex:2},children:[e.jsx(ee,{severity:"warning",sx:{mb:2},children:"Native barcode scanning is not supported in this browser. Please use Chrome or Edge."}),e.jsx(Y,{variant:"outlined",color:"inherit",onClick:i,children:"Close"})]}),e.jsxs(s,{sx:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("video",{ref:n,style:{width:"100%",height:"100%",objectFit:"cover"},playsInline:!0,muted:!0}),e.jsx(s,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:e.jsx(s,{sx:{width:"280px",height:"280px",border:"2px solid rgba(255, 255, 255, 0.5)",borderRadius:"24px",position:"relative","&::before, &::after":{content:'""',position:"absolute",width:"40px",height:"40px",borderColor:"primary.main",borderStyle:"solid"},"&::before":{top:-2,left:-2,borderTopWidth:4,borderLeftWidth:4,borderBottomWidth:0,borderRightWidth:0,borderTopLeftRadius:"24px"},"&::after":{bottom:-2,right:-2,borderBottomWidth:4,borderRightWidth:4,borderTopWidth:0,borderLeftWidth:0,borderBottomRightRadius:"24px"}},children:e.jsx(s,{sx:{position:"absolute",top:0,left:"10%",width:"80%",height:"2px",bgcolor:"primary.main",boxShadow:"0 0 15px #2196f3",willChange:"transform",animation:"scan 2.5s ease-in-out infinite","@keyframes scan":{"0%":{transform:"translateY(28px)",opacity:0},"50%":{transform:"translateY(140px)",opacity:1},"100%":{transform:"translateY(252px)",opacity:0}}}})})}),e.jsxs(s,{sx:{position:"absolute",bottom:40,display:"flex",gap:2,zIndex:3},children:[P&&e.jsx(Y,{variant:"contained",sx:{borderRadius:"20px",bgcolor:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:()=>D(L===1?Math.min(2,N):1),children:L===1?"2x Zoom":"1x Zoom"}),e.jsx(Y,{variant:"contained",sx:{borderRadius:"20px",bgcolor:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:O,children:j?"Flash Off":"Flash On"})]})]})]})]})},nt=(o,i)=>{if(o===void 0||i===void 0)return"";const r=Math.floor(o-i),n=Math.floor(Math.random()*9+1),a=`${n}${n}1`,b=Math.floor(Math.random()*90+10);return`${a}${r}${b}`},it={shopping_cart:e.jsx(he,{}),search:e.jsx(Pe,{}),tune:e.jsx(tt,{}),favorite:e.jsx(qe,{}),nutrition:e.jsx(Le,{}),bolt:e.jsx(Me,{}),checkroom:e.jsx(Ze,{}),water_drop:e.jsx(rt,{}),local_drink:e.jsx(et,{}),fitness_center:e.jsx(Fe,{})},at=H.forwardRef(function(i,r){return e.jsx(fe,{direction:"up",ref:r,...i})}),Z=({name:o,filled:i=!1,className:r=""})=>e.jsx(e.Fragment,{children:it[o]}),oe=H.forwardRef(({style:o,children:i,...r},n)=>e.jsx(K,{container:!0,spacing:2,...r,ref:n,style:{...o,display:"flex",flexWrap:"wrap",width:"100%",margin:0},children:i})),lt=({children:o,...i})=>e.jsx(K,{item:!0,size:{xs:6,sm:6,md:3,lg:2,xl:2},...i,sx:{display:"flex",flexDirection:"column",p:1},children:o}),ct=({children:o,...i})=>e.jsx(K,{item:!0,size:{xs:6,sm:6,md:6,lg:4,xl:4},...i,sx:{display:"flex",flexDirection:"column",p:1},children:o});function $t(){const o=$(t=>t.activeCategory),i=$(t=>t.setActiveCategory),r=$(t=>t.categories),n=$(t=>t.categoryItems),a=$(t=>t.products),b=$(t=>t.fetchProducts),u=xe(t=>t.fetchRules),T=$(t=>t.isLoading),j=ne(),[p,I]=m.useState(!1);m.useEffect(()=>{navigator.onLine||I(!0)},[]),m.useEffect(()=>{b(),u()},[b]);const[M,R]=m.useState(null),[E,C]=m.useState(""),[A,L]=m.useState(!1),[W,N]=m.useState(!1),[v,P]=m.useState(""),z=(t,l,d=!0)=>{if(!l)return 0;const x=t.toLowerCase(),y=l.toLowerCase();if(x===y)return 100;if(x.startsWith(y))return 80;if(x.includes(y))return 60;if(!d)return 0;let F=0;const g=y.split("");let S=-1;for(const k of g){const V=x.indexOf(k,S+1);V>-1&&(F++,S=V)}const c=F/y.length*40;return c>20?c:0},w=E?a.filter(t=>v?t.category.toLowerCase().includes(v.toLowerCase()):!0).map(t=>{const l=E.trim().toLowerCase().split(/\s+/),d=n.find(y=>y.name===t.category);let x=0;for(const y of l){const F=z(t.name,y,!1)*10,g=t.sku?z(t.sku,y,!0)*8:0,S=d?.sku?z(d.sku,y,!0)*5:0,c=z(t.detail,y,!0),k=z(t.category,y,!1),V=t.id?z(String(t.id),y,!0):0,ge=Math.max(F,g,S,c,k,V);x+=ge}return{...t,searchScore:x}}).filter(t=>t.searchScore>0).sort((t,l)=>(l.searchScore||0)-(t.searchScore||0)):a,f=t=>{i(t),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)},O=t=>{R(t),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)},D=()=>{R(null),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)};return e.jsxs(s,{sx:{pb:10,bgcolor:"background.default",minHeight:"100vh",color:"text.primary"},children:[e.jsxs(s,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:"background.default",borderBottom:1,borderColor:"divider"},children:[e.jsx(Ye,{title:"Shop Online",icon:e.jsxs(s,{sx:{position:"relative"},children:[e.jsx(ae,{src:Ee,sx:{width:40,height:40,border:"2px solid",borderColor:"primary.main"},onClick:()=>j({to:"/admin"})}),e.jsx(s,{sx:{position:"absolute",bottom:0,right:0,width:12,height:12,bgcolor:"primary.main",borderRadius:"50%",border:"2px solid",borderColor:"background.paper"}})]}),rightContent:e.jsxs(e.Fragment,{children:[e.jsx(We,{sx:{cursor:"pointer",pr:2,color:"text.secondary"},onClick:()=>L(!0)}),e.jsx(Je,{sx:{cursor:"pointer",pr:2,color:"text.secondary"},onClick:()=>j({to:"/history"})}),e.jsx(ue,{})]})}),e.jsxs(s,{sx:{px:2,pt:0,pb:1.5},children:[e.jsxs(s,{sx:{position:"relative"},children:[e.jsx(s,{sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",display:"flex",zIndex:100},children:e.jsx(Z,{name:"search"})}),e.jsx(X,{placeholder:"Search supplements, gear...",value:E,onChange:t=>C(t.target.value),onKeyDown:t=>{t.key==="Escape"&&(C(""),t.target.blur())},sx:{width:"100%",bgcolor:"background.paper",borderRadius:4,py:1.5,pl:6,pr:6,border:1,borderColor:"divider","&.Mui-focused":{borderColor:"primary.main",boxShadow:"0 0 0 2px rgba(242, 215, 13, 0.2)"}}}),e.jsx(_,{onClick:()=>N(!W),sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",bgcolor:W||v?"primary.main":"action.hover",color:W||v?"common.black":"inherit",p:.5,borderRadius:2,"&:hover":{bgcolor:W||v?"primary.dark":"action.selected"}},children:e.jsx(Z,{name:"tune"})})]}),e.jsx(we,{in:W,children:e.jsx(s,{sx:{pt:1},children:e.jsx(X,{placeholder:"Filter categories...",value:v,onChange:t=>P(t.target.value),sx:{width:"100%",bgcolor:"background.paper",borderRadius:3,py:1,px:2,border:1,borderColor:"divider",fontSize:"0.9rem"}})})})]})]}),e.jsx(_e,{children:T?e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:e.jsx(ie,{})}):e.jsxs(e.Fragment,{children:[!E&&e.jsx(s,{sx:{display:"flex",gap:1.5,overflowX:"auto",pb:2,"&::-webkit-scrollbar":{display:"none"}},children:(()=>{const t=r.filter(x=>x!=="All Items");return(a.some(x=>!x.categoryOnly&&(!x.category||!t.includes(x.category)))?[...r,"Un-grouped"]:r).map(x=>e.jsx(Qe,{label:x,onClick:()=>f(x),sx:{fontWeight:"bold",borderRadius:50,height:40,px:1,bgcolor:"background.paper",color:o===x?"primary.main":"text.secondary",border:1,borderColor:o===x?"primary.main":"divider","&:hover":{bgcolor:o===x?"primary.dark":"action.hover"}}},x))})()}),e.jsx(s,{sx:{px:0,pb:10},children:E?e.jsxs(s,{children:[e.jsxs(h,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:["Search Results (",w.length,")"]}),w.length>0?e.jsx(s,{sx:{width:"100%"},children:e.jsx(te,{useWindowScroll:!0,increaseViewportBy:300,data:w,totalCount:w.length,components:{List:oe,Item:lt},itemContent:(t,l)=>e.jsx(q,{product:l,onClick:()=>O(l),setActiveCategory:f})})}):e.jsx(s,{sx:{textAlign:"center",py:8,opacity:.6},children:e.jsxs(h,{variant:"body1",children:['No products found matching "',E,'"']})})]}):e.jsx(e.Fragment,{children:o==="All Items"?e.jsx(s,{sx:{width:"100%"},children:(()=>{const t=r.filter(g=>g!=="All Items"),l=a.filter(g=>!g.categoryOnly&&(!g.category||!t.includes(g.category))),d=r.filter(g=>g!=="All Items").filter(g=>!v||g.toLowerCase().includes(v.toLowerCase())),x=[],y=[];d.forEach(g=>{a.filter(c=>c.category===g).length>0?x.push(g):y.push(g)});const F=[...x];return l.length>0&&(!v||"un-grouped".includes(v.toLowerCase()))&&F.push({type:"un-grouped",count:l.length}),y.length>0&&(F.push({type:"header",label:"Empty Categories"}),F.push(...y)),e.jsx(He,{useWindowScroll:!0,increaseViewportBy:300,data:F,itemContent:(g,S)=>{if(typeof S=="string"){const c=n.find(V=>V.name===S);if(!c)return null;const k=a.filter(V=>V.category===S).length;return e.jsx(s,{sx:{mb:4},children:e.jsx(se,{title:S,count:k,products:[c],onProductClick:()=>f(S),onViewAll:()=>f(S),setActiveCategory:f})})}else{if(S.type==="un-grouped")return e.jsx(s,{sx:{mb:4},children:e.jsx(se,{title:"Un-grouped",count:S.count,products:[{id:"ungrouped-dummy",name:"Un-grouped Items",detail:"Items not yet categorized",icon:"shopping_cart",sale:!1,isNew:!1,category:"Un-grouped",imageColor:"#f5f5f5",categoryOnly:!0}],onProductClick:()=>f("Un-grouped"),onViewAll:()=>f("Un-grouped"),setActiveCategory:f})});if(S.type==="header")return e.jsxs(s,{sx:{display:"flex",alignItems:"center",my:3},children:[e.jsx(G,{sx:{flex:1}}),e.jsx(h,{variant:"caption",sx:{px:2,fontWeight:"bold",color:"text.secondary",textTransform:"uppercase"},children:S.label}),e.jsx(G,{sx:{flex:1}})]})}return null}})})()}):e.jsx(s,{sx:{width:"100%",px:0},children:(()=>{const t=r.filter(d=>d!=="All Items");let l=a;return o==="Un-grouped"?l=a.filter(d=>!d.categoryOnly&&(!d.category||!t.includes(d.category))):l=a.filter(d=>d.category===o&&!d.categoryOnly),e.jsx(te,{useWindowScroll:!0,increaseViewportBy:300,data:l,totalCount:l.length,components:{List:oe,Item:ct},itemContent:(d,x)=>e.jsx(q,{product:x,onClick:()=>O(x),setActiveCategory:f})})})()})})})]})}),e.jsx(xt,{open:M!==null,handleClose:D,product:M}),e.jsx(st,{open:A,onClose:()=>L(!1),onScanSuccess:t=>{L(!1),C(t),window.scrollTo({top:0,behavior:"smooth"})}}),e.jsx($e,{open:p,onContinue:()=>I(!1),onNavigateAway:()=>j({to:"/shop"})})]})}const dt=({onClick:o})=>e.jsxs(le,{onClick:o,sx:{minWidth:120,height:"100%",borderRadius:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"action.hover",border:1,borderColor:"divider",cursor:"pointer","&:hover":{borderColor:"primary.main",bgcolor:"action.selected",transform:"scale(1.02)",transition:"all 0.2s"}},children:[e.jsx(ae,{sx:{bgcolor:"primary.main",mb:1.5,width:48,height:48},children:e.jsx(Ge,{sx:{color:"black",fontSize:20,ml:.5}})}),e.jsx(h,{variant:"subtitle2",sx:{fontWeight:800,color:"text.primary"},children:"View All"})]}),se=({title:o,count:i,products:r,onProductClick:n,onViewAll:a,setActiveCategory:b})=>e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:0,mb:1.5},children:[e.jsxs(h,{variant:"h6",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,fontSize:"0.9rem"},children:[o," ",e.jsxs(h,{component:"span",sx:{color:"text.secondary",fontWeight:600},children:["(",i,")"]})]}),e.jsx(Y,{size:"small",onClick:a,sx:{fontWeight:700,textTransform:"none",color:"primary.main",minWidth:0,p:0,"&:hover":{bgcolor:"transparent",textDecoration:"underline"}},children:"View all"})]}),e.jsxs(s,{sx:{display:"flex",gap:2,overflowX:"auto",px:2,pb:1,"&::-webkit-scrollbar":{display:"none"},scrollSnapType:"x mandatory","& > *":{scrollSnapAlign:"start"}},children:[r.filter(u=>u.categoryOnly).slice(0,1).map(u=>e.jsx(s,{sx:{minWidth:200,maxWidth:200},children:e.jsx(q,{product:u,onClick:n,setActiveCategory:b})},u.id)),e.jsx(s,{sx:{minWidth:120,py:.5},children:e.jsx(dt,{onClick:a})})]})]}),xt=({open:o,handleClose:i,product:r})=>{const[n,a]=m.useState(1),[b,u]=m.useState(""),[T,j]=m.useState(""),[p,I]=m.useState(null),M=Q(t=>t.addToCart),R=Q(t=>t.items),E=Q(t=>t.updateQuantity),{rules:C}=xe(),A=R.find(t=>t.id===r?.id&&t.selectedSize?.label===p?.label);H.useEffect(()=>{o&&r&&(A?a(A.quantity):(a(1),u(""),j("")))},[o,r?.id,p?.label]),H.useEffect(()=>{if(r?.isComplexVariant&&b&&T){const t=Number(b)*Number(T);a(Math.round(t*100)/100)}},[b,T,r?.isComplexVariant]),H.useEffect(()=>{o&&r?r.sizes&&r.sizes.length>0?I(r.sizes[0]):I(null):o||I(null)},[o,r?.id]);const L=p?p.price:r?.price,W=p?p.purchasePrice:r?.purchasePrice,N=H.useMemo(()=>!o||L===void 0||W===void 0?"":nt(L,W),[o,L,W]);if(!r)return null;const v=p?p.price:r.price??0,P=p&&p.price!==void 0||r.price!==void 0;let z=0;if(r.taxRuleId){const t=C.find(l=>l.id===r.taxRuleId);t&&(t.valueType==="percentage"?z=v*(t.value/100):z=t.value)}let w=0;r.addonRuleIds&&r.addonRuleIds.length>0&&r.addonRuleIds.forEach(t=>{const l=C.find(d=>d.id===t);l&&(l.valueType==="percentage"?w+=v*(l.value/100):w+=l.value)});const f=v,O=f+z+w,D=()=>{let t=p;r.isComplexVariant&&(t={label:`${b} x ${T} ${r.unitName||"units"}`,price:v}),A?(r.isComplexVariant?R.find(d=>d.id===r.id&&d.selectedSize?.label===t.label):A)?E(r.id,n,t?.label):M({id:r.id,sku:r.sku,name:r.name,buyPrice:f,taxAmount:z,addonAmount:w,totalPrice:O,src:r.src,quantity:n,selectedSize:t,category:r.category,isComplexVariant:r.isComplexVariant,unitName:r.unitName}):M({id:r.id,sku:r.sku,name:r.name,buyPrice:f,taxAmount:z,addonAmount:w,totalPrice:O,src:r.src,quantity:n,selectedSize:t,category:r.category,isComplexVariant:r.isComplexVariant,unitName:r.unitName}),i()};return e.jsx(me,{fullScreen:!0,open:o,onClose:i,TransitionComponent:at,PaperProps:{sx:{bgcolor:"background.default",color:"text.primary"}},children:e.jsxs(s,{sx:{position:"relative",display:"flex",flexDirection:"column",height:"100%",maxWidth:"sm",mx:"auto",width:"100%",bgcolor:"background.paper",boxShadow:t=>t.shadows[10]},children:[e.jsx(ce,{sx:{position:"sticky",bgcolor:"background.paper",color:"text.primary",boxShadow:"none",borderBottom:1,borderColor:"divider"},children:e.jsxs(de,{sx:{justifyContent:"space-between",minHeight:56},children:[e.jsx(_,{edge:"start",onClick:i,"aria-label":"close",size:"small",children:e.jsx(ke,{fontSize:"small"})}),e.jsx(h,{sx:{fontWeight:800,fontSize:"1.1rem",letterSpacing:-.5},variant:"h6",children:"Product Details"}),e.jsx(s,{sx:{position:"relative",display:"flex"},children:e.jsx(ue,{})})]})}),e.jsxs(s,{sx:{flex:1,overflowY:"auto",pb:13},children:[e.jsxs(s,{sx:{width:"100%",aspectRatio:"16/9",bgcolor:"#121212",borderRadius:"0 0 20px 20px",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 -10px 20px rgba(0,0,0,0.2)"},children:[r.src&&e.jsx(s,{component:"img",src:r.src,alt:r.name,sx:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}),e.jsx(s,{sx:{position:"absolute",bottom:12,right:12,bgcolor:"rgba(0,0,0,0.6)",color:"white",px:1.2,py:.4,borderRadius:10,fontSize:11,fontWeight:"bold",backdropFilter:"blur(8px)",zIndex:1},children:"1 / 3"})]}),e.jsxs(s,{sx:{px:2.5,pt:2.5},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:.5},children:[e.jsxs(s,{sx:{flex:1,pr:2},children:[e.jsx(h,{variant:"h6",sx:{fontWeight:800,lineHeight:1.2,mb:.5},children:r.name}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5,color:"success.main"},children:[e.jsx(ze,{sx:{fontSize:14}}),e.jsx(h,{variant:"caption",sx:{fontWeight:600},children:"In Stock • Ready to sell"})]}),N&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5,color:"grey.600",mt:.5},children:[e.jsx(re,{sx:{fontSize:14}}),e.jsxs(h,{variant:"caption",sx:{fontWeight:600},children:["PID: ",N]})]}),r.sku&&e.jsxs(h,{variant:"caption",sx:{fontWeight:800,color:"text.disabled",letterSpacing:1,mt:.5,display:"block"},children:["SKU: ",r.sku]})]}),e.jsxs(s,{sx:{textAlign:"right"},children:[e.jsx(h,{variant:"h6",color:"primary.main",sx:{fontWeight:800,lineHeight:1},children:P?`₹${O?.toFixed(2)}`:"Price on Request"}),(z>0||w>0)&&e.jsxs(e.Fragment,{children:[e.jsxs(h,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5,fontSize:"0.7rem"},children:["(Base: ₹",f.toFixed(2),")"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.2,fontSize:"0.7rem"},children:["(Tax: ₹",z.toFixed(2),")"]}),e.jsxs(h,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.2,fontSize:"0.7rem"},children:["(Addon: ₹",w.toFixed(2),")"]})]})]})]}),e.jsx(G,{sx:{my:2,opacity:.6}}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(h,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:1,color:"text.secondary"},children:"Size Selection"}),e.jsx(Y,{variant:"text",size:"small",startIcon:e.jsx(Te,{sx:{fontSize:"14px !important"}}),sx:{textTransform:"none",color:"text.secondary",fontSize:"0.75rem",fontWeight:600,minWidth:0,p:0},children:"Size Guide"})]}),r.sizes&&r.sizes.length>0?e.jsx(De,{fullWidth:!0,size:"small",children:e.jsx(Be,{value:p?p.label:"",onChange:t=>{const l=r.sizes.find(d=>d.label===t.target.value);I(l)},sx:{borderRadius:2,fontWeight:700,fontSize:"0.85rem",bgcolor:"background.paper","& .MuiSelect-select":{py:1}},children:r.sizes.map(t=>e.jsxs(Ie,{value:t.label,children:[t.label," - ₹",t.price.toFixed(2)]},t.label))})}):e.jsx(h,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",bgcolor:"action.hover",p:1,borderRadius:2,textAlign:"center"},children:"SIngle Variant"})]}),e.jsxs(s,{sx:{bgcolor:"action.hover",borderRadius:3,p:2,display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[e.jsx(s,{sx:{flex:1,mr:2},children:r.isComplexVariant?e.jsxs(s,{sx:{width:"100%"},children:[e.jsxs(h,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:1},children:["Measurements (",r.unitName,")"]}),e.jsxs(s,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(X,{type:"number",placeholder:"X",value:b,onChange:t=>u(Number(t.target.value)),sx:{bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:2,px:2,py:1,width:"100%",fontWeight:"bold"}}),e.jsx(h,{sx:{color:"text.secondary",fontWeight:"bold"},children:"x"}),e.jsx(X,{type:"number",placeholder:"Y",value:T,onChange:t=>j(Number(t.target.value)),sx:{bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:2,px:2,py:1,width:"100%",fontWeight:"bold"}})]}),e.jsxs(h,{variant:"body2",sx:{mt:1,fontWeight:"bold",color:"primary.main",textAlign:"right"},children:["Total: ",n," ",r.unitName,"²"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(h,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:.5},children:"Quantity"}),e.jsx(Ne,{quantity:n,onQuantityChange:a})]})}),e.jsxs(s,{sx:{textAlign:"right",marginTop:"auto",marginBottom:"auto"},children:[e.jsx(h,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:.5},children:"Total Value"}),e.jsxs(h,{sx:{fontWeight:900,color:"text.primary",fontSize:"1.1rem"},children:["₹",(O*n).toFixed(2)]})]})]}),e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(h,{variant:"subtitle1",sx:{fontWeight:800},children:"Description"}),e.jsx(re,{sx:{fontSize:16,color:"text.disabled"}})]}),e.jsx(h,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.6,fontSize:"0.875rem"},children:r.detail}),e.jsxs(s,{sx:{mt:2.5,p:1.5,borderRadius:3,display:"flex",gap:1.5,bgcolor:"primary.light",background:"linear-gradient(135deg, rgba(242, 215, 13, 0.1) 0%, rgba(242, 215, 13, 0.05) 100%)",border:"1px solid rgba(242, 215, 13, 0.2)",alignItems:"center"},children:[e.jsx(s,{sx:{width:36,height:36,borderRadius:"10px",bgcolor:"primary.main",display:"flex",alignItems:"center",justifyContent:"center",color:"common.black",flexShrink:0},children:e.jsx(Re,{sx:{fontSize:18}})}),e.jsxs(s,{children:[e.jsx(h,{sx:{fontWeight:800,fontSize:"0.8rem",color:"text.primary"},children:"Free Desk Delivery"}),e.jsx(h,{sx:{fontSize:"0.7rem",color:"text.secondary",fontWeight:500},children:"Collection available within 2 hours at front desk"})]})]})]})]})]})]}),e.jsx(s,{sx:{position:"fixed",bottom:0,left:0,right:0,p:2,bgcolor:"background.paper",borderTop:1,borderColor:"divider",maxWidth:"sm",mx:"auto",zIndex:10},children:e.jsx(Y,{fullWidth:!0,variant:"contained",size:"large",onClick:D,disabled:!P,sx:{py:2,borderRadius:4,fontWeight:800,textTransform:"none",fontSize:"1.1rem",bgcolor:P?A?"success.main":"primary.main":"action.disabled",color:P?A?"white":"black":"text.disabled",boxShadow:P?"0 8px 20px -4px rgba(242, 215, 13, 0.4)":"none","&:hover":{bgcolor:A?"success.dark":"primary.dark"}},children:P?`Add to Cart • ₹${(O*n).toFixed(2)}`:"Contact for Pricing"})})]})})},q=({product:o,onClick:i,setActiveCategory:r})=>{const a=Q(u=>u.items).some(u=>u.id===o.id),b=u=>{u.stopPropagation(),i(o)};return e.jsx(le,{onClick:()=>{o.categoryOnly?r(o.category):i(o)},sx:{cursor:"pointer",borderRadius:4,height:"100%",display:"flex",flexDirection:"column",bgcolor:"background.paper",border:1,borderColor:a?"primary.main":"divider",boxShadow:a?"0 0 15px rgba(242, 215, 13, 0.2)":"0 2px 6px -1px rgba(0, 0, 0, 0.05)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderColor:"primary.main",transform:"translateY(-4px)",boxShadow:"0 12px 20px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05)"}},children:e.jsxs(s,{sx:{p:1,flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs(s,{sx:{aspectRatio:"1/1",bgcolor:"action.hover",borderRadius:3,mb:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[o.src?e.jsx("img",{loading:"lazy",src:o.src,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px"}}):e.jsx(s,{sx:{color:"text.disabled",opacity:.2},children:e.jsx(Z,{name:o.icon,className:"!text-5xl"})}),e.jsxs(s,{sx:{position:"absolute",top:6,left:6,display:"flex",flexDirection:"column",gap:.5},children:[o.sale&&e.jsx(s,{sx:{bgcolor:"secondary.main",color:"white",fontSize:"0.6rem",fontWeight:900,px:.75,py:.25,borderRadius:1.5,textTransform:"uppercase",letterSpacing:.5},children:"Sale"}),o.isNew&&e.jsx(s,{sx:{bgcolor:"info.main",color:"black",fontSize:"0.6rem",fontWeight:900,px:.75,py:.25,borderRadius:1.5,textTransform:"uppercase",letterSpacing:.5},children:"New"})]}),!o.categoryOnly&&e.jsx(s,{sx:{position:"absolute",bottom:6,left:6,bgcolor:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",px:1,py:.5,borderRadius:2,color:"white"},children:e.jsx(h,{sx:{fontSize:"0.75rem",fontWeight:900},children:o.sizes&&o.sizes.length>0?`${o.sizes.length} Variants`:o?.price!==void 0?`₹${o.price.toFixed(0)}`:"Contact for Price"})}),!o.categoryOnly&&e.jsx(_,{onClick:b,size:"small",sx:{position:"absolute",bottom:6,right:6,bgcolor:a?"primary.main":"rgba(255,255,255,0.9)",color:a?"black":"text.primary",width:32,height:32,borderRadius:2,transition:"all 0.2s","&:hover":{bgcolor:"primary.main",color:"black",transform:"scale(1.1)"}},children:e.jsx(Ae,{sx:{fontSize:20}})})]}),e.jsxs(s,{sx:{px:.5,pb:.5},children:[e.jsx(h,{variant:"caption",sx:{fontWeight:900,lineHeight:1.1,fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",color:"text.primary",mb:o.categoryOnly?.5:0},children:o.name}),o.categoryOnly&&e.jsxs(e.Fragment,{children:[o.detail&&e.jsx(h,{variant:"caption",sx:{display:"block",fontSize:"0.65rem",color:"text.secondary",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.detail.length>40?`${o.detail.substring(0,40)}...`:o.detail}),o.sku&&e.jsxs(h,{variant:"caption",sx:{display:"block",fontSize:"0.6rem",fontWeight:700,color:"text.disabled",mt:.25,letterSpacing:.5},children:["SKU: ",o.sku]})]})]})]})})};export{$t as component};
