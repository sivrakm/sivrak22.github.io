import{r as u,J as H,H as q,K as Q,a1 as D,N as F,M,l as Io,j as e,P as Y,a5 as So,Q as L,a6 as Co,O as $,U as jo,a7 as Mo,f as no,a as No,i as Do,B as P,I as eo,A as Lo,h as k,C as Ro,z as Vo,o as Eo,q as go,F as Fo,G as Go,S as I,E as Uo,v as Ho,w as qo,x as Qo}from"./index-Cp2I37WV.js";import{Y as Yo}from"./index-AUmU2T_b.js";import{S as xo}from"./Search-BDBvXvmT.js";import{u as _o,I as Ko,T as so}from"./TextField-DFh5Z3SN.js";import{T as Zo,a as ro}from"./Tabs-5ehGGnYo.js";import{C as zo}from"./CheckCircle-Cn5NRRkC.js";import{R as Po}from"./RemoveCircleOutline-DoIqOqaB.js";import{C as lo}from"./Chip-C_nwfqmD.js";import{B as G}from"./Button-BhddC0uT.js";import{P as Jo}from"./Page-C5G7tS54.js";import{D as Xo,a as oe,b as ee}from"./DialogTitle-C1XPoAzT.js";import{D as uo}from"./Divider-BmF7nJuL.js";import{D as re}from"./DialogActions-B-je9ZVc.js";import{I as te}from"./Inventory-5YIbzpIR.js";import{S as se}from"./Save-Bb6eZ_Hi.js";import"./isMuiElement-C4u7QS8z.js";import"./dividerClasses-DniQLY7G.js";const ko=u.createContext({});function ne(o){return q("MuiAccordion",o)}const to=H("MuiAccordion",["root","heading","rounded","expanded","disabled","gutters","region"]),ie=o=>{const{classes:r,square:s,expanded:d,disabled:c,disableGutters:x}=o;return Y({root:["root",!s&&"rounded",d&&"expanded",c&&"disabled",!x&&"gutters"],heading:["heading"],region:["region"]},ne,r)},ae=M(So,{name:"MuiAccordion",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:s}=o;return[{[`& .${to.region}`]:r.region},r.root,!s.square&&r.rounded,!s.disableGutters&&r.gutters]}})(L(({theme:o})=>{const r={duration:o.transitions.duration.shortest};return{position:"relative",transition:o.transitions.create(["margin"],r),overflowAnchor:"none","&::before":{position:"absolute",left:0,top:-1,right:0,height:1,content:'""',opacity:1,backgroundColor:(o.vars||o).palette.divider,transition:o.transitions.create(["opacity","background-color"],r)},"&:first-of-type":{"&::before":{display:"none"}},[`&.${to.expanded}`]:{"&::before":{opacity:0},"&:first-of-type":{marginTop:0},"&:last-of-type":{marginBottom:0},"& + &":{"&::before":{display:"none"}}},[`&.${to.disabled}`]:{backgroundColor:(o.vars||o).palette.action.disabledBackground}}}),L(({theme:o})=>({variants:[{props:r=>!r.square,style:{borderRadius:0,"&:first-of-type":{borderTopLeftRadius:(o.vars||o).shape.borderRadius,borderTopRightRadius:(o.vars||o).shape.borderRadius},"&:last-of-type":{borderBottomLeftRadius:(o.vars||o).shape.borderRadius,borderBottomRightRadius:(o.vars||o).shape.borderRadius,"@supports (-ms-ime-align: auto)":{borderBottomLeftRadius:0,borderBottomRightRadius:0}}}},{props:r=>!r.disableGutters,style:{[`&.${to.expanded}`]:{margin:"16px 0"}}}]}))),le=M("h3",{name:"MuiAccordion",slot:"Heading"})({all:"unset"}),ce=M("div",{name:"MuiAccordion",slot:"Region"})({}),de=u.forwardRef(function(r,s){const d=Q({props:r,name:"MuiAccordion"}),{children:c,className:x,defaultExpanded:f=!1,disabled:i=!1,disableGutters:l=!1,expanded:g,onChange:h,square:S=!1,slots:y={},slotProps:p={},TransitionComponent:b,TransitionProps:z,...C}=d,[v,T]=_o({controlled:g,default:f,name:"Accordion",state:"expanded"}),w=u.useCallback(ao=>{T(!v),h&&h(ao,!v)},[v,h,T]),[O,...A]=u.Children.toArray(c),a=u.useMemo(()=>({expanded:v,disabled:i,disableGutters:l,toggle:w}),[v,i,l,w]),n={...d,square:S,disabled:i,disableGutters:l,expanded:v},t=ie(n),m={transition:b,...y},j={transition:z,...p},B={slots:m,slotProps:j},[W,N]=D("root",{elementType:ae,externalForwardedProps:{...B,...C},className:F(t.root,x),shouldForwardComponentProp:!0,ownerState:n,ref:s,additionalProps:{square:S}}),[Z,io]=D("heading",{elementType:le,externalForwardedProps:B,className:t.heading,ownerState:n}),[J,_]=D("transition",{elementType:Io,externalForwardedProps:B,ownerState:n}),[X,oo]=D("region",{elementType:ce,externalForwardedProps:B,ownerState:n,className:t.region,additionalProps:{"aria-labelledby":O.props.id,id:O.props["aria-controls"],role:"region"}});return e.jsxs(W,{...N,children:[e.jsx(Z,{...io,children:e.jsx(ko.Provider,{value:a,children:O})}),e.jsx(J,{in:v,timeout:"auto",..._,children:e.jsx(X,{...oo,children:A})})]})});function pe(o){return q("MuiAccordionDetails",o)}H("MuiAccordionDetails",["root"]);const ue=o=>{const{classes:r}=o;return Y({root:["root"]},pe,r)},ge=M("div",{name:"MuiAccordionDetails",slot:"Root"})(L(({theme:o})=>({padding:o.spacing(1,2,2)}))),xe=u.forwardRef(function(r,s){const d=Q({props:r,name:"MuiAccordionDetails"}),{className:c,...x}=d,f=d,i=ue(f);return e.jsx(ge,{className:F(i.root,c),ref:s,ownerState:f,...x})});function fe(o){return q("MuiAccordionSummary",o)}const U=H("MuiAccordionSummary",["root","expanded","focusVisible","disabled","gutters","contentGutters","content","expandIconWrapper"]),he=o=>{const{classes:r,expanded:s,disabled:d,disableGutters:c}=o;return Y({root:["root",s&&"expanded",d&&"disabled",!c&&"gutters"],focusVisible:["focusVisible"],content:["content",s&&"expanded",!c&&"contentGutters"],expandIconWrapper:["expandIconWrapper",s&&"expanded"]},fe,r)},me=M(Co,{name:"MuiAccordionSummary",slot:"Root"})(L(({theme:o})=>{const r={duration:o.transitions.duration.shortest};return{display:"flex",width:"100%",minHeight:48,padding:o.spacing(0,2),transition:o.transitions.create(["min-height","background-color"],r),[`&.${U.focusVisible}`]:{backgroundColor:(o.vars||o).palette.action.focus},[`&.${U.disabled}`]:{opacity:(o.vars||o).palette.action.disabledOpacity},[`&:hover:not(.${U.disabled})`]:{cursor:"pointer"},variants:[{props:s=>!s.disableGutters,style:{[`&.${U.expanded}`]:{minHeight:64}}}]}})),be=M("span",{name:"MuiAccordionSummary",slot:"Content"})(L(({theme:o})=>({display:"flex",textAlign:"start",flexGrow:1,margin:"12px 0",variants:[{props:r=>!r.disableGutters,style:{transition:o.transitions.create(["margin"],{duration:o.transitions.duration.shortest}),[`&.${U.expanded}`]:{margin:"20px 0"}}}]}))),ve=M("span",{name:"MuiAccordionSummary",slot:"ExpandIconWrapper"})(L(({theme:o})=>({display:"flex",color:(o.vars||o).palette.action.active,transform:"rotate(0deg)",transition:o.transitions.create("transform",{duration:o.transitions.duration.shortest}),[`&.${U.expanded}`]:{transform:"rotate(180deg)"}}))),ye=u.forwardRef(function(r,s){const d=Q({props:r,name:"MuiAccordionSummary"}),{children:c,className:x,expandIcon:f,focusVisibleClassName:i,onClick:l,slots:g,slotProps:h,...S}=d,{disabled:y=!1,disableGutters:p,expanded:b,toggle:z}=u.useContext(ko),C=j=>{z&&z(j),l&&l(j)},v={...d,expanded:b,disabled:y,disableGutters:p},T=he(v),w={slots:g,slotProps:h},[O,A]=D("root",{ref:s,shouldForwardComponentProp:!0,className:F(T.root,x),elementType:me,externalForwardedProps:{...w,...S},ownerState:v,additionalProps:{focusRipple:!1,disableRipple:!0,disabled:y,"aria-expanded":b,focusVisibleClassName:F(T.focusVisible,i)},getSlotProps:j=>({...j,onClick:B=>{j.onClick?.(B),C(B)}})}),[a,n]=D("content",{className:T.content,elementType:be,externalForwardedProps:w,ownerState:v}),[t,m]=D("expandIconWrapper",{className:T.expandIconWrapper,elementType:ve,externalForwardedProps:w,ownerState:v});return e.jsxs(O,{...A,children:[e.jsx(a,{...n,children:c}),f&&e.jsx(t,{...m,children:f})]})});function Bo(o){const r=u.useRef({});return u.useEffect(()=>{r.current=o}),r.current}function Se(o){const{badgeContent:r,invisible:s=!1,max:d=99,showZero:c=!1}=o,x=Bo({badgeContent:r,max:d});let f=s;s===!1&&r===0&&!c&&(f=!0);const{badgeContent:i,max:l=d}=f?x:o,g=i&&Number(i)>l?`${l}+`:i;return{badgeContent:i,invisible:f,max:l,displayValue:g}}function Ce(o){return q("MuiBadge",o)}const V=H("MuiBadge",["root","badge","dot","standard","anchorOriginTopRight","anchorOriginBottomRight","anchorOriginTopLeft","anchorOriginBottomLeft","invisible","colorError","colorInfo","colorPrimary","colorSecondary","colorSuccess","colorWarning","overlapRectangular","overlapCircular","anchorOriginTopLeftCircular","anchorOriginTopLeftRectangular","anchorOriginTopRightCircular","anchorOriginTopRightRectangular","anchorOriginBottomLeftCircular","anchorOriginBottomLeftRectangular","anchorOriginBottomRightCircular","anchorOriginBottomRightRectangular"]),co=10,po=4,je=o=>{const{color:r,anchorOrigin:s,invisible:d,overlap:c,variant:x,classes:f={}}=o,i={root:["root"],badge:["badge",x,d&&"invisible",`anchorOrigin${$(s.vertical)}${$(s.horizontal)}`,`anchorOrigin${$(s.vertical)}${$(s.horizontal)}${$(c)}`,`overlap${$(c)}`,r!=="default"&&`color${$(r)}`]};return Y(i,Ce,f)},Re=M("span",{name:"MuiBadge",slot:"Root"})({position:"relative",display:"inline-flex",verticalAlign:"middle",flexShrink:0}),ze=M("span",{name:"MuiBadge",slot:"Badge",overridesResolver:(o,r)=>{const{ownerState:s}=o;return[r.badge,r[s.variant],r[`anchorOrigin${$(s.anchorOrigin.vertical)}${$(s.anchorOrigin.horizontal)}${$(s.overlap)}`],s.color!=="default"&&r[`color${$(s.color)}`],s.invisible&&r.invisible]}})(L(({theme:o})=>({display:"flex",flexDirection:"row",flexWrap:"wrap",justifyContent:"center",alignContent:"center",alignItems:"center",position:"absolute",boxSizing:"border-box",fontFamily:o.typography.fontFamily,fontWeight:o.typography.fontWeightMedium,fontSize:o.typography.pxToRem(12),minWidth:co*2,lineHeight:1,padding:"0 6px",height:co*2,borderRadius:co,zIndex:1,transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.enteringScreen}),variants:[...Object.entries(o.palette).filter(jo(["contrastText"])).map(([r])=>({props:{color:r},style:{backgroundColor:(o.vars||o).palette[r].main,color:(o.vars||o).palette[r].contrastText}})),{props:{variant:"dot"},style:{borderRadius:po,height:po*2,minWidth:po*2,padding:0}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{top:0,right:0,transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${V.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="rectangular",style:{bottom:0,right:0,transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${V.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{top:0,left:0,transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${V.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="rectangular",style:{bottom:0,left:0,transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${V.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{top:"14%",right:"14%",transform:"scale(1) translate(50%, -50%)",transformOrigin:"100% 0%",[`&.${V.invisible}`]:{transform:"scale(0) translate(50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="right"&&r.overlap==="circular",style:{bottom:"14%",right:"14%",transform:"scale(1) translate(50%, 50%)",transformOrigin:"100% 100%",[`&.${V.invisible}`]:{transform:"scale(0) translate(50%, 50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="top"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{top:"14%",left:"14%",transform:"scale(1) translate(-50%, -50%)",transformOrigin:"0% 0%",[`&.${V.invisible}`]:{transform:"scale(0) translate(-50%, -50%)"}}},{props:({ownerState:r})=>r.anchorOrigin.vertical==="bottom"&&r.anchorOrigin.horizontal==="left"&&r.overlap==="circular",style:{bottom:"14%",left:"14%",transform:"scale(1) translate(-50%, 50%)",transformOrigin:"0% 100%",[`&.${V.invisible}`]:{transform:"scale(0) translate(-50%, 50%)"}}},{props:{invisible:!0},style:{transition:o.transitions.create("transform",{easing:o.transitions.easing.easeInOut,duration:o.transitions.duration.leavingScreen})}}]})));function fo(o){return{vertical:o?.vertical??"top",horizontal:o?.horizontal??"right"}}const K=u.forwardRef(function(r,s){const d=Q({props:r,name:"MuiBadge"}),{anchorOrigin:c,className:x,classes:f,component:i,components:l={},componentsProps:g={},children:h,overlap:S="rectangular",color:y="default",invisible:p=!1,max:b=99,badgeContent:z,slots:C,slotProps:v,showZero:T=!1,variant:w="standard",...O}=d,{badgeContent:A,invisible:a,max:n,displayValue:t}=Se({max:b,invisible:p,badgeContent:z,showZero:T}),m=Bo({anchorOrigin:fo(c),color:y,overlap:S,variant:w,badgeContent:z}),j=a||A==null&&w!=="dot",{color:B=y,overlap:W=S,anchorOrigin:N,variant:Z=w}=j?m:d,io=fo(N),J=Z!=="dot"?t:void 0,_={...d,badgeContent:A,invisible:j,max:n,displayValue:J,showZero:T,anchorOrigin:io,color:B,overlap:W,variant:Z},X=je(_),oo={slots:{root:C?.root??l.Root,badge:C?.badge??l.Badge},slotProps:{root:v?.root??g.root,badge:v?.badge??g.badge}},[ao,$o]=D("root",{elementType:Re,externalForwardedProps:{...oo,...O},ownerState:_,className:F(X.root,x),ref:s,additionalProps:{as:i}}),[Wo,Ao]=D("badge",{elementType:ze,externalForwardedProps:oo,ownerState:_,className:X.badge});return e.jsxs(ao,{...$o,children:[h,e.jsx(Wo,{...Ao,children:J})]})});function Pe(o){return u.Children.toArray(o).filter(r=>u.isValidElement(r))}function ke(o){return q("MuiToggleButton",o)}const E=H("MuiToggleButton",["root","disabled","selected","standard","primary","secondary","sizeSmall","sizeMedium","sizeLarge","fullWidth"]),To=u.createContext({}),wo=u.createContext(void 0);function Be(o,r){return r===void 0||o===void 0?!1:Array.isArray(r)?r.includes(o):o===r}const Te=o=>{const{classes:r,fullWidth:s,selected:d,disabled:c,size:x,color:f}=o,i={root:["root",d&&"selected",c&&"disabled",s&&"fullWidth",`size${$(x)}`,f]};return Y(i,ke,r)},we=M(Co,{name:"MuiToggleButton",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:s}=o;return[r.root,r[`size${$(s.size)}`]]}})(L(({theme:o})=>({...o.typography.button,borderRadius:(o.vars||o).shape.borderRadius,padding:11,border:`1px solid ${(o.vars||o).palette.divider}`,color:(o.vars||o).palette.action.active,[`&.${E.disabled}`]:{color:(o.vars||o).palette.action.disabled,border:`1px solid ${(o.vars||o).palette.action.disabledBackground}`},"&:hover":{textDecoration:"none",backgroundColor:o.alpha((o.vars||o).palette.text.primary,(o.vars||o).palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},variants:[{props:{color:"standard"},style:{[`&.${E.selected}`]:{color:(o.vars||o).palette.text.primary,backgroundColor:o.alpha((o.vars||o).palette.text.primary,(o.vars||o).palette.action.selectedOpacity),"&:hover":{backgroundColor:o.alpha((o.vars||o).palette.text.primary,`${(o.vars||o).palette.action.selectedOpacity} + ${(o.vars||o).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:o.alpha((o.vars||o).palette.text.primary,(o.vars||o).palette.action.selectedOpacity)}}}}},...Object.entries(o.palette).filter(jo()).map(([r])=>({props:{color:r},style:{[`&.${E.selected}`]:{color:(o.vars||o).palette[r].main,backgroundColor:o.alpha((o.vars||o).palette[r].main,(o.vars||o).palette.action.selectedOpacity),"&:hover":{backgroundColor:o.alpha((o.vars||o).palette[r].main,`${(o.vars||o).palette.action.selectedOpacity} + ${(o.vars||o).palette.action.hoverOpacity}`),"@media (hover: none)":{backgroundColor:o.alpha((o.vars||o).palette[r].main,(o.vars||o).palette.action.selectedOpacity)}}}}})),{props:{fullWidth:!0},style:{width:"100%"}},{props:{size:"small"},style:{padding:7,fontSize:o.typography.pxToRem(13)}},{props:{size:"large"},style:{padding:15,fontSize:o.typography.pxToRem(15)}}]}))),ho=u.forwardRef(function(r,s){const{value:d,...c}=u.useContext(To),x=u.useContext(wo),f=Mo({...c,selected:Be(r.value,d)},r),i=Q({props:f,name:"MuiToggleButton"}),{children:l,className:g,color:h="standard",disabled:S=!1,disableFocusRipple:y=!1,fullWidth:p=!1,onChange:b,onClick:z,selected:C,size:v="medium",value:T,...w}=i,O={...i,color:h,disabled:S,disableFocusRipple:y,fullWidth:p,size:v},A=Te(O),a=t=>{z&&(z(t,T),t.defaultPrevented)||b&&b(t,T)},n=x||"";return e.jsx(we,{className:F(c.className,A.root,g,n),disabled:S,focusRipple:!y,ref:s,onClick:a,onChange:b,value:T,ownerState:O,"aria-pressed":C,...w,children:l})});function Oe(o){return q("MuiToggleButtonGroup",o)}const R=H("MuiToggleButtonGroup",["root","selected","horizontal","vertical","disabled","grouped","groupedHorizontal","groupedVertical","fullWidth","firstButton","lastButton","middleButton"]),$e=o=>{const{classes:r,orientation:s,fullWidth:d,disabled:c}=o,x={root:["root",s,d&&"fullWidth"],grouped:["grouped",`grouped${$(s)}`,c&&"disabled"],firstButton:["firstButton"],lastButton:["lastButton"],middleButton:["middleButton"]};return Y(x,Oe,r)},We=M("div",{name:"MuiToggleButtonGroup",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:s}=o;return[{[`& .${R.grouped}`]:r.grouped},{[`& .${R.grouped}`]:r[`grouped${$(s.orientation)}`]},{[`& .${R.firstButton}`]:r.firstButton},{[`& .${R.lastButton}`]:r.lastButton},{[`& .${R.middleButton}`]:r.middleButton},r.root,s.orientation==="vertical"&&r.vertical,s.fullWidth&&r.fullWidth]}})(L(({theme:o})=>({display:"inline-flex",borderRadius:(o.vars||o).shape.borderRadius,variants:[{props:{orientation:"vertical"},style:{flexDirection:"column",[`& .${R.grouped}`]:{[`&.${R.selected} + .${R.grouped}.${R.selected}`]:{borderTop:0,marginTop:0}},[`& .${R.firstButton},& .${R.middleButton}`]:{borderBottomLeftRadius:0,borderBottomRightRadius:0},[`& .${R.lastButton},& .${R.middleButton}`]:{marginTop:-1,borderTop:"1px solid transparent",borderTopLeftRadius:0,borderTopRightRadius:0},[`& .${R.lastButton}.${E.disabled},& .${R.middleButton}.${E.disabled}`]:{borderTop:"1px solid transparent"}}},{props:{fullWidth:!0},style:{width:"100%"}},{props:{orientation:"horizontal"},style:{[`& .${R.grouped}`]:{[`&.${R.selected} + .${R.grouped}.${R.selected}`]:{borderLeft:0,marginLeft:0}},[`& .${R.firstButton},& .${R.middleButton}`]:{borderTopRightRadius:0,borderBottomRightRadius:0},[`& .${R.lastButton},& .${R.middleButton}`]:{marginLeft:-1,borderLeft:"1px solid transparent",borderTopLeftRadius:0,borderBottomLeftRadius:0},[`& .${R.lastButton}.${E.disabled},& .${R.middleButton}.${E.disabled}`]:{borderLeft:"1px solid transparent"}}}]}))),Ae=u.forwardRef(function(r,s){const d=Q({props:r,name:"MuiToggleButtonGroup"}),{children:c,className:x,color:f="standard",disabled:i=!1,exclusive:l=!1,fullWidth:g=!1,onChange:h,orientation:S="horizontal",size:y="medium",value:p,...b}=d,z={...d,disabled:i,fullWidth:g,orientation:S,size:y},C=$e(z),v=u.useCallback((n,t)=>{if(!h)return;const m=p&&p.indexOf(t);let j;p&&m>=0?(j=p.slice(),j.splice(m,1)):j=p?p.concat(t):[t],h(n,j)},[h,p]),T=u.useCallback((n,t)=>{h&&h(n,p===t?null:t)},[h,p]),w=u.useMemo(()=>({className:C.grouped,onChange:l?T:v,value:p,size:y,fullWidth:g,color:f,disabled:i}),[C.grouped,l,T,v,p,y,g,f,i]),O=Pe(c),A=O.length,a=n=>{const t=n===0,m=n===A-1;return t&&m?"":t?C.firstButton:m?C.lastButton:C.middleButton};return e.jsx(We,{role:"group",className:F(C.root,x),ref:s,ownerState:z,...b,children:e.jsx(To.Provider,{value:w,children:O.map((n,t)=>e.jsx(wo.Provider,{value:a(t),children:n},t))})})}),mo=no(e.jsx("path",{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"})),Oo=no(e.jsx("path",{d:"M11 15h2v2h-2zm0-8h2v6h-2zm.99-5C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2M12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8"})),bo=no(e.jsx("path",{d:"M10 18h4v-2h-4zM3 6v2h18V6zm3 7h12v-2H6z"})),Ie=no([e.jsx("path",{d:"M20 2H4c-1 0-2 .9-2 2v3.01c0 .72.43 1.34 1 1.69V20c0 1.1 1.1 2 2 2h14c.9 0 2-.9 2-2V8.7c.57-.35 1-.97 1-1.69V4c0-1.1-1-2-2-2m-1 18H5V9h14zm1-13H4V4h16z"},"0"),e.jsx("path",{d:"M9 12h6v2H9z"},"1")]);function or(){const o=No(),[r,s]=u.useState([]),[d,c]=u.useState(!0),[x,f]=u.useState(""),[i,l]=u.useState(null),[g,h]=u.useState(0),[S,y]=u.useState(!1),[p,b]=u.useState([]),[z,C]=u.useState(""),{suppliers:v,fetchSuppliers:T}=Do();u.useEffect(()=>{T()},[T]),u.useEffect(()=>{(async()=>{try{const n=Vo(Eo(go,"products"),Fo("name","asc")),m=(await Go(n)).docs.map(j=>({...j.data(),id:j.id}));s(m)}catch(n){console.error("Error fetching products:",n)}finally{c(!1)}})()},[]);const w=u.useMemo(()=>{let a=0,n=0,t=0,m=0;return r.forEach(j=>{if(j.sizes&&j.sizes.length>0)j.sizes.forEach(B=>{const W=Number(B.stock||0);m++,W>0?a++:W===0?n++:t++});else{const B=Number(j.stock||0);m++,B>0?a++:B===0?n++:t++}}),{all:m,inStock:a,outOfStock:n,invalid:t}},[r]),O=u.useMemo(()=>{let a=r;g===1?a=a.filter(t=>t.sizes&&t.sizes.length>0?t.sizes.some(m=>Number(m.stock||0)>0):Number(t.stock||0)>0):g===2?a=a.filter(t=>t.sizes&&t.sizes.length>0?t.sizes.some(m=>Number(m.stock||0)===0):Number(t.stock||0)===0):g===3&&(a=a.filter(t=>t.sizes&&t.sizes.length>0?t.sizes.some(m=>Number(m.stock||0)<0):Number(t.stock||0)<0));const n=x.toLowerCase().trim();return n&&(a=a.filter(t=>t.name.toLowerCase().includes(n)||t.sku?.toLowerCase().includes(n))),p.length>0&&(a=a.filter(t=>t.supplierIds?.some(m=>p.includes(m)))),a},[r,x,g,p]),A=async(a,n)=>{l(a);try{const t=String(a),m=Ho(go,"products",t);let j;try{j=await qo(m)}catch(W){throw console.error("Firestore getDoc error:",W),W}if(!j.exists()){console.error("Product document not found. ID:",t),alert("Error: This product no longer exists in the database. Please refresh the page."),s(W=>W.filter(N=>String(N.id)!==t));return}const B={};n.sizes!==void 0&&(B.sizes=n.sizes),n.stock!==void 0&&(B.stock=n.stock),n.returnStock!==void 0&&(B.returnStock=n.returnStock),n.price!==void 0&&(B.price=n.price),n.purchasePrice!==void 0&&(B.purchasePrice=n.purchasePrice),console.log("Updating with:",B),await Qo(m,B),s(W=>W.map(N=>String(N.id)===t?{...N,...B}:N)),alert("Updated successfully!")}catch(t){console.error("Error updating:",t),alert("Failed to update: "+(t instanceof Error?t.message:"Unknown error"))}finally{l(null)}};return e.jsxs(P,{sx:{pb:10,bgcolor:"background.default",minHeight:"100vh",color:"text.primary"},children:[e.jsxs(P,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:"background.default",borderBottom:1,borderColor:"divider"},children:[e.jsxs(P,{sx:{display:"flex",alignItems:"center",px:2,height:64,gap:1},children:[e.jsx(eo,{onClick:()=>o({to:"/admin"}),sx:{bgcolor:"action.hover"},children:e.jsx(Lo,{})}),e.jsxs(P,{sx:{display:"flex",alignItems:"center",bgcolor:"action.hover",px:2,py:.5,borderRadius:10,width:"100%"},children:[e.jsx(xo,{sx:{color:"text.secondary",mr:1,fontSize:20}}),e.jsx(Ko,{placeholder:"Search...",fullWidth:!0,value:x,onChange:a=>f(a.target.value),sx:{fontSize:"0.8rem"},endAdornment:x&&e.jsx(eo,{size:"small",onClick:()=>f(""),sx:{p:.5},children:e.jsx(mo,{sx:{fontSize:16}})})})]}),e.jsx(eo,{onClick:()=>y(!0),sx:{bgcolor:p.length>0?"primary.main":"action.hover",color:p.length>0?"primary.contrastText":"inherit","&:hover":{bgcolor:p.length>0?"primary.dark":"action.selected"}},children:e.jsx(K,{badgeContent:p.length,color:"error",invisible:p.length===0,children:e.jsx(bo,{})})})]}),e.jsxs(Zo,{value:g,onChange:(a,n)=>h(n),variant:"scrollable",scrollButtons:"auto",sx:{borderTop:1,borderColor:"divider","& .MuiTab-root":{py:1.5,minHeight:0,fontSize:"0.7rem",fontWeight:"bold",textTransform:"none",px:1}},children:[e.jsx(ro,{label:e.jsx(K,{badgeContent:w.all,color:"primary",sx:{"& .MuiBadge-badge":{right:-12,top:0}},children:"All"}),icon:e.jsx(Ie,{sx:{fontSize:12}}),iconPosition:"start"}),e.jsx(ro,{label:e.jsx(K,{badgeContent:w.inStock,color:"success",sx:{"& .MuiBadge-badge":{right:-12,top:0}},children:"In"}),icon:e.jsx(zo,{sx:{fontSize:12}}),iconPosition:"start"}),e.jsx(ro,{label:e.jsx(K,{badgeContent:w.outOfStock,color:"error",sx:{"& .MuiBadge-badge":{right:-12,top:0}},children:"Out"}),icon:e.jsx(Po,{sx:{fontSize:12}}),iconPosition:"start"}),e.jsx(ro,{label:e.jsx(K,{badgeContent:w.invalid,color:"warning",sx:{"& .MuiBadge-badge":{right:-12,top:0}},children:"Neg"}),icon:e.jsx(Oo,{sx:{fontSize:12}}),iconPosition:"start"})]}),p.length>0?e.jsxs(P,{sx:{px:2,py:1,display:"flex",alignItems:"flex-start",gap:1,bgcolor:"action.hover",borderTop:1,borderColor:"divider"},children:[e.jsx(k,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",whiteSpace:"nowrap",mt:.5},children:"Filters:"}),e.jsx(P,{sx:{display:"flex",flexWrap:"wrap",gap:.5,rowGap:.8,flex:1},children:p.map(a=>{const n=v.find(t=>t.id===a);return n?e.jsx(lo,{label:n.name,size:"small",onDelete:()=>b(t=>t.filter(m=>m!==a)),sx:{height:20,fontSize:"0.65rem",fontWeight:"bold",bgcolor:"background.paper",border:1,borderColor:"divider"}},a):null})}),e.jsx(G,{size:"small",onClick:()=>b([]),sx:{fontSize:"0.6rem",fontWeight:"bold",minWidth:0,px:1,py:.2,mt:.1,textTransform:"none",color:"error.main","&:hover":{bgcolor:"error.lighter"}},children:"Clear"})]}):e.jsx(P,{sx:{px:2,py:.8,bgcolor:"action.hover",borderTop:1,borderColor:"divider",display:"flex",alignItems:"center",justifyContent:"center"},children:e.jsx(G,{size:"small",startIcon:e.jsx(bo,{sx:{fontSize:"14px !important"}}),onClick:()=>y(!0),sx:{textTransform:"none",fontSize:"0.75rem",fontWeight:"bold",color:"grey.900",bgcolor:"grey.200",py:.3,px:1.5,borderRadius:5},children:"Select Suppliers to Filter"})})]}),e.jsx(Jo,{children:e.jsx(P,{sx:{p:2},children:d?e.jsx(P,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(Ro,{})}):O.length===0?e.jsx(P,{sx:{textAlign:"center",py:8},children:e.jsx(k,{color:"text.secondary",children:"No products found in this category."})}):e.jsx(Yo,{useWindowScroll:!0,data:O,itemContent:(a,n)=>e.jsx(P,{sx:{pb:1.5},children:e.jsx(Me,{product:n,suppliers:v,onUpdate:A,isUpdating:i===n.id},`${n.id}-${a}`)})})})}),e.jsxs(Xo,{open:S,onClose:()=>y(!1),maxWidth:"xs",fullWidth:!0,PaperProps:{sx:{borderRadius:3}},children:[e.jsx(oe,{sx:{fontWeight:"bold",pb:1},children:"Filter by Supplier"}),e.jsxs(ee,{sx:{mt:1},children:[e.jsx(so,{fullWidth:!0,size:"small",placeholder:"Search more suppliers...",value:z,onChange:a=>C(a.target.value),sx:{mb:2},slotProps:{input:{startAdornment:e.jsx(xo,{sx:{color:"text.secondary",mr:1,fontSize:20}}),endAdornment:z&&e.jsx(eo,{size:"small",onClick:()=>C(""),sx:{p:.5},children:e.jsx(mo,{sx:{fontSize:16}})}),sx:{borderRadius:2}}}}),p.length>0&&e.jsxs(P,{sx:{mb:2},children:[e.jsxs(k,{variant:"caption",sx:{fontWeight:"bold",color:"primary.main",mb:1,display:"block",textTransform:"uppercase"},children:["Selected (",p.length,")"]}),e.jsx(P,{sx:{display:"flex",flexWrap:"wrap",gap:1},children:p.map(a=>{const n=v.find(t=>t.id===a);return n?e.jsx(lo,{label:n.name,onDelete:()=>b(t=>t.filter(m=>m!==a)),color:"primary",size:"small",sx:{fontWeight:"bold"}},a):null})}),e.jsx(uo,{sx:{my:2}})]}),e.jsx(k,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",mb:1,display:"block",textTransform:"uppercase"},children:"All Suppliers"}),e.jsxs(P,{sx:{display:"flex",flexWrap:"wrap",gap:1,maxHeight:"300px",overflowY:"auto",p:.5},children:[v.filter(a=>a.name.toLowerCase().includes(z.toLowerCase())&&!p.includes(a.id)).map(a=>e.jsx(lo,{label:a.name,onClick:()=>b(n=>[...n,a.id]),variant:"outlined",size:"small",sx:{transition:"all 0.2s","&:hover":{bgcolor:"action.hover",transform:"translateY(-2px)"}}},a.id)),v.length===0&&e.jsx(k,{variant:"body2",color:"text.secondary",sx:{py:2,textAlign:"center",width:"100%"},children:"No suppliers found."}),v.filter(a=>a.name.toLowerCase().includes(z.toLowerCase())&&!p.includes(a.id)).length===0&&v.length>0&&e.jsx(k,{variant:"body2",color:"text.secondary",sx:{py:1,textAlign:"center",width:"100%"},children:"No matching suppliers left."})]})]}),e.jsxs(re,{sx:{px:3,pb:2},children:[e.jsx(G,{onClick:()=>b([]),variant:"text",color:"inherit",sx:{fontWeight:"bold",textTransform:"none"},children:"Clear All"}),e.jsx(P,{sx:{flex:1}}),e.jsx(G,{onClick:()=>y(!1),variant:"contained",sx:{borderRadius:2,fontWeight:"bold",textTransform:"none",px:3},children:"Apply Filter"})]})]})]})}function Me({product:o,suppliers:r,onUpdate:s,isUpdating:d}){const c=!!(o.sizes&&o.sizes.length>0),x=(c?o.sizes?.reduce((i,l)=>i+(l.stock||0),0):o.stock||0)??0,f=u.useMemo(()=>{let i=0,l=0,g=0;const h=c?o.sizes||[]:[{stock:o.stock}];return h.forEach(S=>{const y=Number(S.stock||0);y>0?i++:y===0?l++:g++}),{in:i,out:l,neg:g,total:h.length}},[o,c]);return e.jsxs(de,{sx:{borderRadius:"16px !important",border:1,borderColor:"divider","&:before":{display:"none"},boxShadow:"none",overflow:"hidden",bgcolor:"background.paper","&.Mui-expanded":{borderColor:"primary.main",boxShadow:"0 4px 20px rgba(0,0,0,0.08)"}},children:[e.jsx(ye,{expandIcon:e.jsx(Uo,{}),children:e.jsxs(I,{sx:{width:"100%"},children:[e.jsxs(I,{direction:"row",spacing:2,alignItems:"center",children:[e.jsx(P,{sx:{width:44,height:44,borderRadius:2,bgcolor:"action.hover",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,border:1,borderColor:"divider"},children:o.src?e.jsx("img",{src:o.src,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:8}}):e.jsx(te,{sx:{color:"text.secondary",fontSize:20}})}),e.jsxs(P,{sx:{flex:1,minWidth:0},children:[e.jsx(k,{variant:"body2",sx:{fontWeight:"bold",lineHeight:1.2},children:o.name}),e.jsxs(I,{direction:"row",spacing:.5,alignItems:"center",sx:{flexWrap:"wrap",gap:.5,mt:.5},children:[e.jsxs(k,{variant:"caption",sx:{bgcolor:"action.hover",px:.6,py:.2,borderRadius:1,fontSize:"0.6rem",fontWeight:600,color:"text.secondary",border:1,borderColor:"divider"},children:[f.total," ",c?"Variants":"Item"]}),f.in>0&&e.jsxs(P,{sx:{display:"flex",alignItems:"center",bgcolor:"success.dark",color:"success.contrastText",px:.6,py:.2,borderRadius:1,gap:.5},children:[e.jsx(zo,{sx:{fontSize:10}}),e.jsxs(k,{variant:"caption",sx:{fontSize:"0.6rem",fontWeight:900},children:[f.in," IN"]})]}),f.out>0&&e.jsxs(P,{sx:{display:"flex",alignItems:"center",bgcolor:"error.main",color:"error.contrastText",px:.6,py:.2,borderRadius:1,gap:.5},children:[e.jsx(Po,{sx:{fontSize:10}}),e.jsxs(k,{variant:"caption",sx:{fontSize:"0.6rem",fontWeight:900},children:[f.out," OUT"]})]}),f.neg>0&&e.jsxs(P,{sx:{display:"flex",alignItems:"center",bgcolor:"warning.main",color:"warning.contrastText",px:.6,py:.2,borderRadius:1,gap:.5},children:[e.jsx(Oo,{sx:{fontSize:10}}),e.jsxs(k,{variant:"caption",sx:{fontSize:"0.6rem",fontWeight:900},children:[f.neg," NEG"]})]})]}),e.jsxs(I,{direction:"row",spacing:1,alignItems:"center",sx:{mt:.5},children:[e.jsx(k,{variant:"caption",color:"text.secondary",sx:{display:"block"},children:o.sku||"No SKU"}),e.jsx(P,{sx:{width:4,height:4,borderRadius:"50%",bgcolor:"divider"}}),e.jsx(k,{variant:"caption",color:"text.secondary",children:o.category})]})]}),e.jsxs(P,{sx:{textAlign:"right",pr:1.5},children:[e.jsx(k,{variant:"body2",sx:{fontWeight:800,color:x<0?"error.main":x===0?"warning.main":"text.primary",fontSize:"1rem"},children:x}),e.jsx(k,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",display:"block",mt:-.5},children:"Stock"})]})]}),o.supplierIds&&o.supplierIds.length>0&&e.jsxs(I,{direction:"row",spacing:.5,alignItems:"center",sx:{mt:1.5,flexWrap:"wrap",rowGap:.8},children:[e.jsx(k,{variant:"caption",sx:{color:"text.secondary",fontSize:"0.6rem",fontWeight:"bold",mr:.5},children:"SUPPLIERS:"}),o.supplierIds.map(i=>{const l=r.find(g=>g.id===i);return l?e.jsx(k,{variant:"caption",sx:{bgcolor:"grey.200",color:"grey.800",px:.6,py:.2,borderRadius:1,fontSize:"0.6rem",fontWeight:900,whiteSpace:"nowrap",border:1,borderColor:"primary.main",opacity:.8},children:l.name.toUpperCase()},i):null})]})]})}),e.jsx(xe,{sx:{bgcolor:"action.hover",px:{xs:1.5,sm:2},py:2.5},children:e.jsx(I,{spacing:2,children:c?o.sizes?.map((i,l)=>e.jsx(vo,{label:`Variant: ${i.label}`,currentStock:i.stock||0,currentReturnStock:i.returnStock||0,currentPrice:i.price,currentPurchasePrice:i.purchasePrice,onSaveStock:g=>{const h=[...o.sizes||[]];h[l]={...h[l],stock:g},s(o.id,{sizes:h})},onSaveReturnStock:g=>{const h=[...o.sizes||[]];h[l]={...h[l],returnStock:g},s(o.id,{sizes:h})},onSavePricing:(g,h)=>{const S=[...o.sizes||[]];S[l]={...S[l],price:g,purchasePrice:h},s(o.id,{sizes:S})},isUpdating:d},l)):e.jsx(vo,{label:"Base Product Item",currentStock:o.stock||0,currentReturnStock:o.returnStock||0,currentPrice:o.price,currentPurchasePrice:o.purchasePrice,onSaveStock:i=>s(o.id,{stock:i}),onSaveReturnStock:i=>s(o.id,{returnStock:i}),onSavePricing:(i,l)=>s(o.id,{price:i,purchasePrice:l}),isUpdating:d})})})]})}function vo({label:o,currentStock:r,currentReturnStock:s,currentPrice:d,currentPurchasePrice:c,onSaveStock:x,onSaveReturnStock:f,onSavePricing:i,isUpdating:l}){const[g,h]=u.useState(d!==void 0?d:""),[S,y]=u.useState(c!==void 0?c:""),p=()=>{const C=g===""?void 0:Number(g),v=S===""?void 0:Number(S);i(C,v)},b=r<0,z=r===0;return e.jsx(So,{elevation:0,sx:{p:2,borderRadius:3,border:1,borderColor:b?"error.light":z?"warning.light":"divider",bgcolor:"background.paper"},children:e.jsxs(I,{spacing:2,children:[e.jsx(k,{variant:"subtitle2",sx:{fontWeight:800,color:"text.primary"},children:o}),e.jsx(yo,{label:"Current Stock",currentValue:r,onSave:x,isUpdating:l,isMainStock:!0}),e.jsx(uo,{sx:{borderStyle:"dashed"}}),e.jsx(yo,{label:"Return Stock",currentValue:s,onSave:f,isUpdating:l}),e.jsx(uo,{}),e.jsxs(P,{children:[e.jsx(k,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",textTransform:"uppercase",mb:1,display:"block"},children:"Pricing"}),e.jsxs(I,{direction:"row",spacing:1,alignItems:"center",sx:{flexWrap:"wrap"},children:[e.jsx(so,{size:"small",type:"number",label:"Selling Price",placeholder:"0.00",value:g,onChange:C=>h(C.target.value===""?"":Number(C.target.value)),sx:{width:120},slotProps:{input:{sx:{fontSize:"0.8rem",fontWeight:600},startAdornment:e.jsx(k,{sx:{mr:.5,color:"text.secondary"},children:"₹"})}}}),e.jsx(so,{size:"small",type:"number",label:"Purchase Price",placeholder:"0.00",value:S,onChange:C=>y(C.target.value===""?"":Number(C.target.value)),sx:{width:120},slotProps:{input:{sx:{fontSize:"0.8rem",fontWeight:600},startAdornment:e.jsx(k,{sx:{mr:.5,color:"text.secondary"},children:"₹"})}}})]}),e.jsx(I,{direction:"row",spacing:1,alignItems:"center",sx:{flexWrap:"wrap",pt:2},children:e.jsx(G,{variant:"outlined",size:"small",disabled:l,onClick:p,sx:{minWidth:100,height:40,borderRadius:2,textTransform:"none",fontWeight:"bold"},children:"Save Prices"})})]})]})})}function yo({label:o,currentValue:r,onSave:s,isUpdating:d,isMainStock:c=!1}){const[x,f]=u.useState("add"),[i,l]=u.useState(""),g=u.useRef(null),h=b=>{b&&(f(b),setTimeout(()=>{g.current?.focus()},0))},S=()=>{if(i==="")return;const b=Number(i),z=x==="add"?r+b:b;s(z),l("")},y=r<0,p=r===0;return e.jsxs(P,{children:[e.jsxs(I,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[e.jsxs(k,{variant:"caption",sx:{fontWeight:"bold",color:c&&y?"error.main":c&&p?"warning.main":"text.secondary"},children:[o,": ",r]}),c&&y&&e.jsx(k,{variant:"caption",color:"error",sx:{fontWeight:"bold"},children:"• INVALID"}),c&&p&&e.jsx(k,{variant:"caption",color:"warning.main",sx:{fontWeight:"bold"},children:"• OUT OF STOCK"})]}),e.jsxs(I,{direction:"row",spacing:1,alignItems:"center",sx:{flexWrap:"wrap"},children:[e.jsxs(Ae,{size:"small",value:x,exclusive:!0,onChange:(b,z)=>h(z),sx:{bgcolor:"action.hover",borderRadius:1.5},children:[e.jsx(ho,{value:"add",sx:{px:1.5,py:.5,fontSize:"0.65rem",fontWeight:900,border:"none !important","&.Mui-selected":{bgcolor:"primary.main",color:"black","&:hover":{bgcolor:"primary.main"}}},children:"ADD"}),e.jsx(ho,{value:"replace",sx:{px:1.5,py:.5,fontSize:"0.65rem",fontWeight:900,border:"none !important","&.Mui-selected":{bgcolor:"primary.main",color:"black","&:hover":{bgcolor:"primary.main"}}},children:"REPLACE"})]}),e.jsx(so,{size:"small",type:"number",placeholder:x==="add"?"+/-":"Set",value:i,onChange:b=>l(b.target.value===""?"":Number(b.target.value)),inputRef:g,sx:{width:85},slotProps:{input:{sx:{fontSize:"0.8rem",fontWeight:800,textAlign:"center"}}}})]}),e.jsx(I,{direction:"row",spacing:1,alignItems:"center",sx:{flexWrap:"wrap",pt:1},children:e.jsxs(G,{variant:"contained",size:"small",disabled:i===""||d,onClick:S,sx:{minWidth:40,height:40,borderRadius:2,boxShadow:"none","&:hover":{boxShadow:"none"}},children:[d?e.jsx(Ro,{size:20,color:"inherit"}):e.jsx(se,{fontSize:"small"}),"  Save"]})})]})}export{or as component};
