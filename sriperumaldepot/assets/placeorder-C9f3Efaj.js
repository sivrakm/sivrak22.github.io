import{j as e,g as _,b as G,r as j,c as X,d as Z,e as O,s as V,f as F,h as J,q as ee,m as A,i as q,t as re,v as oe,a as te,u as se,w as ae,x as ne,y as le,z as ie}from"./index-DPMeJsKZ.js";import{u as $}from"./cartStore-CtTkMZyD.js";import{u as ce}from"./orderStore-eHiC--jl.js";import{c as k,T as i,B as s,a as E}from"./Button-BIX3GRht.js";import{I as de}from"./IconButton-Hw8WbtNh.js";import{G as v}from"./Grid-ipB6zE33.js";import{T as C,I as pe}from"./TextField-CD6hLXiF.js";import{m as ue,u as xe,f as me}from"./Select-C2isiBkS.js";import{S as be}from"./SwitchBase-Cbn3LxlV.js";import{P as he}from"./Payments-YiwbSHJx.js";import{C as fe}from"./CheckCircle-BiV0E7Mq.js";import{S as ge}from"./ShoppingCart-NK5P6mL5.js";import{A as ye}from"./ArrowBack-Bgr9AeaX.js";import"./useThemeProps-8uCsiUgR.js";import"./isMuiElement-B1MDafNB.js";import"./Modal-CXJJcq9R.js";const je=k(e.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"})),ve=k(e.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"})),Ce=k(e.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}));function ke(r){return G("MuiCheckbox",r)}const H=_("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),Ie=r=>{const{classes:t,indeterminate:a,color:l,size:d}=r,x={root:["root",a&&"indeterminate",`color${F(l)}`,`size${F(d)}`]},b=J(x,ke,t);return{...t,...b}},Pe=V(be,{shouldForwardProp:r=>ee(r)||r==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:a}=r;return[t.root,a.indeterminate&&t.indeterminate,t[`size${F(a.size)}`],a.color!=="default"&&t[`color${F(a.color)}`]]}})(A(({theme:r})=>({color:(r.vars||r).palette.text.secondary,variants:[{props:{color:"default",disableRipple:!1},style:{"&:hover":{backgroundColor:r.alpha((r.vars||r).palette.action.active,(r.vars||r).palette.action.hoverOpacity)}}},...Object.entries(r.palette).filter(q()).map(([t])=>({props:{color:t,disableRipple:!1},style:{"&:hover":{backgroundColor:r.alpha((r.vars||r).palette[t].main,(r.vars||r).palette.action.hoverOpacity)}}})),...Object.entries(r.palette).filter(q()).map(([t])=>({props:{color:t},style:{[`&.${H.checked}, &.${H.indeterminate}`]:{color:(r.vars||r).palette[t].main},[`&.${H.disabled}`]:{color:(r.vars||r).palette.action.disabled}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]}))),Se=e.jsx(ve,{}),ze=e.jsx(je,{}),Me=e.jsx(Ce,{}),we=j.forwardRef(function(t,a){const l=X({props:t,name:"MuiCheckbox"}),{checkedIcon:d=Se,color:x="primary",icon:b=ze,indeterminate:p=!1,indeterminateIcon:I=Me,inputProps:P,size:u="medium",disableRipple:S=!1,className:R,slots:c={},slotProps:N={},...m}=l,h=p?I:b,f=p?I:d,g={...l,disableRipple:S,color:x,indeterminate:p,size:u},z=Ie(g),y=N.input??P,[o,n]=Z("root",{ref:a,elementType:Pe,className:O(z.root,R),shouldForwardComponentProp:!0,externalForwardedProps:{slots:c,slotProps:N,...m},ownerState:g,additionalProps:{type:"checkbox",icon:j.cloneElement(h,{fontSize:h.props.fontSize??u}),checkedIcon:j.cloneElement(f,{fontSize:f.props.fontSize??u}),disableRipple:S,slots:c,slotProps:{input:ue(typeof y=="function"?y(g):y,{"data-indeterminate":p})}}});return e.jsx(o,{...n,classes:z})});function Fe(r){return G("MuiFormControlLabel",r)}const L=_("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Re=r=>{const{classes:t,disabled:a,labelPlacement:l,error:d,required:x}=r,b={root:["root",a&&"disabled",`labelPlacement${F(l)}`,d&&"error",x&&"required"],label:["label",a&&"disabled"],asterisk:["asterisk",d&&"error"]};return J(b,Fe,t)},Ne=V("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(r,t)=>{const{ownerState:a}=r;return[{[`& .${L.label}`]:t.label},t.root,t[`labelPlacement${F(a.labelPlacement)}`]]}})(A(({theme:r})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${L.disabled}`]:{cursor:"default"},[`& .${L.label}`]:{[`&.${L.disabled}`]:{color:(r.vars||r).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:t})=>t==="start"||t==="top"||t==="bottom",style:{marginLeft:16}}]}))),Le=V("span",{name:"MuiFormControlLabel",slot:"Asterisk"})(A(({theme:r})=>({[`&.${L.error}`]:{color:(r.vars||r).palette.error.main}}))),Te=j.forwardRef(function(t,a){const l=X({props:t,name:"MuiFormControlLabel"}),{checked:d,className:x,componentsProps:b={},control:p,disabled:I,disableTypography:P,inputRef:u,label:S,labelPlacement:R="end",name:c,onChange:N,required:m,slots:h={},slotProps:f={},value:g,...z}=l,y=xe(),o=I??p.props.disabled??y?.disabled,n=m??p.props.required,T={disabled:o,required:n};["checked","name","onChange","value","inputRef"].forEach(D=>{typeof p.props[D]>"u"&&typeof l[D]<"u"&&(T[D]=l[D])});const K=me({props:l,muiFormControl:y,states:["error"]}),W={...l,disabled:o,labelPlacement:R,required:n,error:K.error},U=Re(W),Q={slots:h,slotProps:{...b,...f}},[Y,B]=Z("typography",{elementType:i,externalForwardedProps:Q,ownerState:W});let M=S;return M!=null&&M.type!==i&&!P&&(M=e.jsx(Y,{component:"span",...B,className:O(U.label,B?.className),children:M})),e.jsxs(Ne,{className:O(U.root,x),ownerState:W,ref:a,...z,children:[j.cloneElement(p,T),n?e.jsxs("div",{children:[M,e.jsxs(Le,{ownerState:W,"aria-hidden":!0,className:U.asterisk,children:[" ","*"]})]}):M]})}),We=k(e.jsx("path",{d:"M20 4H4c-1.11 0-1.99.89-1.99 2L2 18c0 1.11.89 2 2 2h16c1.11 0 2-.89 2-2V6c0-1.11-.89-2-2-2m0 14H4v-6h16zm0-10H4V6h16z"})),De=k(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 17h-2v-2h2zm2.07-7.75-.9.92C13.45 12.9 13 13.5 13 15h-2v-.5c0-1.1.45-2.1 1.17-2.83l1.24-1.26c.37-.36.59-.86.59-1.41 0-1.1-.9-2-2-2s-2 .9-2 2H8c0-2.21 1.79-4 4-4s4 1.79 4 4c0 .88-.36 1.68-.93 2.25"})),$e=k(e.jsx("path",{d:"M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2m-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2m3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1s3.1 1.39 3.1 3.1z"})),Ue=k(e.jsx("path",{d:"M17 1.01 7 1c-1.1 0-2 .9-2 2v18c0 1.1.9 2 2 2h10c1.1 0 2-.9 2-2V3c0-1.1-.9-1.99-2-1.99M17 19H7V5h10z"})),He=re()(oe(r=>({shippingDetails:{firstName:"",orgName:"",address:"",zip:"",city:"",phoneNumber:""},setShippingDetails:t=>r({shippingDetails:t})}),{name:"shipping-storage"})),Oe={arrow_back:e.jsx(ye,{}),shopping_cart:e.jsx(ge,{}),check_circle:e.jsx(fe,{}),credit_card:e.jsx(We,{}),help:e.jsx(De,{}),lock:e.jsx($e,{}),payments:e.jsx(he,{}),upi:e.jsx(Ue,{})},w=({name:r,filled:t=!1,className:a=""})=>e.jsx(e.Fragment,{children:Oe[r]});function tr(){const[r,t]=j.useState("upi"),[a,l]=j.useState(!1),d=te(),x=$(o=>o.items),b=$(o=>o.getTotalItems),p=$(o=>o.getTotalPrice),I=$(o=>o.clearCart),P=se(o=>o.user),{shippingDetails:u,setShippingDetails:S}=He(),R=ce(o=>o.setLastOrder),[c,N]=j.useState({firstName:u.firstName,orgName:u.orgName,address:u.address,zip:u.zip,city:u.city,phoneNumber:u.phoneNumber||P?.phoneNumber||""}),m=o=>n=>{N({...c,[o]:n.target.value})},h=p(),f=h*.08,g=h+f,z=b(),y=async()=>{if(!a){l(!0);try{S(c);const o={userId:P?.uid||"guest",shippingDetails:c,items:x,subtotal:h,tax:f,total:g,paymentMethod:r,status:"pending",timestamp:ae()};await ne(le(ie,"orders"),o),R(o),I(),d({to:"/orders"})}catch(o){console.error("Error placing order:",o),alert("Failed to place order. Please try again.")}finally{l(!1)}}};return e.jsxs(s,{sx:{pb:30,bgcolor:"background.default",minHeight:"100vh",color:"text.primary",position:"relative"},children:[e.jsx(s,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:"background.default/90",backdropFilter:"blur(20px)",borderBottom:1,borderColor:"divider"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,height:64},children:[e.jsx(de,{sx:{ml:-1,bgcolor:"action.hover"},onClick:()=>d({to:"/checkout"}),children:e.jsx(w,{name:"arrow_back"})}),e.jsx(i,{variant:"h6",sx:{fontWeight:"bold"},children:"Checkout"}),e.jsx(s,{sx:{width:40}})," "]})}),e.jsxs(s,{sx:{p:2,display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(i,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",textTransform:"uppercase",letterSpacing:1},children:"Order Summary"}),e.jsx(E,{size:"small",onClick:()=>d({to:"/checkout"}),sx:{fontSize:"0.75rem",fontWeight:500,color:"info.main",minWidth:"auto",p:0,"&:hover":{color:"text.primary",bgcolor:"transparent"}},children:"Edit Cart"})]}),e.jsx(s,{sx:{bgcolor:"background.paper",borderRadius:3,border:1,borderColor:"divider",p:2,boxShadow:"none"},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(s,{sx:{display:"flex",ml:1.5},children:e.jsx(s,{sx:{width:48,height:48,bgcolor:"action.hover",borderRadius:2,border:2,borderColor:"background.paper",display:"flex",alignItems:"center",justifyContent:"center",zIndex:30,ml:-1.5},children:e.jsx(w,{name:"shopping_cart",className:"!text-xl text-text-secondary"})})}),e.jsxs(s,{sx:{flex:1,minWidth:0,display:"flex",flexDirection:"column",justifyContent:"center"},children:[e.jsxs(i,{variant:"body2",style:{fontWeight:"bold",whiteSpace:"nowrap"},children:[z," Items"]}),e.jsx(s,{style:{color:"text.secondary",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:x.map((o,n)=>e.jsxs(i,{variant:"body2",children:[o.quantity," x ",o.selectedSize?.label.slice(0,5),"..,",o.name.slice(0,10),".."]},`${o.id}-${o.selectedSize?.label||"default"}-${n}`))})]})]})}),e.jsxs(s,{sx:{mb:2.5,px:0,pt:2},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"baseline",mb:.5},children:[e.jsx(i,{variant:"body2",sx:{fontWeight:500,color:"text.secondary"},children:"Total Amount"}),e.jsxs(i,{variant:"h5",sx:{fontWeight:"bold",color:"primary.main"},children:["₹",g.toFixed(2)]})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",justifyContent:"flex-end",alignItems:"flex-end",gap:1,fontSize:"0.75rem",color:"text.disabled"},children:[e.jsxs(i,{variant:"caption",color:"inherit",children:["Subtotal: ₹",h.toFixed(2)]}),e.jsxs(i,{variant:"caption",color:"inherit",children:["Tax: ₹",f.toFixed(2)]})]})]})]}),e.jsxs(s,{children:[e.jsx(i,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",textTransform:"uppercase",letterSpacing:1,display:"block",mb:1.5},children:"Shipping Address"}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:1.5},children:[e.jsxs(v,{container:!0,spacing:1.5,children:[e.jsx(v,{size:12,children:e.jsx(C,{label:"First Name",variant:"filled",fullWidth:!0,value:c.firstName,onChange:m("firstName"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})}),e.jsx(v,{size:12,children:e.jsx(C,{label:"Organization Name",variant:"filled",fullWidth:!0,value:c.orgName,onChange:m("orgName"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})}),e.jsx(v,{size:12,children:e.jsx(C,{label:"Phone Number",variant:"filled",fullWidth:!0,placeholder:"+91 99999 99999",value:c.phoneNumber,onChange:m("phoneNumber"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})})]}),e.jsx(C,{label:"Address",variant:"filled",fullWidth:!0,value:c.address,onChange:m("address"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}}),e.jsxs(v,{container:!0,spacing:1.5,children:[e.jsx(v,{size:4,children:e.jsx(C,{label:"Zip Code",variant:"filled",fullWidth:!0,value:c.zip,onChange:m("zip"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})}),e.jsx(v,{size:8,children:e.jsx(C,{label:"City",variant:"filled",fullWidth:!0,value:c.city,onChange:m("city"),sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"background.paper",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0}})})]})]})]}),e.jsxs(s,{children:[e.jsx(i,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",textTransform:"uppercase",letterSpacing:1,display:"block",mb:1.5},children:"Payment Method"}),e.jsx(s,{sx:{display:"flex",gap:1.5,mb:2,overflowX:"auto",pb:.5},children:["upi","payments"].map(o=>{const n=r===o,T={upi:"UPI",payments:"Cash"};return e.jsxs(s,{component:"button",onClick:()=>t(o),sx:{flex:1,minWidth:110,p:1.5,borderRadius:3,border:n?2:1,borderColor:n?"primary.main":"divider",bgcolor:n?"rgba(103, 103, 103, 0.1)":"background.paper",display:"flex",flexDirection:"column",alignItems:"flex-start",justifyContent:"space-between",height:80,position:"relative",transition:"all 0.2s","&:active":{transform:"scale(0.95)"}},children:[n&&e.jsx(s,{sx:{position:"absolute",top:8,right:8,color:"primary.main"},children:e.jsx(w,{name:"check_circle",filled:!0})}),e.jsx(s,{sx:{color:n?"primary.main":"text.secondary"},children:e.jsx(w,{name:o})}),e.jsx(i,{variant:"caption",sx:{fontWeight:n?"bold":"medium",color:n?"text.primary":"text.secondary"},children:T[o]})]},o)})}),r==="upi"&&e.jsxs(s,{sx:{bgcolor:"background.paper",borderRadius:3,border:1,borderColor:"divider",p:2,display:"flex",flexDirection:"column",gap:1.5},children:[e.jsx(C,{label:"UPI ID",variant:"filled",fullWidth:!0,placeholder:"username@bank",defaultValue:"mystore@a123bank",disabled:!0,sx:{"& .MuiFilledInput-root":{borderRadius:3,bgcolor:"action.hover",border:1,borderColor:"divider"},"& .MuiInputLabel-root":{color:"text.secondary"}},InputProps:{disableUnderline:!0,endAdornment:e.jsx(pe,{position:"end",children:e.jsx(w,{name:"upi",className:"text-text-disabled"})})}}),e.jsx(i,{variant:"caption",color:"text.secondary",sx:{px:.5},children:"Securely pay using your favorite UPI app (GPay, PhonePe, Paytm, etc)."})]}),e.jsx(s,{sx:{display:"flex",alignItems:"center",mt:2},children:e.jsx(Te,{control:e.jsx(we,{defaultChecked:!0,sx:{color:"text.secondary","&.Mui-checked":{color:"primary.main"}}}),label:e.jsx(i,{variant:"body2",color:"text.secondary",children:"Save this VPA for future purchases"})})})]})]}),e.jsx(s,{sx:{position:"fixed",bottom:0,left:0,right:0,bgcolor:"background.paper",borderTop:1,borderColor:"divider",p:3,pb:4,borderTopLeftRadius:24,borderTopRightRadius:24,boxShadow:"0 -8px 30px rgba(0,0,0,0.1)",zIndex:1e3},children:e.jsxs(E,{variant:"contained",color:"primary",fullWidth:!0,size:"large",sx:{borderRadius:4,py:2,variant:"contained",color:"primary",fontSize:"1rem",fontWeight:"bold",textTransform:"none",boxShadow:"0 8px 20px -4px rgba(242, 238, 13, 0.3)",display:"flex",justifyContent:"center",gap:1.5},onClick:y,disabled:a,children:[e.jsx(w,{name:"lock"}),a?"Processing...":`Place Order • Rs ${g.toFixed(2)}`]})})]})}export{tr as component};
