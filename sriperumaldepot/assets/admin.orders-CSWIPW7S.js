import{a8 as Ge,a as Xe,u as _e,r as a,j as e,B as n,I as D,A as ue,h as p,S as f,C as Ke,m as Ze,k as me,E as he,l as er,$ as xe,o as rr,q as m,z as tr,F as or,G as sr,y as nr,v as g,x as b,a9 as fe,w as ir}from"./index-Cp2I37WV.js";import{p as ar,a as lr}from"./printInvoice-0Z7hnYZb.js";import{O as cr}from"./OrderItem-ngo4I1yh.js";import{O as dr,a as pr}from"./OrderShippingDetails-BHgEyGr8.js";import{W as ur,R as mr,c as hr}from"./WhatsAppShareButton-IIq9cu2q.js";import{Y as xr}from"./index-AUmU2T_b.js";import{u as fr}from"./deliveryStore-DhLoDQac.js";import{C as ge}from"./Cancel-B1ZAwurh.js";import{S as ye}from"./Search-BDBvXvmT.js";import{B as l}from"./Button-BhddC0uT.js";import{T as be,L as gr}from"./TextField-DFh5Z3SN.js";import{D as H,a as Y,b as J}from"./DialogTitle-C1XPoAzT.js";import{D as je}from"./DialogContentText-Z6gPO8G6.js";import{D as V}from"./DialogActions-B-je9ZVc.js";import{L as ve}from"./ListItem-glfprn3j.js";import{L as Ce}from"./ListItemText-BqhCjFKZ.js";import{L as yr}from"./ListItemAvatar-BVgMZjQw.js";import{C as br}from"./CheckCircle-Cn5NRRkC.js";import{H as Se}from"./HourglassTop-XmYwMvNG.js";import{I as jr}from"./Inventory2-0A_WQPrr.js";import{L as vr}from"./LocalShipping-guhA_rCJ.js";import"./ShoppingCart-DD5dTHTw.js";import"./Divider-BmF7nJuL.js";import"./dividerClasses-DniQLY7G.js";import"./Person-DCpPYQWV.js";import"./Phone-Bt5g39SG.js";import"./Home-B28n4KG8.js";import"./QuantitySelector-Bx9V5BIG.js";import"./Add-C-qYGF6S.js";import"./SwitchBase-CJSetpRX.js";import"./Checkbox-ByfKq9bR.js";import"./WhatsApp-BHlUL3bd.js";import"./isMuiElement-C4u7QS8z.js";import"./listItemTextClasses-cceYQpcq.js";function Cr(G){return Ge({select:y=>y.location})}const E=nr`
    from {
        opacity: 0;
        transform: translateY(20px);
    }
    to {
        opacity: 1;
        transform: translateY(0);
    }
`;function ot(){const G=Xe(),y=_e(t=>t.user),[k,we]=a.useState([]),[De,P]=a.useState(!0),[u,ke]=a.useState("All"),[B,Pe]=a.useState(null),[Re,R]=a.useState(!1),[X,_]=a.useState(null),[ze,K]=a.useState(!1),[j,Ae]=a.useState(null),[Te,z]=a.useState(!1),[Z,ee]=a.useState(null),[A,N]=a.useState(""),{deliveryPersons:Le,fetchDeliveryPersons:Ie}=fr(),[Oe,F]=a.useState(!1),[T,L]=a.useState(""),[Q,re]=a.useState({}),te=Cr();a.useEffect(()=>{const r=new URLSearchParams(te.search).get("search");r&&(L(r),F(!0))},[te.search]);const[We,I]=a.useState(!1),[oe,$]=a.useState(""),[v,se]=a.useState(null),Ee=["All","Processing","Delivered","Cancelled"],h=async()=>{if(!y){P(!1);return}try{const t=rr(m,"orders"),r=tr(t,or("timestamp","desc")),o=(await sr(r)).docs.map(i=>({id:i.id,...i.data()}));we(o)}catch(t){console.error("Error fetching orders:",t)}finally{P(!1)}};a.useEffect(()=>{h(),Ie()},[y]);const x=k.filter(t=>{if(u!=="All"&&(t.status==="pending"?"Processing":t.status).toLowerCase()!==u.toLowerCase())return!1;if(T.trim()){const r=T.toLowerCase(),s=t.id.toLowerCase().includes(r),o=t.shippingDetails||{},i=(o.firstName?.toLowerCase()||"").includes(r)||(o.lastName?.toLowerCase()||"").includes(r),c=(o.phoneNumber||"").includes(r),d=(o.orgName?.toLowerCase()||"").includes(r),C=t.items?.some(S=>S.name.toLowerCase().includes(r));return s||i||c||d||C}return!0}),Be=async()=>{if(!y||!y.phoneNumber){alert("User phone number not found. Cannot verify identity.");return}if(oe!==y.phoneNumber){alert("Phone number does not match logged-in user.");return}const t=x;if(t.length!==0){P(!0);try{const r=t.map(async s=>{const o=g(m,"orders",s.id);v==="deliver"?s.status!=="Delivered"&&await b(o,{status:"Delivered"}):v==="delete"&&await fe(o)});await Promise.all(r),alert(`Bulk ${v==="deliver"?"Delivery":"Deletion"} Complete!`),I(!1),$(""),se(null),h()}catch(r){console.error("Bulk action error:",r),alert("Failed to perform bulk action.")}finally{P(!1)}}},ne=t=>{se(t),I(!0),$("")},ie=t=>{switch(t.toLowerCase()){case"pending":case"processing":return{label:"Processing",icon:e.jsx(Se,{fontSize:"small"}),color:"warning.main",bgcolor:"rgba(237, 108, 2, 0.1)",borderColor:"rgba(237, 108, 2, 0.2)"};case"shipped":return{label:"Shipped",icon:e.jsx(vr,{fontSize:"small"}),color:"info.main",bgcolor:"rgba(2, 136, 209, 0.1)",borderColor:"rgba(2, 136, 209, 0.2)"};case"delivered":return{label:"Delivered",icon:e.jsx(jr,{fontSize:"small"}),color:"success.main",bgcolor:"rgba(46, 125, 50, 0.1)",borderColor:"rgba(46, 125, 50, 0.2)"};case"cancelled":return{label:"Cancelled",icon:e.jsx(ge,{fontSize:"small"}),color:"error.main",bgcolor:"rgba(211, 47, 47, 0.1)",borderColor:"rgba(211, 47, 47, 0.2)"};case"delay":return{label:"Delayed",icon:e.jsx(Se,{fontSize:"small"}),color:"secondary.main",bgcolor:"rgba(156, 39, 176, 0.1)",borderColor:"rgba(156, 39, 176, 0.2)"};case"returned":return{label:"Returned",icon:e.jsx(xe,{fontSize:"small"}),color:"text.primary",bgcolor:"rgba(0, 0, 0, 0.08)",borderColor:"divider"};default:return{label:"Completed",icon:e.jsx(br,{fontSize:"small"}),color:"text.secondary",bgcolor:"action.hover",borderColor:"divider"}}},q=(t,r)=>{try{const s=g(m,"orders",t);b(s,{status:r}),h()}catch(s){console.error("Error updating order status:",s),alert("Failed to update order status = "+t)}},Ne=async(t,r,s)=>{if(!r||r<=0)return;const o=k.find(i=>i.id===t);if(o)try{const i={amount:r,timestamp:new Date,method:s},c=[...o.payments||[],i],d=(o.paidAmount||0)+r,C=g(m,"orders",t);await b(C,{payments:c,paidAmount:d}),re(S=>({...S,[t]:""})),h()}catch(i){console.error("Error adding payment:",i),alert("Failed to add payment")}},Fe=async t=>{try{const r=g(m,"orders",t);await b(r,{isClosed:!0}),h()}catch(r){console.error("Error closing delay:",r),alert("Failed to close delayed order")}},Qe=async()=>{if(X)try{const t=g(m,"orders",X);await fe(t),R(!1),_(null),alert("Order deleted successfully"),h()}catch(t){console.error("Error deleting order:",t),alert("Failed to delete order")}},$e=t=>{_(t),R(!0)},qe=t=>{if(!t)return"Just now";const r=t.toDate(),o=new Date().getTime()-r.getTime(),i=Math.floor(o/(1e3*60*60*24));return i===0?`Today, ${r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:i===1?`Yesterday, ${r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},Me=t=>{Pe(B===t?null:t)},Ue=t=>{const r=k.find(s=>s.id===t);ar(r)},He=t=>{const r=k.find(s=>s.id===t);lr(r)},Ye=t=>{Ae(t),K(!0)},Je=async t=>{if(j)try{const r=hr(t,j.manualAddons,j.deliveryAmount),s=t.every(c=>(c.returnedQuantity||0)>=c.quantity),o={...r,items:t};s&&(o.status="Returned");const i=g(m,"orders",j.id);await b(i,o);try{for(let c=0;c<t.length;c++){const d=t[c],C=j.items[c],S=d.returnedQuantity||0,Ve=C.returnedQuantity||0,M=S-Ve;if(M>0){const ce=g(m,"products",String(d.id)),de=await ir(ce);if(de.exists()){const pe=de.data(),O={};if(d.selectedSize){const W=pe.sizes||[],U=W.findIndex(w=>w.label===d.selectedSize.label);if(U!==-1){const w={...W[U]};w.returnStock=(w.returnStock||0)+M,W[U]=w,O.sizes=W}}else O.returnStock=(pe.returnStock||0)+M;Object.keys(O).length>0&&await b(ce,O)}}}}catch(c){console.error("Error updating return stock:",c)}alert("Return processed successfully"),h()}catch(r){throw console.error("Error processing return:",r),r}},ae=async t=>{if(Z)try{const r=g(m,"orders",Z.id);await b(r,{deliveryPersonId:t?.id||null,deliveryPersonName:t?.name||null,deliveryPersonPhone:t?.phone||null,deliveryPersonVehicle:t?.vehicleNumber||null}),z(!1),ee(null),alert(t?"Driver assigned successfully":"Driver assignment cleared"),h()}catch(r){console.error("Error assigning/clearing driver:",r),alert("Failed to update driver assignment")}},le=()=>{const t=Le.filter(s=>s.status==="active");if(!A)return t;const r=A.toLowerCase();return t.map(s=>{let o=0;const i=(s.name||"").toLowerCase(),c=(s.phone||"").toLowerCase(),d=(s.vehicleNumber||"").toLowerCase();return i===r?o+=100:i.startsWith(r)?o+=50:i.includes(r)&&(o+=20),c===r?o+=90:c.startsWith(r)?o+=40:c.includes(r)&&(o+=15),d===r?o+=80:d.startsWith(r)?o+=30:d.includes(r)&&(o+=10),{driver:s,score:o}}).filter(s=>s.score>0).sort((s,o)=>o.score-s.score).map(s=>s.driver)};return e.jsxs(n,{sx:{pb:10,bgcolor:"background.default",minHeight:"100vh",color:"text.primary"},children:[e.jsx(n,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:"background.default",borderBottom:1,borderColor:"divider"},children:e.jsx(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",px:2,height:60},children:Oe?e.jsxs(n,{sx:{display:"flex",alignItems:"center",flex:1,gap:1},children:[e.jsx(D,{onClick:()=>{F(!1),L("")},children:e.jsx(ue,{})}),e.jsx("input",{autoFocus:!0,placeholder:"Search orders...",style:{flex:1,border:"none",outline:"none",background:"transparent",fontSize:"1rem",color:"inherit"},value:T,onChange:t=>L(t.target.value)}),T&&e.jsx(D,{size:"small",onClick:()=>L(""),children:e.jsx(ge,{fontSize:"small"})})]}):e.jsxs(e.Fragment,{children:[e.jsx(D,{sx:{ml:-1},onClick:()=>G({to:"/shop"}),children:e.jsx(ue,{})}),e.jsxs(p,{variant:"h6",sx:{fontWeight:"bold"},children:["Estimate"," History"]}),e.jsx(D,{sx:{mr:-1},onClick:()=>F(!0),children:e.jsx(ye,{})})]})})}),e.jsxs(n,{sx:{p:2},children:[e.jsx(n,{sx:{display:"flex",gap:1.5,overflowX:"auto",p:2,mb:2,"&::-webkit-scrollbar":{display:"none"},animation:`${E} 0.6s ease-out forwards`},children:Ee.map(t=>e.jsx(l,{variant:u===t?"contained":"outlined",onClick:()=>ke(t),sx:{flexShrink:0,borderRadius:50,textTransform:"none",fontWeight:"bold",fontSize:"0.875rem",px:3,py:1,bgcolor:u===t?"primary.main":"background.paper",color:u===t?"black":"text.secondary",borderColor:u===t?"primary.main":"divider",boxShadow:u===t?"0 4px 12px rgba(242, 215, 13, 0.2)":"none","&:hover":{bgcolor:u===t?"primary.main":"action.hover",borderColor:u===t?"primary.main":"divider"}},children:t},t))}),e.jsxs(f,{direction:"row",spacing:2,sx:{px:2,mb:2},justifyContent:"flex-end",children:[e.jsxs(l,{size:"small",variant:"outlined",color:"success",onClick:()=>ne("deliver"),disabled:x.length===0,children:["Deliver All (",x.length,")"]}),e.jsxs(l,{size:"small",variant:"outlined",color:"error",onClick:()=>ne("delete"),disabled:x.length===0,children:["Delete All (",x.length,")"]})]}),De?e.jsx(n,{sx:{display:"flex",justifyContent:"center",py:8},children:e.jsx(Ke,{})}):x.length===0?e.jsx(n,{sx:{textAlign:"center",py:8,animation:`${E} 0.6s ease-out forwards`},children:e.jsx(p,{color:"text.secondary",children:"No orders found."})}):e.jsx(n,{sx:{width:"100%",animation:`${E} 0.6s ease-out forwards`,animationDelay:"0.1s"},children:e.jsx(xr,{useWindowScroll:!0,increaseViewportBy:300,data:x,itemContent:(t,r)=>{const s=r.orderType==="delay"&&!r.isClosed?ie("delay"):ie(r.status);return e.jsx(n,{sx:{pb:2},children:e.jsx(Ze,{sx:{p:2,borderRadius:3,border:1,borderColor:"divider",boxShadow:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",transition:"all 0.2s","&:active":{transform:"scale(0.98)"}},onClick:()=>Me(r.id),children:e.jsxs(n,{sx:{width:"100%"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2},children:[e.jsx(me,{sx:{width:48,height:48,bgcolor:s.bgcolor,color:s.color,border:1,borderColor:s.borderColor},children:s.icon}),e.jsxs(n,{children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1},children:[e.jsxs(p,{variant:"body2",sx:{fontWeight:"bold"},children:["#",r.id.slice(0,5).toUpperCase()]}),r.items?.some(o=>(o.returnedQuantity||0)>0)&&e.jsx(n,{sx:{px:.75,py:.25,borderRadius:1,bgcolor:r.items.every(o=>(o.returnedQuantity||0)>=o.quantity)?"error.main":"warning.main",color:"white",fontSize:"0.65rem",fontWeight:"bold",lineHeight:1},children:r.items.every(o=>(o.returnedQuantity||0)>=o.quantity)?"RETURNED":"PARTIAL"})]}),e.jsxs(p,{variant:"caption",sx:{color:"text.secondary",mt:.5,display:"block"},children:[qe(r.timestamp),r.deliveryPersonName&&` • Driver: ${r.deliveryPersonName}`]})]})]}),e.jsxs(n,{sx:{textAlign:"right",display:"flex",alignItems:"center",gap:1},children:[e.jsxs(n,{children:[e.jsxs(p,{variant:"body2",sx:{fontWeight:"bold"},children:["₹",r.total.toLocaleString()]}),e.jsx(n,{sx:{display:"inline-block",mt:.5,px:1.5,py:.25,borderRadius:10,bgcolor:s.bgcolor,color:s.color,fontSize:"0.625rem",fontWeight:"bold",textTransform:"uppercase",letterSpacing:.5},children:s.label})]}),e.jsx(D,{size:"small",sx:{transform:B===r.id?"rotate(180deg)":"none",transition:"transform 0.3s"},children:e.jsx(he,{})})]})]}),e.jsxs(er,{in:B===r.id,timeout:"auto",unmountOnExit:!0,children:[e.jsx(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:e.jsx(dr,{order:r})}),e.jsxs(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[e.jsx(l,{size:"small",variant:"outlined",color:"error",onClick:o=>{o.stopPropagation(),$e(r.id)},children:"Delete"}),e.jsx(l,{variant:"outlined",color:"secondary",size:"small",onClick:()=>Fe(r.id),sx:{borderRadius:2,textTransform:"none",fontWeight:"bold"},children:"Close Delay"})]}),e.jsx(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:e.jsx(pr,{shippingDetails:r.shippingDetails||{}})}),e.jsxs(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[e.jsxs(p,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",mb:1.5,display:"block",textTransform:"uppercase",letterSpacing:.5},children:["Estimate"," Items"]}),e.jsx(f,{spacing:2,children:r.items?.map((o,i)=>e.jsx(cr,{item:o},i))}),e.jsxs(f,{direction:"row",spacing:1,sx:{mt:2},children:[e.jsx(l,{size:"small",variant:"outlined",color:"success",onClick:o=>{o.stopPropagation(),q(r.id,"Delivered")},children:"Delivered"}),e.jsx(l,{size:"small",variant:"outlined",color:"error",onClick:o=>{o.stopPropagation(),q(r.id,"Cancelled")},children:"Cancelled"}),e.jsx(l,{size:"small",variant:"outlined",color:"warning",onClick:o=>{o.stopPropagation(),q(r.id,"pending")},children:"Processing"})]})]}),r.orderType==="delay"&&!r.isClosed&&e.jsxs(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[e.jsxs(p,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",mb:1.5,display:"block",textTransform:"uppercase",letterSpacing:.5},children:["Payment Management (",r.paidAmount>=r.total?"Fully Paid":`Balance: ₹${(r.total-(r.paidAmount||0)).toFixed(2)}`,")"]}),r.payments?.length>0&&e.jsx(f,{spacing:1,sx:{mb:2},children:r.payments.map((o,i)=>e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",bgcolor:"action.hover",p:1,borderRadius:1.5,border:1,borderColor:"divider"},children:[e.jsxs(p,{variant:"caption",sx:{fontWeight:500},children:[o.timestamp?.seconds?new Date(o.timestamp.seconds*1e3).toLocaleDateString():"Just now"," - ",o.method]}),e.jsxs(p,{variant:"caption",sx:{fontWeight:"bold",color:"success.main"},children:["+₹",o.amount.toFixed(2)]})]},i))}),e.jsxs(n,{sx:{display:"flex",gap:1,alignItems:"center"},onClick:o=>o.stopPropagation(),children:[e.jsx(be,{size:"small",placeholder:"Amount",type:"number",value:Q[r.id]||"",onChange:o=>re(i=>({...i,[r.id]:o.target.value})),sx:{flex:1,"& .MuiOutlinedInput-root":{borderRadius:2}}}),e.jsx(l,{variant:"contained",size:"small",onClick:()=>Ne(r.id,Number(Q[r.id]),"Cash"),disabled:!Q[r.id],sx:{borderRadius:2,textTransform:"none",fontWeight:"bold"},children:"Add"})]})]}),e.jsxs(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[e.jsxs(f,{direction:"row",spacing:1,sx:{mt:2},justifyContent:"space-between",children:[e.jsx(f,{direction:"row",spacing:1,children:e.jsx(l,{size:"small",variant:"contained",color:"success",onClick:o=>{o.stopPropagation(),Ue(r.id)},children:"Print"})}),e.jsx(n,{onClick:o=>o.stopPropagation(),children:e.jsx(ur,{order:r})}),e.jsx(f,{direction:"row",spacing:1,children:e.jsx(l,{size:"small",variant:"outlined",color:"warning",startIcon:e.jsx(xe,{}),onClick:o=>{o.stopPropagation(),Ye(r)},children:"Return"})})]}),e.jsxs(f,{direction:"row",spacing:1,sx:{mt:2},children:[e.jsx(l,{size:"small",variant:"outlined",color:"primary",onClick:o=>{o.stopPropagation(),ee(r),z(!0)},children:"Delivery"}),e.jsx(l,{size:"small",variant:"outlined",color:"primary",onClick:o=>{o.stopPropagation(),He(r.id)},children:"Challan"})]})]})]})]})},r.id)})}})}),e.jsx(n,{sx:{mt:4,textAlign:"center",animation:`${E} 0.6s ease-out forwards`,animationDelay:"0.3s"},children:e.jsx(l,{size:"small",endIcon:e.jsx(he,{}),sx:{color:"primary.main",fontWeight:"bold",fontSize:"0.75rem",textTransform:"uppercase",letterSpacing:1,"&:hover":{bgcolor:"transparent",color:"primary.dark"}},children:"Load More"})})]}),e.jsxs(H,{open:Re,onClose:()=>R(!1),PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsxs(Y,{sx:{fontWeight:"bold"},children:["Delete ","Estimate","?"]}),e.jsx(J,{children:e.jsx(je,{children:"Are you sure you want to delete this order? This action is permanent and cannot be undone."})}),e.jsxs(V,{sx:{p:2},children:[e.jsx(l,{onClick:()=>R(!1),color:"inherit",sx:{fontWeight:"bold"},children:"Cancel"}),e.jsx(l,{onClick:Qe,variant:"contained",color:"error",sx:{fontWeight:"bold",borderRadius:2},children:"Delete"})]})]}),e.jsxs(H,{open:We,onClose:()=>I(!1),PaperProps:{sx:{borderRadius:3,p:1}},children:[e.jsxs(Y,{sx:{fontWeight:"bold"},children:["Confirm Bulk ",v==="deliver"?"Delivery":"Deletion"]}),e.jsxs(J,{children:[e.jsxs(je,{sx:{mb:2},children:["Please enter your phone number to confirm this bulk action.",e.jsx("br",{}),e.jsxs("strong",{children:["This will affect ",x.length," orders."]})]}),e.jsx("input",{type:"tel",placeholder:"Enter your phone number",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid #ccc",fontSize:"1rem",outline:"none"},value:oe,onChange:t=>$(t.target.value)})]}),e.jsxs(V,{sx:{p:2},children:[e.jsx(l,{onClick:()=>I(!1),color:"inherit",sx:{fontWeight:"bold"},children:"Cancel"}),e.jsxs(l,{onClick:Be,variant:"contained",color:v==="delete"?"error":"primary",sx:{fontWeight:"bold",borderRadius:2},children:["Confirm ",v==="deliver"?"Delivery":"Deletion"]})]})]}),e.jsx(mr,{open:ze,onClose:()=>K(!1),order:j,onSave:Je}),e.jsxs(H,{open:Te,onClose:()=>{z(!1),N("")},PaperProps:{sx:{borderRadius:3,maxWidth:400,width:"90%"}},children:[e.jsx(Y,{sx:{fontWeight:"bold"},children:"Assign Driver"}),e.jsxs(J,{sx:{p:0},children:[e.jsx(n,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:e.jsx(be,{fullWidth:!0,size:"small",placeholder:"Search name, phone, or vehicle...",value:A,onChange:t=>N(t.target.value),InputProps:{startAdornment:e.jsx(ye,{sx:{mr:1,color:"text.secondary"}}),sx:{borderRadius:2}}})}),e.jsxs(gr,{sx:{py:0,maxHeight:400,overflow:"auto"},children:[e.jsx(ve,{component:"div",onClick:()=>ae(null),sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},borderBottom:1,borderColor:"divider",py:1.5},children:e.jsx(Ce,{primary:"None (Clear)",primaryTypographyProps:{color:"text.secondary"}})}),le().map(t=>e.jsxs(ve,{component:"div",onClick:()=>ae(t),sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},borderBottom:1,borderColor:"divider",py:2},children:[e.jsx(yr,{children:e.jsx(me,{sx:{bgcolor:"primary.main",color:"black"},children:t.name.charAt(0).toUpperCase()})}),e.jsx(Ce,{primary:t.name,secondary:`${t.vehicleNumber||"No vehicle"} • ${t.phone}`,primaryTypographyProps:{fontWeight:"bold"}})]},t.id)),le().length===0&&e.jsx(n,{sx:{p:4,textAlign:"center"},children:e.jsx(p,{variant:"body2",color:"text.secondary",children:A?"No matching drivers found.":"No active drivers found."})})]})]}),e.jsx(V,{sx:{p:2},children:e.jsx(l,{onClick:()=>{z(!1),N("")},color:"inherit",sx:{fontWeight:"bold"},children:"Cancel"})})]})]})}export{ot as component};
