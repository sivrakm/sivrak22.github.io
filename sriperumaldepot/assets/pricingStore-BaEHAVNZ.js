import{y as l,Z as i,G as s,ad as d,ae as u,a0 as g,_ as f,F as n,E as y,N as p}from"./index-Bkxv6Uxe.js";const R=l((o,t)=>({rules:[],deliveryConfig:{enabled:!1,amount:0},isLoading:!1,error:null,fetchRules:async()=>{o({isLoading:!0,error:null});try{const e=n(s,"pricing_rules"),c=(await p(e)).docs.map(a=>({...a.data(),id:a.id}));o({rules:c,isLoading:!1})}catch(e){console.error("Error fetching pricing rules:",e),o({error:e.message,isLoading:!1})}},addRule:async e=>{try{const r=n(s,"pricing_rules");await y(r,e),t().fetchRules()}catch(r){console.error("Error adding rule:",r)}},updateRule:async e=>{try{const{id:r,...c}=e,a=i(s,"pricing_rules",r);await f(a,c),t().fetchRules()}catch(r){console.error("Error updating rule:",r)}},deleteRule:async e=>{try{const r=i(s,"pricing_rules",e);await g(r),o(c=>({rules:c.rules.filter(a=>a.id!==e)}))}catch(r){console.error("Error deleting rule:",r)}},fetchDeliveryConfig:async()=>{try{const e=i(s,"settings","delivery"),r=await u(e);r.exists()&&o({deliveryConfig:r.data()})}catch(e){console.error("Error fetching delivery config:",e)}},updateDeliveryConfig:async e=>{try{const r=i(s,"settings","delivery");await d(r,e),o({deliveryConfig:e})}catch(r){console.error("Error updating delivery config:",r)}}}));export{R as u};
