import{b as I,g as C,r as k,c as D,j as v,s as S,e as w,f,h as R,m as T,i as z,t as M,L as g,z as l,N as B,M as A,y,x,F as P}from"./index-Cfb1kZUX.js";import{P as L,c as N}from"./Button-Dg8yrKBL.js";function j(o){return I("MuiAppBar",o)}C("MuiAppBar",["root","positionFixed","positionAbsolute","positionSticky","positionStatic","positionRelative","colorDefault","colorPrimary","colorSecondary","colorInherit","colorTransparent","colorError","colorInfo","colorSuccess","colorWarning"]);const $=o=>{const{color:r,position:t,classes:a}=o,s={root:["root",`color${f(r)}`,`position${f(t)}`]};return R(s,j,a)},m=(o,r)=>o?`${o?.replace(")","")}, ${r})`:r,U=S(L,{name:"MuiAppBar",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:t}=o;return[r.root,r[`position${f(t.position)}`],r[`color${f(t.color)}`]]}})(T(({theme:o})=>({display:"flex",flexDirection:"column",width:"100%",boxSizing:"border-box",flexShrink:0,variants:[{props:{position:"fixed"},style:{position:"fixed",zIndex:(o.vars||o).zIndex.appBar,top:0,left:"auto",right:0,"@media print":{position:"absolute"}}},{props:{position:"absolute"},style:{position:"absolute",zIndex:(o.vars||o).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"sticky"},style:{position:"sticky",zIndex:(o.vars||o).zIndex.appBar,top:0,left:"auto",right:0}},{props:{position:"static"},style:{position:"static"}},{props:{position:"relative"},style:{position:"relative"}},{props:{color:"inherit"},style:{"--AppBar-color":"inherit"}},{props:{color:"default"},style:{"--AppBar-background":o.vars?o.vars.palette.AppBar.defaultBg:o.palette.grey[100],"--AppBar-color":o.vars?o.vars.palette.text.primary:o.palette.getContrastText(o.palette.grey[100]),...o.applyStyles("dark",{"--AppBar-background":o.vars?o.vars.palette.AppBar.defaultBg:o.palette.grey[900],"--AppBar-color":o.vars?o.vars.palette.text.primary:o.palette.getContrastText(o.palette.grey[900])})}},...Object.entries(o.palette).filter(z(["contrastText"])).map(([r])=>({props:{color:r},style:{"--AppBar-background":(o.vars??o).palette[r].main,"--AppBar-color":(o.vars??o).palette[r].contrastText}})),{props:r=>r.enableColorOnDark===!0&&!["inherit","transparent"].includes(r.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)"}},{props:r=>r.enableColorOnDark===!1&&!["inherit","transparent"].includes(r.color),style:{backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...o.applyStyles("dark",{backgroundColor:o.vars?m(o.vars.palette.AppBar.darkBg,"var(--AppBar-background)"):null,color:o.vars?m(o.vars.palette.AppBar.darkColor,"var(--AppBar-color)"):null})}},{props:{color:"transparent"},style:{"--AppBar-background":"transparent","--AppBar-color":"inherit",backgroundColor:"var(--AppBar-background)",color:"var(--AppBar-color)",...o.applyStyles("dark",{backgroundImage:"none"})}}]}))),H=k.forwardRef(function(r,t){const a=D({props:r,name:"MuiAppBar"}),{className:s,color:e="primary",enableColorOnDark:c=!1,position:n="fixed",...u}=a,p={...a,color:e,position:n,enableColorOnDark:c},d=$(p);return v.jsx(U,{square:!0,component:"header",ownerState:p,elevation:4,className:w(d.root,s,n==="fixed"&&"mui-fixed"),ref:t,...u})});function q(o){return I("MuiToolbar",o)}C("MuiToolbar",["root","gutters","regular","dense"]);const F=o=>{const{classes:r,disableGutters:t,variant:a}=o;return R({root:["root",!t&&"gutters",a]},q,r)},E=S("div",{name:"MuiToolbar",slot:"Root",overridesResolver:(o,r)=>{const{ownerState:t}=o;return[r.root,!t.disableGutters&&r.gutters,r[t.variant]]}})(T(({theme:o})=>({position:"relative",display:"flex",alignItems:"center",variants:[{props:({ownerState:r})=>!r.disableGutters,style:{paddingLeft:o.spacing(2),paddingRight:o.spacing(2),[o.breakpoints.up("sm")]:{paddingLeft:o.spacing(3),paddingRight:o.spacing(3)}}},{props:{variant:"dense"},style:{minHeight:48}},{props:{variant:"regular"},style:o.mixins.toolbar}]}))),W=k.forwardRef(function(r,t){const a=D({props:r,name:"MuiToolbar"}),{className:s,component:e="div",disableGutters:c=!1,variant:n="regular",...u}=a,p={...a,component:e,disableGutters:c,variant:n},d=F(p);return v.jsx(E,{as:e,className:w(d.root,s),ref:t,ownerState:p,...u})}),J=N(v.jsx("path",{d:"M17.77 3.77 16 2 6 12l10 10 1.77-1.77L9.54 12z"})),K=M(o=>({categories:[],activeCategory:"All Items",products:[],categoryItems:[],isLoading:!1,error:null,setActiveCategory:r=>o({activeCategory:r}),fetchProducts:async()=>{o({isLoading:!0,error:null});try{const r=y(l,"products"),a=(await P(r)).docs.map(e=>({...e.data(),id:e.id})),s=await G();o({categoryItems:s}),o({categories:["All Items",...s.map(e=>e.name)]}),o({products:a,isLoading:!1})}catch(r){console.error("Error fetching products:",r),o({error:r.message,isLoading:!1})}},pushProducttoDb:async r=>{const t=y(l,"products");await x(t,r)},updateProduct:async r=>{const{id:t,...a}=r;if(!t||typeof t!="string"){console.error("Cannot update product without a valid Firestore ID string:",t);return}const s=g(l,"products",t);await A(s,a),o(e=>({products:e.products.map(c=>c.id===t?{...c,...a}:c)}))},deleteProduct:async r=>{const t=String(r),a=g(l,"products",t);await B(a),o(s=>({products:s.products.filter(e=>e.id!==r)}))},pushCategorytoDb:async r=>{const t=y(l,"categories");await x(t,r)},updateCategory:async r=>{const{id:t,...a}=r;if(!t||typeof t!="string"){console.error("Cannot update category without a valid Firestore ID string:",t);return}const s=g(l,"categories",t);await A(s,a),o(e=>{const c=e.categoryItems.map(i=>i.id===t?{...i,...a}:i),n=e.products.map(i=>i.id===t?{...i,...a}:i),p=e.categoryItems.find(i=>i.id===t)?.name,d=a.name;let b=e.categories;return p&&d&&p!==d&&(b=e.categories.map(i=>i===p?d:i)),{categoryItems:c,products:n,categories:b}})},deleteCategory:async r=>{const t=String(r),a=g(l,"categories",t);await B(a),o(s=>{const c=s.categoryItems.find(n=>n.id===r)?.name;return{categoryItems:s.categoryItems.filter(n=>n.id!==r),products:s.products.filter(n=>n.id!==r),categories:s.categories.filter(n=>n!==c)}})}})),G=async()=>{const o=y(l,"categories");return(await P(o)).docs.map(a=>({...a.data(),id:a.id}))};export{H as A,W as T,J as a,K as u};
