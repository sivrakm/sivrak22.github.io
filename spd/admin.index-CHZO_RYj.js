import{f as j,j as e,a as Le,r as d,B as n,k as T,h as c,A as Te,a1 as ee,C as Ne,m as F,S as R,I as Ae,E as Ee,l as Be,p as W,q as g,D as He,G as Me,H as L,v as B,x as H}from"./index-SpP8DWQw.js";import{Y as Ue}from"./index-DYS6evUV.js";import{p as Ve,a as Fe}from"./printInvoice-Bb1PbcHs.js";import{u as $e}from"./deliveryStore-Dl6B2yfC.js";import{O as qe}from"./OrderItem-5q4hnrlM.js";import{O as Qe,a as Je}from"./OrderShippingDetails-C6p2lJrE.js";import{W as Ge,R as Ye,C as _e,c as Ke}from"./WhatsAppShareButton-CIIXveXb.js";import{H as Xe}from"./Header-CjrgT7Xq.js";import{P as Ze}from"./Page-DqF7ZZrw.js";import{G as i}from"./Grid-CdM14__b.js";import{S as re}from"./ShoppingCart-X6RY4WkV.js";import{I as er}from"./Inventory-BjE7M9q6.js";import{I as oe}from"./Inventory2-CD10EZLx.js";import{L as te}from"./LocalShipping-CwmZBZtX.js";import{N as rr}from"./NotificationsActive-BPcnFlEK.js";import{C as or}from"./CloudUpload-BSa3uaFZ.js";import{B as f}from"./Button-DGEDUHi2.js";import{C as tr}from"./Chip-x4b9dzV_.js";import{P as sr}from"./Print-hc_GfZQH.js";import{D as nr,a as ir,b as ar}from"./DialogTitle-CwsgyE-M.js";import{T as lr,L as cr}from"./TextField-MmvaxMQp.js";import{S as dr}from"./Search-BWnn7XH3.js";import{L as se}from"./ListItem-x0GMwo09.js";import{L as ne}from"./ListItemText-Cigt6mZy.js";import{L as pr}from"./ListItemAvatar-Daf1WsTl.js";import{D as xr}from"./DialogActions-BpG21hdT.js";import{C as ie}from"./CardContent-B7yWCm20.js";import{C as mr}from"./CheckCircle-DYz0gMor.js";import{C as hr}from"./Cancel-DcCTWsoA.js";import{H as ur}from"./HourglassTop-Dgh4V2Cc.js";import"./Divider-LsEKU9d1.js";import"./dividerClasses-CUrjvUQ9.js";import"./Person-MNOZu-U6.js";import"./Phone-DQ-olJJ5.js";import"./Home-DqlZi4E8.js";import"./Business-BrA8d8E6.js";import"./InputAdornment-Dvyl87ic.js";import"./QuantitySelector-lNEfAcls.js";import"./Add-BZpUlFdw.js";import"./SwitchBase-JJBpehKz.js";import"./Checkbox-TNbwaxjZ.js";import"./WhatsApp-B0m1_bJg.js";import"./isMuiElement-Ddcs7kQk.js";import"./listItemTextClasses-DfDm7pH3.js";const gr=j([e.jsx("path",{d:"M17 11c.34 0 .67.04 1 .09V6.27L10.5 3 3 6.27v4.91c0 4.54 3.2 8.79 7.5 9.82.55-.13 1.08-.32 1.6-.55-.69-.98-1.1-2.17-1.1-3.45 0-3.31 2.69-6 6-6"},"0"),e.jsx("path",{d:"M17 13c-2.21 0-4 1.79-4 4s1.79 4 4 4 4-1.79 4-4-1.79-4-4-4m0 1.38c.62 0 1.12.51 1.12 1.12s-.51 1.12-1.12 1.12-1.12-.51-1.12-1.12.5-1.12 1.12-1.12m0 5.37c-.93 0-1.74-.46-2.24-1.17.05-.72 1.51-1.08 2.24-1.08s2.19.36 2.24 1.08c-.5.71-1.31 1.17-2.24 1.17"},"1")]),fr=j([e.jsx("path",{d:"m12 2-5.5 9h11z"},"0"),e.jsx("circle",{cx:"17.5",cy:"17.5",r:"4.5"},"1"),e.jsx("path",{d:"M3 13.5h8v8H3z"},"2")]),jr=j(e.jsx("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M17 13l-5 5-5-5h3V9h4v4z"})),M=j(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1.41 16.09V20h-2.67v-1.93c-1.71-.36-3.16-1.46-3.27-3.4h1.96c.1 1.05.82 1.87 2.65 1.87 1.96 0 2.4-.98 2.4-1.59 0-.83-.44-1.61-2.67-2.14-2.48-.6-4.18-1.62-4.18-3.67 0-1.72 1.39-2.84 3.11-3.21V4h2.67v1.95c1.86.45 2.79 1.86 2.85 3.39H14.3c-.05-1.11-.64-1.87-2.22-1.87-1.5 0-2.4.68-2.4 1.64 0 .84.65 1.39 2.67 1.91s4.18 1.39 4.18 3.91c-.01 1.83-1.38 2.83-3.12 3.16"})),U=j(e.jsx("path",{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5s-3 1.34-3 3 1.34 3 3 3m-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3m0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5m8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5"})),br=j(e.jsx("path",{d:"M6.99 11 3 15l3.99 4v-3H14v-2H6.99zM21 9l-3.99-4v3H10v2h7.01v3z"})),yr=j(e.jsx("path",{d:"m16 6 2.29 2.29-4.88 4.88-4-4L2 16.59 3.41 18l6-6 4 4 6.3-6.29L22 12V6z"}));function mo(){const a=Le(),[m,C]=d.useState([]),[v,b]=d.useState(!0),[ae,le]=d.useState(0),[ce,de]=d.useState(0),[pe,xe]=d.useState(0),[$,me]=d.useState(0),[D,he]=d.useState(null),[ue,q]=d.useState(!1),[S,ge]=d.useState(null),[fe,z]=d.useState(!1),[Q,J]=d.useState(null),[O,N]=d.useState(""),[je,A]=d.useState(!1),[G,Y]=d.useState(null),{deliveryPersons:be,fetchDeliveryPersons:ye}=$e(),w=async()=>{try{const o=W(g,"orders"),r=He(o,Me("timestamp","desc")),t=(await L(r)).docs.map(l=>({id:l.id,...l.data()})),p=t.filter(l=>l.status==="pending"),h=t.filter(l=>l.orderType==="delay"&&!l.isClosed);C(p);const u=p.length,E=p.reduce((l,P)=>l+(P.total||0),0),I=h.reduce((l,P)=>{const Z=(P.total||0)-(P.paidAmount||0);return l+(Z>0?Z:0)},0);de(u),le(Number(E.toFixed(2))),xe(Number(I.toFixed(2)));const k=W(g,"products"),We=(await L(k)).docs.map(l=>l.data()).filter(l=>l.stockTrigger&&(l.stock||0)+(l.returnStock||0)<(l.triggerBelow||0)).length;me(We)}catch(o){console.error("Error fetching dashboard data:",o)}},Ce=o=>{ge(o),q(!0)},ve=async o=>{if(S)try{const r=Ke(o,S.manualAddons,S.deliveryAmount),s=B(g,"orders",S.id);await H(s,r),alert("Return processed successfully"),w()}catch(r){throw console.error("Error processing return:",r),r}},Se=o=>{if(!o)return"Just now";const r=o.toDate(),t=new Date().getTime()-r.getTime(),p=Math.floor(t/(1e3*60*60*24));return p===0?`Today, ${r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:p===1?`Yesterday, ${r.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}`:r.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},we=o=>{he(D===o?null:o)},ke=o=>{const r=m.find(s=>s.id===o);Ve(r)},De=o=>{const r=m.find(s=>s.id===o);Fe(r)},_=async o=>{if(Q)try{const r=B(g,"orders",Q.id);await H(r,{deliveryPersonId:o?.id||null,deliveryPersonName:o?.name||null,deliveryPersonPhone:o?.phone||null,deliveryPersonVehicle:o?.vehicleNumber||null}),z(!1),J(null),alert(o?"Driver assigned successfully":"Driver assignment cleared"),w()}catch(r){console.error("Error assigning/clearing driver:",r),alert("Failed to update driver assignment")}},K=()=>{const o=be.filter(s=>s.status==="active");if(!O)return o;const r=O.toLowerCase();return o.map(s=>{let t=0;const p=(s.name||"").toLowerCase(),h=(s.phone||"").toLowerCase(),u=(s.vehicleNumber||"").toLowerCase();return p===r?t+=100:p.startsWith(r)?t+=50:p.includes(r)&&(t+=20),h===r?t+=90:h.startsWith(r)?t+=40:h.includes(r)&&(t+=15),u===r?t+=80:u.startsWith(r)?t+=30:u.includes(r)&&(t+=10),{driver:s,score:t}}).filter(s=>s.score>0).sort((s,t)=>t.score-s.score).map(s=>s.driver)},ze=async o=>{if(G)try{const r=B(g,"orders",G.id),s={firstName:o.name||"",orgName:o.organisation||"",address:o.address||"",zip:o.zip||"",city:o.city||"",phoneNumber:o.phone||""};await H(r,{shippingDetails:s}),A(!1),Y(null),w()}catch(r){console.error("Error updating customer:",r),alert("Failed to update customer")}},Oe=o=>{Y(o),A(!0)},Ie=async()=>{try{b(!0);const o=W(g,"products"),r=W(g,"categories"),[s,t]=await Promise.all([L(o),L(r)]),p=s.docs.map(y=>({id:y.id,...y.data()})),h=t.docs.map(y=>({id:y.id,...y.data()})),u={products:p,categories:h,generatedAt:new Date().toISOString()},E=new Blob([JSON.stringify(u,null,2)],{type:"application/json"}),I=URL.createObjectURL(E),k=document.createElement("a");k.href=I,k.download="offline_catalog.json",k.click(),URL.revokeObjectURL(I),alert('Catalog exported! Please save this file to the "public/assets" folder of your project to update offline data.')}catch(o){console.error("Error exporting catalog:",o),alert("Failed to export catalog")}finally{b(!1)}},[X,Pe]=d.useState(null);d.useEffect(()=>{b(!0),w().finally(()=>b(!1)),ye(),fetch("offline_catalog.json").then(r=>r.ok?r.json():null).then(r=>{r&&r.generatedAt&&Pe(new Date(r.generatedAt).toLocaleString())}).catch(()=>console.log("No offline backup found"));const o=setInterval(w,3e4);return()=>clearInterval(o)},[]);const Re=o=>{switch(o?.toLowerCase()){case"pending":case"processing":return{label:"Processing",icon:e.jsx(ur,{fontSize:"small"}),color:"warning.main",bgcolor:"rgba(237, 108, 2, 0.1)",borderColor:"rgba(237, 108, 2, 0.2)"};case"shipped":return{label:"Shipped",icon:e.jsx(te,{fontSize:"small"}),color:"info.main",bgcolor:"rgba(2, 136, 209, 0.1)",borderColor:"rgba(2, 136, 209, 0.2)"};case"delivered":return{label:"Delivered",icon:e.jsx(oe,{fontSize:"small"}),color:"success.main",bgcolor:"rgba(46, 125, 50, 0.1)",borderColor:"rgba(46, 125, 50, 0.2)"};case"cancelled":return{label:"Cancelled",icon:e.jsx(hr,{fontSize:"small"}),color:"error.main",bgcolor:"rgba(211, 47, 47, 0.1)",borderColor:"rgba(211, 47, 47, 0.2)"};default:return{label:o||"Unknown",icon:e.jsx(mr,{fontSize:"small"}),color:"text.secondary",bgcolor:"action.hover",borderColor:"divider"}}};return e.jsxs(n,{sx:{pb:10,bgcolor:"background.default",minHeight:"100vh",color:"text.primary"},children:[e.jsxs(n,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:"background.default",borderBottom:1,borderColor:"divider"},children:[e.jsx(Xe,{title:"Admin Portal",icon:e.jsx(T,{sx:{bgcolor:"secondary.main"},children:e.jsx(gr,{})})}),e.jsxs(n,{sx:{px:3,pb:2},children:[e.jsxs(c,{variant:"h5",sx:{fontWeight:"bold"},onClick:()=>a({to:"/shop"}),children:[e.jsx(Te,{})," Back to Store"]}),e.jsx(c,{variant:"body2",color:"text.secondary",children:"Overview of your store performance"})]})]}),e.jsxs(Ze,{children:[e.jsx(n,{sx:{px:2,py:2},children:e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{size:{xs:12,sm:12,md:4,lg:4},children:e.jsx(V,{icon:e.jsx(yr,{}),label:"Pending Money",value:`₹${ae}`,color:"success.main",bgcolor:"rgba(46, 125, 50, 0.1)"})}),e.jsx(i,{size:{xs:12,sm:12,md:4,lg:4},children:e.jsx(V,{icon:e.jsx(M,{}),label:"Outstanding Credit",value:`₹${pe}`,color:"error.main",bgcolor:"rgba(211, 47, 47, 0.1)"})}),e.jsx(i,{size:{xs:12,sm:12,md:4,lg:4},children:e.jsx(V,{icon:e.jsx(re,{}),label:"Pending Count",value:ce,color:"primary.main",bgcolor:"rgba(25, 118, 210, 0.1)"})})]})}),e.jsxs(n,{sx:{px:2,py:2},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:"bold",mb:2,textTransform:"uppercase",letterSpacing:1,fontSize:"0.9rem"},children:"Management"}),e.jsxs(i,{container:!0,spacing:2,children:[e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(er,{}),label:"Products",onClick:()=>a({to:"/admin/add"}),color:"primary.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(fr,{}),label:"Category",onClick:()=>a({to:"/admin/addcat"}),color:"secondary.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(re,{}),label:"Estimate",onClick:()=>a({to:"/admin/orders"}),color:"warning.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(M,{}),label:"Pricing",onClick:()=>a({to:"/admin/pricing"}),color:"success.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(ee,{}),label:"Returns",onClick:()=>a({to:"/admin/returns"}),color:"error.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(oe,{}),label:"Stock",onClick:()=>a({to:"/admin/stock"}),color:"info.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(te,{}),label:"Suppliers",onClick:()=>a({to:"/admin/suppliers"}),color:"secondary.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(M,{}),label:"Credit",onClick:()=>a({to:"/admin/credit"}),color:"error.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsxs(n,{sx:{position:"relative"},children:[e.jsx(rr,{}),$>0&&e.jsx(n,{sx:{position:"absolute",top:-8,right:-8,bgcolor:"error.main",color:"white",borderRadius:"50%",width:16,height:16,fontSize:"0.65rem",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",border:"2px solid white"},children:$})]}),label:"Ez-stock",onClick:()=>a({to:"/admin/autosupply"}),color:"primary.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(U,{}),label:"Delivery",onClick:()=>a({to:"/admin/delivery"}),color:"warning.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(U,{}),label:"Customers",onClick:()=>a({to:"/admin/customers"}),color:"info.main"})})]}),e.jsxs(i,{container:!0,spacing:2,sx:{mt:2},children:[e.jsx(i,{size:12,children:e.jsxs(c,{variant:"h6",sx:{fontWeight:"bold",textTransform:"uppercase",letterSpacing:1,fontSize:"0.9rem"},children:["Offline Data (",X?` (${X}) `:" Not Available ",")"]})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(jr,{}),label:"Export JSON",onClick:Ie,color:"info.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(or,{}),label:"Upload Orders",onClick:()=>a({to:"/admin/offline-upload"}),color:"success.main"})}),e.jsx(i,{size:4,children:e.jsx(x,{icon:e.jsx(br,{}),label:"CSV JSON",onClick:()=>a({to:"/admin/catalog-converter"}),color:"primary.main"})})]})]}),e.jsxs(n,{sx:{px:2,py:2},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsxs(c,{variant:"h6",sx:{fontWeight:"bold",textTransform:"uppercase",letterSpacing:1,fontSize:"0.9rem"},children:["Recent ","Estimate","s"]}),e.jsx(f,{size:"small",onClick:()=>a({to:"/admin/orders"}),children:"View All"})]}),v?e.jsx(n,{sx:{display:"flex",justifyContent:"center",py:4},children:e.jsx(Ne,{size:30})}):m.length===0?e.jsx(c,{color:"text.secondary",align:"center",children:"No orders found."}):e.jsx(Ue,{useWindowScroll:!0,increaseViewportBy:300,data:m,itemContent:(o,r)=>{const s=Re(r.status);return e.jsx(n,{sx:{pb:2},children:e.jsx(F,{sx:{p:2,borderRadius:3,border:1,borderColor:"divider",boxShadow:"none",display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",transition:"all 0.2s","&:active":{transform:"scale(0.98)"}},onClick:()=>we(r.id),children:e.jsxs(n,{sx:{width:"100%"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between",width:"100%"},children:[e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:2,flex:1,minWidth:0},children:[e.jsx(T,{sx:{width:48,height:48,bgcolor:s.bgcolor||"action.selected",color:s.color,border:1,borderColor:"divider",flexShrink:0},children:s.icon}),e.jsxs(n,{sx:{flex:1,minWidth:0},children:[e.jsxs(R,{direction:"row",spacing:1,alignItems:"center",sx:{flexWrap:"wrap",mb:.25},children:[e.jsx(tr,{label:`#${r.id.slice(0,5).toUpperCase()}`,size:"small",sx:{height:20,fontSize:"0.65rem",fontWeight:900,borderRadius:1,bgcolor:"action.selected",color:"text.primary"}}),r.shippingDetails?.firstName&&e.jsx(c,{variant:"body2",noWrap:!0,sx:{fontWeight:600,color:"text.primary"},children:r.shippingDetails.firstName}),r.shippingDetails?.orgName&&e.jsxs(c,{variant:"caption",noWrap:!0,sx:{color:"text.secondary",fontWeight:"medium"},children:["• ",r.shippingDetails.orgName]}),r.items?.some(t=>(t.returnedQuantity||0)>0)&&e.jsx(n,{sx:{px:.75,py:.25,borderRadius:1,bgcolor:r.items.every(t=>(t.returnedQuantity||0)>=t.quantity)?"error.main":"warning.main",color:"white",fontSize:"0.65rem",fontWeight:"bold",lineHeight:1},children:r.items.every(t=>(t.returnedQuantity||0)>=t.quantity)?"RETURNED":"PARTIAL"})]}),e.jsxs(c,{variant:"caption",noWrap:!0,sx:{color:"text.secondary",display:"flex",alignItems:"center",gap:.5,opacity:.8},children:[Se(r.timestamp),r.deliveryPersonName&&e.jsxs(n,{component:"span",sx:{display:"flex",alignItems:"center",gap:.5},children:["• ",e.jsx(c,{component:"span",variant:"caption",sx:{fontWeight:"bold"},children:r.deliveryPersonName})]})]})]})]}),e.jsxs(n,{sx:{display:"flex",alignItems:"center",gap:1.5,ml:2,flexShrink:0},children:[e.jsxs(n,{sx:{textAlign:"right"},children:[e.jsxs(c,{variant:"body2",sx:{fontWeight:800,color:"text.primary",lineHeight:1},children:["₹",r.total?.toLocaleString()]}),e.jsx(n,{sx:{display:"inline-block",mt:.75,px:1,py:.25,borderRadius:1,bgcolor:s.color+"1A",color:s.color,fontSize:"0.6rem",fontWeight:900,textTransform:"uppercase",letterSpacing:.5,lineHeight:1},children:s.label})]}),e.jsx(Ae,{size:"small",sx:{transform:D===r.id?"rotate(180deg)":"none",transition:"transform 0.3s",bgcolor:D===r.id?"action.selected":"transparent"},children:e.jsx(Ee,{})})]})]}),e.jsxs(Be,{in:D===r.id,timeout:"auto",unmountOnExit:!0,children:[e.jsx(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:e.jsx(Qe,{order:r})}),e.jsxs(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1},children:[e.jsx(c,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",textTransform:"uppercase",letterSpacing:.5},children:"Customer Details"}),e.jsx(f,{size:"small",startIcon:e.jsx(U,{}),onClick:t=>{t.stopPropagation(),Oe(r)},sx:{fontSize:"0.75rem"},children:"Change Customer"})]}),e.jsx(Je,{shippingDetails:r.shippingDetails||{}})]}),e.jsxs(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[e.jsxs(c,{variant:"caption",sx:{fontWeight:"bold",color:"text.secondary",mb:1.5,display:"block",textTransform:"uppercase",letterSpacing:.5},children:["Estimate"," Items"]}),e.jsx(R,{spacing:2,children:r.items?.map((t,p)=>e.jsx(qe,{item:t},p))})]}),e.jsxs(n,{sx:{mt:2,pt:2,borderTop:1,borderColor:"divider"},children:[e.jsxs(R,{direction:"row",spacing:1,sx:{mt:2},justifyContent:"space-between",children:[e.jsxs(n,{sx:{display:"flex",gap:1},children:[e.jsx(f,{size:"small",variant:"contained",color:"success",startIcon:e.jsx(sr,{}),onClick:()=>ke(r.id),children:"Print"}),e.jsx(Ge,{order:r})]}),e.jsx(f,{size:"small",variant:"outlined",color:"warning",startIcon:e.jsx(ee,{}),onClick:()=>Ce(r),children:"Return"})]}),e.jsxs(R,{direction:"row",spacing:1,sx:{mt:2},children:[e.jsx(f,{size:"small",variant:"outlined",color:"primary",onClick:t=>{t.stopPropagation(),J(r),z(!0)},children:"Delivery"}),e.jsx(f,{size:"small",variant:"outlined",color:"primary",onClick:t=>{t.stopPropagation(),De(r.id)},children:"Challan"})]})]})]})]})})})}})]})]}),e.jsx(Ye,{open:ue,onClose:()=>q(!1),order:S,onSave:ve}),e.jsx(_e,{open:je,onClose:()=>A(!1),onSelect:ze}),e.jsxs(nr,{open:fe,onClose:()=>{z(!1),N("")},PaperProps:{sx:{borderRadius:3,maxWidth:400,width:"90%"}},children:[e.jsx(ir,{sx:{fontWeight:"bold"},children:"Assign Driver"}),e.jsxs(ar,{sx:{p:0},children:[e.jsx(n,{sx:{p:2,borderBottom:1,borderColor:"divider"},children:e.jsx(lr,{fullWidth:!0,size:"small",placeholder:"Search name, phone, or vehicle...",value:O,onChange:o=>N(o.target.value),InputProps:{startAdornment:e.jsx(dr,{sx:{mr:1,color:"text.secondary"}}),sx:{borderRadius:2}}})}),e.jsxs(cr,{sx:{py:0,maxHeight:400,overflow:"auto"},children:[e.jsx(se,{component:"div",onClick:()=>_(null),sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},borderBottom:1,borderColor:"divider",py:1.5},children:e.jsx(ne,{primary:"None (Clear)",primaryTypographyProps:{color:"text.secondary"}})}),K().map(o=>e.jsxs(se,{component:"div",onClick:()=>_(o),sx:{cursor:"pointer","&:hover":{bgcolor:"action.hover"},borderBottom:1,borderColor:"divider",py:2},children:[e.jsx(pr,{children:e.jsx(T,{sx:{bgcolor:"primary.main",color:"black"},children:o.name.charAt(0).toUpperCase()})}),e.jsx(ne,{primary:o.name,secondary:`${o.vehicleNumber||"No vehicle"} • ${o.phone}`,primaryTypographyProps:{fontWeight:"bold"}})]},o.id)),K().length===0&&e.jsx(n,{sx:{p:4,textAlign:"center"},children:e.jsx(c,{variant:"body2",color:"text.secondary",children:O?"No matching drivers found.":"No active drivers found."})})]})]}),e.jsx(xr,{sx:{p:2},children:e.jsx(f,{onClick:()=>{z(!1),N("")},color:"inherit",sx:{fontWeight:"bold"},children:"Cancel"})})]})]})}const x=({icon:a,label:m,onClick:C,color:v})=>e.jsx(F,{sx:{borderRadius:3,cursor:"pointer",textAlign:"center",border:1,borderColor:"divider",boxShadow:"none",transition:"all 0.2s","&:active":{transform:"scale(0.95)"},"&:hover":{bgcolor:"action.hover"}},onClick:C,children:e.jsxs(ie,{sx:{p:2,"&:last-child":{pb:2}},children:[e.jsx(n,{sx:{color:v,display:"flex",justifyContent:"center",mb:1},children:a}),e.jsx(c,{variant:"caption",sx:{fontWeight:"bold"},children:m})]})}),V=({icon:a,label:m,value:C,color:v,bgcolor:b})=>e.jsx(F,{sx:{borderRadius:3,border:1,borderColor:"divider",boxShadow:"none"},children:e.jsxs(ie,{sx:{p:2,display:"flex",alignItems:"center",gap:2,"&:last-child":{pb:2}},children:[e.jsx(T,{sx:{bgcolor:b,color:v,width:40,height:40},children:a}),e.jsxs(n,{children:[e.jsx(c,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:m}),e.jsx(c,{variant:"h6",sx:{fontWeight:"bold",lineHeight:1},children:C})]})]})});export{mo as component};
