import{r as h,b as Re,T as Te,c as Pe,g as Ee,j as e,d as ce,e as Me,f as D,a as me,I as N,B as s,R as G,A as Ve,h as c,C as fe,i as ge,k as re,l as Ae,m as ue,S as be}from"./index-CBou6moi.js";import{P as Fe}from"./Person-Ppu-bxkp.js";import{A as ye,T as je,a as De}from"./ArrowBackIosNew-CIbvTB3E.js";import{C as Le}from"./CheckCircle-DhJyyHVD.js";import{S as Oe}from"./Straighten-OQDXQl0x.js";import{L as Be}from"./LocalShipping-DJqXIIiw.js";import{u as Q}from"./productStore-SIWeptSc.js";import{u as Z}from"./cartStore-DAhhM6-o.js";import{u as ve}from"./pricingStore-CjE7w1mK.js";import{Q as He,p as $e}from"./profile-C1V1iAHe.js";import{A as Ne}from"./Add-q8NcmhRW.js";import{S as Ue}from"./Search-DEj_P3US.js";import{S as Ce}from"./ShoppingCart-Dll2RlNX.js";import{F as Ye}from"./FitnessCenter-DSCBxI9m.js";import{B as _e,E as Qe}from"./EnergySavingsLeaf-DsRySGZ5.js";import{C as Se}from"./Close-VR_pRfpg.js";import{P as Ge}from"./Phone-CMIUrlWo.js";import{E as Xe}from"./Email-Dx8u83Jv.js";import{L as qe}from"./LocationOn-CDKi7nvV.js";import{F as Ze}from"./FlashOn-B0hot_XN.js";import{D as le}from"./DialogTitle-f2PvcPNk.js";import{A as de}from"./Alert-C3UFCVX0.js";import{B as X}from"./Button-BflV7euM.js";import{d as Ke,o as we,I as ne,F as Je,S as et}from"./TextField-RXHFbKtb.js";import{Q as tt}from"./QuantitySelector-D3KUdhXw.js";import{O as rt}from"./OfflineDialog-DqPa1w0b.js";import{Q as xe,Y as ot}from"./index-DWku4nr_.js";import{D as st}from"./Delete-DRnHzxX1.js";import{H as it}from"./Header-CUbDajRy.js";import{P as nt}from"./Page-BIJxk8nd.js";import{C as K}from"./Chip-BXUFp7Xu.js";import{G as q}from"./Grid-IWINzjQb.js";import{D as ee}from"./Divider-8YTaR6cQ.js";import{M as at}from"./MenuItem-CGHN6H8j.js";import"./isMuiElement-fD2fXW9_.js";import"./DialogContentText-QZEy0qxP.js";import"./DialogActions-BLBSxaJt.js";import"./dividerClasses-aUSE17Cl.js";import"./listItemTextClasses-CNe8SJtV.js";function lt(o,a,r){const i=a.getBoundingClientRect(),x=r&&r.getBoundingClientRect(),m=we(a);let S;if(a.fakeTransform)S=a.fakeTransform;else{const f=m.getComputedStyle(a);S=f.getPropertyValue("-webkit-transform")||f.getPropertyValue("transform")}let p=0,I=0;if(S&&S!=="none"&&typeof S=="string"){const f=S.split("(")[1].split(")")[0].split(",");p=parseInt(f[4],10),I=parseInt(f[5],10)}return o==="left"?x?`translateX(${x.right+p-i.left}px)`:`translateX(${m.innerWidth+p-i.left}px)`:o==="right"?x?`translateX(-${i.right-x.left-p}px)`:`translateX(-${i.left+i.width-p}px)`:o==="up"?x?`translateY(${x.bottom+I-i.top}px)`:`translateY(${m.innerHeight+I-i.top}px)`:x?`translateY(-${i.top-x.top+i.height-I}px)`:`translateY(-${i.top+i.height-I}px)`}function ct(o){return typeof o=="function"?o():o}function se(o,a,r){const i=ct(r),x=lt(o,a,i);x&&(a.style.webkitTransform=x,a.style.transform=x)}const ke=h.forwardRef(function(a,r){const i=Re(),x={enter:i.transitions.easing.easeOut,exit:i.transitions.easing.sharp},m={enter:i.transitions.duration.enteringScreen,exit:i.transitions.duration.leavingScreen},{addEndListener:S,appear:p=!0,children:I,container:f,direction:R="down",easing:M=x,in:T,onEnter:O,onEntered:w,onEntering:B,onExit:U,onExited:L,onExiting:V,style:H,timeout:k=m,TransitionComponent:P=Te,...z}=a,W=h.useRef(null),Y=Pe(Ee(I),W,r),E=n=>d=>{n&&(d===void 0?n(W.current):n(W.current,d))},y=E((n,d)=>{se(R,n,f),Me(n),O&&O(n,d)}),j=E((n,d)=>{const b=ce({timeout:k,style:H,easing:M},{mode:"enter"});n.style.webkitTransition=i.transitions.create("-webkit-transform",{...b}),n.style.transition=i.transitions.create("transform",{...b}),n.style.webkitTransform="none",n.style.transform="none",B&&B(n,d)}),C=E(w),g=E(V),A=E(n=>{const d=ce({timeout:k,style:H,easing:M},{mode:"exit"});n.style.webkitTransition=i.transitions.create("-webkit-transform",d),n.style.transition=i.transitions.create("transform",d),se(R,n,f),U&&U(n)}),_=E(n=>{n.style.webkitTransition="",n.style.transition="",L&&L(n)}),t=n=>{S&&S(W.current,n)},l=h.useCallback(()=>{W.current&&se(R,W.current,f)},[R,f]);return h.useEffect(()=>{if(T||R==="down"||R==="right")return;const n=Ke(()=>{W.current&&se(R,W.current,f)}),d=we(W.current);return d.addEventListener("resize",n),()=>{n.clear(),d.removeEventListener("resize",n)}},[R,T,f]),h.useEffect(()=>{T||l()},[T,l]),e.jsx(P,{nodeRef:W,onEnter:y,onEntered:C,onEntering:j,onExit:A,onExited:_,onExiting:g,addEndListener:t,appear:p,in:T,timeout:k,...z,children:(n,{ownerState:d,...b})=>h.cloneElement(I,{ref:Y,style:{visibility:n==="exited"&&!T?"hidden":void 0,...H,...I.props.style},...b})})}),dt=D(e.jsx("path",{d:"M6.23 20.23 8 22l10-10L8 2 6.23 3.77 14.46 12z"})),xt=D(e.jsx("path",{d:"M21.6 18.2 13 11.75v-.91c1.65-.49 2.8-2.17 2.43-4.05-.26-1.31-1.3-2.4-2.61-2.7C10.54 3.57 8.5 5.3 8.5 7.5h2c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5c0 .84-.69 1.52-1.53 1.5-.54-.01-.97.45-.97.99v1.76L2.4 18.2c-.77.58-.36 1.8.6 1.8h18c.96 0 1.37-1.22.6-1.8M6 18l6-4.5 6 4.5z"})),ht=D(e.jsx("path",{d:"m12 21.35-1.45-1.32C5.4 15.36 2 12.28 2 8.5 2 5.42 4.42 3 7.5 3c1.74 0 3.41.81 4.5 2.09C13.09 3.81 14.76 3 16.5 3 19.58 3 22 5.42 22 8.5c0 3.78-3.4 6.86-8.55 11.54z"})),pt=D(e.jsx("path",{d:"M3.27 3 2 4.27l5 5V13h3v9l3.58-6.14L17.73 20 19 18.73zM17 10h-4l4-8H7v2.18l8.46 8.46z"})),mt=D(e.jsx("path",{d:"M5 11h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2m0 10h4c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2m8-16v4c0 1.1.9 2 2 2h4c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2m2 16h4c1.1 0 2-.9 2-2v-4c0-1.1-.9-2-2-2h-4c-1.1 0-2 .9-2 2v4c0 1.1.9 2 2 2"})),he=D(e.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2m1 15h-2v-6h2zm0-8h-2V7h2z"})),ft=D(e.jsx("path",{d:"M3 6c-.55 0-1 .45-1 1v13c0 1.1.9 2 2 2h13c.55 0 1-.45 1-1s-.45-1-1-1H5c-.55 0-1-.45-1-1V7c0-.55-.45-1-1-1m17-4H8c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2m-2 9h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1m-4 4h-4c-.55 0-1-.45-1-1s.45-1 1-1h4c.55 0 1 .45 1 1s-.45 1-1 1m4-8h-8c-.55 0-1-.45-1-1s.45-1 1-1h8c.55 0 1 .45 1 1s-.45 1-1 1"})),gt=D(e.jsx("path",{d:"m3 2 2.01 18.23C5.13 21.23 5.97 22 7 22h10c1.03 0 1.87-.77 1.99-1.77L21 2zm9 17c-1.66 0-3-1.34-3-3 0-2 3-5.4 3-5.4s3 3.4 3 5.4c0 1.66-1.34 3-3 3m6.33-11H5.67l-.44-4h13.53z"})),ut=D(e.jsx("path",{d:"M12 17.27 18.18 21l-1.64-7.03L22 9.24l-7.19-.61L12 2 9.19 8.63 2 9.24l5.46 4.73L5.82 21z"})),bt=D(e.jsx("path",{d:"M3 17v2h6v-2zM3 5v2h10V5zm10 16v-2h8v-2h-8v-2h-2v6zM7 9v2H3v2h4v2h2V9zm14 4v-2H11v2zm-6-4h2V7h4V5h-4V3h-2z"})),yt=D(e.jsx("path",{d:"M4 14h2c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1m0 5h2c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1M4 9h2c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1H4c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1m5 5h11c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1m0 5h11c.55 0 1-.45 1-1v-2c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1v2c0 .55.45 1 1 1M8 6v2c0 .55.45 1 1 1h11c.55 0 1-.45 1-1V6c0-.55-.45-1-1-1H9c-.55 0-1 .45-1 1"})),jt=D(e.jsx("path",{d:"M12 2c-5.33 4.55-8 8.48-8 11.8 0 4.98 3.8 8.2 8 8.2s8-3.22 8-8.2c0-3.32-2.67-7.25-8-11.8M7.83 14c.37 0 .67.26.74.62.41 2.22 2.28 2.98 3.64 2.87.43-.02.79.32.79.75 0 .4-.32.73-.72.75-2.13.13-4.62-1.09-5.19-4.12-.08-.45.28-.87.74-.87"})),Ie=()=>{const a=Z(i=>i.items).length,r=me();return e.jsxs(N,{sx:{bgcolor:"action.hover"},onClick:()=>r({to:"/checkout"}),children:[e.jsx(Ce,{}),a>0&&e.jsx(s,{sx:{position:"absolute",top:0,right:0,width:16,height:16,bgcolor:"red",borderRadius:"50%",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"0.65rem",color:"white",fontWeight:"bold",border:"2px solid",borderColor:"background.paper"},children:a})]})},vt=G.forwardRef(function(a,r){return e.jsx(ke,{direction:"up",ref:r,...a})}),Ct=({open:o,onClose:a,onScanSuccess:r})=>{const i=h.useRef(null),[x,m]=h.useState(null),[S,p]=h.useState(!0),[I,f]=h.useState(!1),[R,M]=h.useState(!0),[T,O]=h.useState(!1),[w,B]=h.useState(null),[U,L]=h.useState(1),[V,H]=h.useState(1),[k,P]=h.useState(!1),z=h.useCallback(()=>{O(!1),w&&w.stop(),i.current&&i.current.srcObject&&(i.current.srcObject.getTracks().forEach(j=>j.stop()),i.current.srcObject=null)},[w]),W=h.useCallback(async()=>{if(M(!0),m(null),!("BarcodeDetector"in window)){p(!1),M(!1);return}try{const y=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{min:1280,ideal:3840,max:4096},height:{min:720,ideal:2160,max:2160},frameRate:{ideal:30,max:60}}});if(i.current){i.current.srcObject=y;const j=y.getVideoTracks()[0];B(j),await i.current.play();try{const C=j.getCapabilities(),g={advanced:[]};C.zoom&&(P(!0),H(C.zoom.max),L(C.zoom.min||1)),C.focusMode?.includes("continuous")&&g.advanced.push({focusMode:"continuous"}),C.whiteBalanceMode?.includes("continuous")&&g.advanced.push({whiteBalanceMode:"continuous"}),C.exposureMode?.includes("continuous")&&g.advanced.push({exposureMode:"continuous"}),g.advanced.length>0&&await j.applyConstraints(g)}catch(C){console.warn("Advanced constraints not supported:",C)}M(!1),O(!0)}}catch(y){console.error("Error accessing camera:",y),m(y.name==="NotAllowedError"?"Camera permission denied":"Could not access camera"),M(!1)}},[]);h.useEffect(()=>{o?W():z()},[o,W,z]),h.useEffect(()=>{let y,j=0;const C=300,g="BarcodeDetector"in window?new window.BarcodeDetector({formats:["qr_code","ean_13","ean_8","code_128","code_39","upc_a","upc_e"]}):null,A=async _=>{if(!(!T||!i.current||!g)){if(_-j>C){j=_;try{if(i.current.readyState===i.current.HAVE_ENOUGH_DATA){const t=await g.detect(i.current);if(t.length>0){const l=t[0].rawValue;r(l),z();return}}}catch(t){console.error("Detection error:",t)}}y=requestAnimationFrame(A)}};return T&&(y=requestAnimationFrame(A)),()=>{y&&cancelAnimationFrame(y)}},[T,r,z]);const Y=async()=>{if(w&&"applyConstraints"in w)try{await w.applyConstraints({advanced:[{torch:!I}]}),f(!I)}catch(y){console.error("Error toggling torch:",y)}},E=async y=>{if(w&&"applyConstraints"in w)try{await w.applyConstraints({advanced:[{zoom:y}]}),L(y)}catch(j){console.error("Error adjusting zoom:",j)}};return e.jsxs(le,{fullScreen:!0,open:o,onClose:a,TransitionComponent:vt,PaperProps:{sx:{bgcolor:"#000",color:"white",overflow:"hidden"}},children:[e.jsx(ye,{sx:{position:"relative",bgcolor:"transparent",boxShadow:"none"},children:e.jsxs(je,{children:[e.jsx(N,{edge:"start",color:"inherit",onClick:a,"aria-label":"close",children:e.jsx(Ve,{})}),e.jsx(c,{sx:{ml:2,flex:1,fontWeight:700},variant:"h6",children:"Scan Barcode"}),w&&e.jsx(N,{color:"inherit",onClick:Y,children:I?e.jsx(Ze,{sx:{color:"primary.main"}}):e.jsx(pt,{})})]})}),e.jsxs(s,{sx:{flex:1,position:"relative",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"#000"},children:[R&&e.jsx(s,{sx:{position:"absolute",zIndex:2,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx(fe,{color:"primary"})}),x&&e.jsxs(s,{sx:{p:4,textAlign:"center",zIndex:2},children:[e.jsx(de,{severity:"error",sx:{mb:2},children:x}),e.jsx(X,{variant:"contained",onClick:W,children:"Retry"})]}),!S&&e.jsxs(s,{sx:{p:4,textAlign:"center",zIndex:2},children:[e.jsx(de,{severity:"warning",sx:{mb:2},children:"Native barcode scanning is not supported in this browser. Please use Chrome or Edge."}),e.jsx(X,{variant:"outlined",color:"inherit",onClick:a,children:"Close"})]}),e.jsxs(s,{sx:{position:"relative",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},children:[e.jsx("video",{ref:i,style:{width:"100%",height:"100%",objectFit:"cover"},playsInline:!0,muted:!0}),e.jsx(s,{sx:{position:"absolute",top:0,left:0,right:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",pointerEvents:"none"},children:e.jsx(s,{sx:{width:"280px",height:"280px",border:"2px solid rgba(255, 255, 255, 0.5)",borderRadius:"24px",position:"relative","&::before, &::after":{content:'""',position:"absolute",width:"40px",height:"40px",borderColor:"primary.main",borderStyle:"solid"},"&::before":{top:-2,left:-2,borderTopWidth:4,borderLeftWidth:4,borderBottomWidth:0,borderRightWidth:0,borderTopLeftRadius:"24px"},"&::after":{bottom:-2,right:-2,borderBottomWidth:4,borderRightWidth:4,borderTopWidth:0,borderLeftWidth:0,borderBottomRightRadius:"24px"}},children:e.jsx(s,{sx:{position:"absolute",top:0,left:"10%",width:"80%",height:"2px",bgcolor:"primary.main",boxShadow:"0 0 15px #2196f3",willChange:"transform",animation:"scan 2.5s ease-in-out infinite","@keyframes scan":{"0%":{transform:"translateY(28px)",opacity:0},"50%":{transform:"translateY(140px)",opacity:1},"100%":{transform:"translateY(252px)",opacity:0}}}})})}),e.jsxs(s,{sx:{position:"absolute",bottom:40,display:"flex",gap:2,zIndex:3},children:[k&&e.jsx(X,{variant:"contained",sx:{borderRadius:"20px",bgcolor:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:()=>E(U===1?Math.min(2,V):1),children:U===1?"2x Zoom":"1x Zoom"}),e.jsx(X,{variant:"contained",sx:{borderRadius:"20px",bgcolor:"rgba(255,255,255,0.2)",backdropFilter:"blur(10px)","&:hover":{bgcolor:"rgba(255,255,255,0.3)"}},onClick:Y,children:I?"Flash Off":"Flash On"})]})]})]})]})},St=(o,a)=>{if(o===void 0||a===void 0)return"";const r=Math.floor(o-a),i=Math.floor(Math.random()*9+1),x=`${i}${i}1`,m=Math.floor(Math.random()*90+10);return`${x}${r}${m}`},wt={shopping_cart:e.jsx(Ce,{}),search:e.jsx(Ue,{}),tune:e.jsx(bt,{}),favorite:e.jsx(ht,{}),nutrition:e.jsx(Qe,{}),bolt:e.jsx(_e,{}),checkroom:e.jsx(xt,{}),water_drop:e.jsx(jt,{}),local_drink:e.jsx(gt,{}),fitness_center:e.jsx(Ye,{}),grid:e.jsx(mt,{}),list:e.jsx(yt,{})},ze=G.forwardRef(function(a,r){return e.jsx(ke,{direction:"up",ref:r,...a})}),te=({name:o,sx:a,...r})=>{const i=wt[o];return i?G.cloneElement(i,{sx:a,...r}):null},pe=G.forwardRef(({style:o,children:a,...r},i)=>e.jsx(q,{container:!0,spacing:2,...r,ref:i,style:{...o,display:"flex",flexWrap:"wrap",width:"100%",margin:0},children:a})),kt=({children:o,fullWidth:a,...r})=>e.jsx(q,{item:!0,size:a?{xs:12}:{xs:6,sm:6,md:3,lg:2,xl:2},...r,sx:{display:"flex",flexDirection:"column",p:a?.5:1},children:o}),It=({children:o,fullWidth:a,...r})=>e.jsx(q,{item:!0,size:a?{xs:12}:{xs:6,sm:6,md:6,lg:4,xl:4},...r,sx:{display:"flex",flexDirection:"column",p:a?.5:1},children:o});function fr(){const o=Q(t=>t.activeCategory),a=Q(t=>t.setActiveCategory),r=Q(t=>t.categories),i=Q(t=>t.categoryItems),x=Q(t=>t.products),m=Q(t=>t.fetchProducts),S=ve(t=>t.fetchRules),p=ge(t=>t.fetchSuppliers),I=Q(t=>t.isLoading),f=me(),[R,M]=h.useState(!1);h.useEffect(()=>{navigator.onLine||M(!0)},[]),h.useEffect(()=>{m(),S(),p()},[m]);const[T,O]=h.useState(null),[w,B]=h.useState(""),[U,L]=h.useState(!1),[V,H]=h.useState(!1),[k,P]=h.useState(""),[z,W]=h.useState(localStorage.getItem("categoryViewMode")||"chips"),Y=h.useMemo(()=>t=>e.jsx(kt,{...t,fullWidth:z==="chips"}),[z]),E=h.useMemo(()=>t=>e.jsx(It,{...t,fullWidth:z==="chips"}),[z]),y=()=>{const t=z==="thumbnail"?"chips":"thumbnail";W(t),localStorage.setItem("categoryViewMode",t)},j=(t,l,n=!0)=>{if(!l)return 0;const d=t.toLowerCase(),b=l.toLowerCase();if(d===b)return 100;if(d.startsWith(b))return 80;if(d.includes(b))return 60;if(!n)return 0;let $=0;const u=b.split("");let v=-1;for(const J of u){const oe=d.indexOf(J,v+1);oe>-1&&($++,v=oe)}const F=$/b.length*40;return F>20?F:0},C=w?x.filter(t=>{if(o!=="All Items")if(o==="Un-grouped"){const l=r.filter(d=>d!=="All Items");if(!(!t.categoryOnly&&!t.categoryId&&(!t.category||!l.includes(t.category))))return!1}else{const l=i.find(n=>n.name===o);if(l){if(t.categoryId!==l.id)return!1}else return!1}return k?t.category.toLowerCase().includes(k.toLowerCase()):!0}).map(t=>{const l=w.trim().toLowerCase().split(/\s+/),n=t.categoryId?i.find(b=>b.id===t.categoryId):void 0;let d=0;for(const b of l){const $=j(t.name,b,!1)*10,u=t.sku?j(t.sku,b,!0)*8:0,v=n?.sku?j(n.sku,b,!0)*5:0,F=j(t.detail,b,!0),J=j(t.category,b,!1),oe=t.id?j(String(t.id),b,!0):0,We=Math.max($,u,v,F,J,oe);d+=We}return{...t,searchScore:d}}).filter(t=>t.searchScore>0).sort((t,l)=>(l.searchScore||0)-(t.searchScore||0)):x,g=t=>{a(t),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)},A=t=>{O(t),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)},_=()=>{O(null),setTimeout(()=>{window.scrollTo({top:0,behavior:"smooth"})},400)};return e.jsxs(s,{sx:{pb:10,bgcolor:"background.default",minHeight:"100vh",color:"text.primary"},children:[e.jsxs(s,{sx:{position:"sticky",top:0,zIndex:1100,bgcolor:"background.default",borderBottom:1,borderColor:"divider"},children:[e.jsx(it,{title:"Store",icon:e.jsxs(s,{sx:{position:"relative"},children:[e.jsx(re,{src:$e,sx:{width:40,height:40,border:"2px solid",borderColor:"primary.main"},onClick:()=>f({to:"/admin"})}),e.jsx(s,{sx:{position:"absolute",bottom:0,right:0,width:12,height:12,bgcolor:"primary.main",borderRadius:"50%",border:"2px solid",borderColor:"background.paper"}})]}),rightContent:e.jsxs(e.Fragment,{children:[e.jsx(N,{onClick:y,sx:{color:"text.secondary",pr:2},children:e.jsx(te,{name:z==="thumbnail"?"list":"grid"})}),e.jsx(He,{sx:{cursor:"pointer",pr:2,color:"text.secondary"},onClick:()=>L(!0)}),e.jsx(ft,{sx:{cursor:"pointer",pr:2,color:"text.secondary"},onClick:()=>f({to:"/history"})}),e.jsx(Ie,{})]})}),e.jsxs(s,{sx:{px:2,pt:0,pb:1.5},children:[e.jsxs(s,{sx:{position:"relative"},children:[e.jsx(s,{sx:{position:"absolute",left:16,top:"50%",transform:"translateY(-50%)",display:"flex",zIndex:100},children:e.jsx(te,{name:"search"})}),e.jsx(ne,{placeholder:"Search supplements, gear...",value:w,onChange:t=>B(t.target.value),onKeyDown:t=>{t.key==="Escape"&&(B(""),t.target.blur())},sx:{width:"100%",bgcolor:"background.paper",borderRadius:4,py:1.5,pl:6,pr:6,border:1,borderColor:"divider","&.Mui-focused":{borderColor:"primary.main",boxShadow:"0 0 0 2px rgba(242, 215, 13, 0.2)"}}}),e.jsx(N,{onClick:()=>{V&&(P(""),g("All Items")),H(!V)},sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-50%)",bgcolor:V||k?"primary.main":"action.hover",color:V||k?"common.black":"inherit",p:.5,borderRadius:2,"&:hover":{bgcolor:V||k?"primary.dark":"action.selected"}},children:e.jsx(te,{name:"tune"})})]}),e.jsx(Ae,{in:V,children:e.jsxs(s,{sx:{pt:1,position:"relative"},children:[e.jsx(ne,{placeholder:"Filter categories...",value:k,onChange:t=>{P(t.target.value),t.target.value&&g("All Items")},sx:{width:"100%",bgcolor:"background.paper",borderRadius:3,py:1,pl:2,pr:5,border:1,borderColor:"divider",fontSize:"0.9rem"}}),k&&e.jsx(N,{size:"small",onClick:()=>{P(""),g("All Items")},sx:{position:"absolute",right:8,top:"50%",transform:"translateY(-30%)",color:"text.secondary"},children:e.jsx(Se,{fontSize:"small"})})]})})]})]}),e.jsx(nt,{children:I?e.jsx(s,{sx:{display:"flex",justifyContent:"center",alignItems:"center",py:8},children:e.jsx(fe,{})}):e.jsxs(e.Fragment,{children:[!w&&e.jsx(s,{sx:{display:"flex",gap:1.5,overflowX:"auto",pb:2,"&::-webkit-scrollbar":{display:"none"}},children:(()=>{const t=r.filter(d=>d!=="All Items");return(x.some(d=>!d.categoryOnly&&(!d.category||!t.includes(d.category)))?[...r,"Un-grouped"]:r).map(d=>e.jsx(K,{label:d,onClick:()=>g(d),sx:{fontWeight:"bold",borderRadius:50,height:40,px:1,bgcolor:"background.paper",color:o===d?"primary.main":"text.secondary",border:1,borderColor:o===d?"primary.main":"divider","&:hover":{bgcolor:o===d?"primary.dark":"action.hover"}}},d))})()}),e.jsx(s,{sx:{px:0,pb:10},children:w?e.jsxs(s,{children:[e.jsxs(c,{variant:"h6",sx:{mb:2,fontWeight:"bold"},children:["Search Results (",C.length,")"]}),C.length>0?e.jsx(s,{sx:{width:"100%"},children:e.jsx(xe,{useWindowScroll:!0,increaseViewportBy:300,data:C,totalCount:C.length,components:{List:pe,Item:Y},itemContent:(t,l)=>e.jsx(ae,{product:l,onClick:()=>A(l),setActiveCategory:g,viewMode:z})})}):e.jsx(s,{sx:{textAlign:"center",py:8,opacity:.6},children:e.jsxs(c,{variant:"body1",children:['No products found matching "',w,'"']})})]}):e.jsx(e.Fragment,{children:o==="All Items"?e.jsx(s,{sx:{width:"100%"},children:(()=>{const t=u=>u.categoryId&&i.some(v=>v.id===u.categoryId),l=x.filter(u=>!u.categoryOnly&&!t(u)),n=i.filter(u=>!k||u.name.toLowerCase().includes(k.toLowerCase())),d=[],b=[];n.forEach(u=>{const v=x.filter(F=>F.categoryId===u.id).length;v>0?d.push({type:"category",category:u,count:v}):b.push({type:"category-empty",category:u})}),d.sort((u,v)=>u.category.name.localeCompare(v.category.name)),b.sort((u,v)=>u.category.name.localeCompare(v.category.name));const $=[...d];return l.length>0&&(!k||"un-grouped".includes(k.toLowerCase()))&&$.push({type:"un-grouped",count:l.length}),b.length>0&&($.push({type:"header",label:"Empty Categories"}),$.push(...b)),z==="chips"?e.jsx(s,{sx:{px:2,pt:1,pb:4},children:e.jsx(q,{container:!0,spacing:1,children:$.map(u=>{if(u.type==="category"||u.type==="category-empty"){const v=u.category,F=u.count!==void 0?u.count:0;return e.jsx(q,{size:{xs:12},children:e.jsx(ie,{title:v.name,count:F,products:[],onProductClick:()=>{},onViewAll:()=>g(v.name),setActiveCategory:g,viewMode:"chips"})},v.id)}else{if(u.type==="un-grouped")return e.jsx(q,{size:{xs:12},children:e.jsx(ie,{title:"Un-grouped",count:u.count,products:[],onProductClick:()=>{},onViewAll:()=>g("Un-grouped"),setActiveCategory:g,viewMode:"chips"})},"un-grouped");if(u.type==="header")return e.jsx(q,{size:{xs:12},children:e.jsxs(s,{sx:{display:"flex",alignItems:"center",my:2},children:[e.jsx(ee,{sx:{flex:1}}),e.jsx(c,{variant:"caption",sx:{px:2,fontWeight:"bold",color:"text.secondary",textTransform:"uppercase"},children:u.label}),e.jsx(ee,{sx:{flex:1}})]})},u.label)}return null})})}):e.jsx(ot,{useWindowScroll:!0,increaseViewportBy:300,data:$,itemContent:(u,v)=>{if(v.type==="category"||v.type==="category-empty"){const F=v.category,J=v.count!==void 0?v.count:0;return e.jsx(s,{sx:{mb:4},children:e.jsx(ie,{title:F.name,count:J,products:[F],onProductClick:()=>g(F.name),onViewAll:()=>g(F.name),setActiveCategory:g})})}else{if(v.type==="un-grouped")return e.jsx(s,{sx:{mb:4},children:e.jsx(ie,{title:"Un-grouped",count:v.count,products:[{id:"ungrouped-dummy",name:"Un-grouped Items",detail:"Items not yet categorized",icon:"shopping_cart",sale:!1,isNew:!1,category:"Un-grouped",imageColor:"#f5f5f5",categoryOnly:!0}],onProductClick:()=>g("Un-grouped"),onViewAll:()=>g("Un-grouped"),setActiveCategory:g})});if(v.type==="header")return e.jsxs(s,{sx:{display:"flex",alignItems:"center",my:3},children:[e.jsx(ee,{sx:{flex:1}}),e.jsx(c,{variant:"caption",sx:{px:2,fontWeight:"bold",color:"text.secondary",textTransform:"uppercase"},children:v.label}),e.jsx(ee,{sx:{flex:1}})]})}return null}})})()}):e.jsx(s,{sx:{width:"100%",px:0},children:(()=>{const t=r.filter(n=>n!=="All Items");let l=x;if(o==="Un-grouped")l=x.filter(n=>!n.categoryOnly&&!n.categoryId&&(!n.category||!t.includes(n.category)));else{const d=i.find(b=>b.name===o)?.id;d&&(l=x.filter(b=>b.categoryId===d&&!b.categoryOnly))}return e.jsx(xe,{useWindowScroll:!0,increaseViewportBy:300,data:l,totalCount:l.length,components:{List:pe,Item:E},itemContent:(n,d)=>e.jsx(ae,{product:d,onClick:()=>A(d),setActiveCategory:g,viewMode:z})})})()})})})]})}),e.jsx(Rt,{open:T!==null,handleClose:_,product:T}),e.jsx(Ct,{open:U,onClose:()=>L(!1),onScanSuccess:t=>{L(!1),B(t),window.scrollTo({top:0,behavior:"smooth"})}}),e.jsx(rt,{open:R,onContinue:()=>M(!1),onNavigateAway:()=>f({to:"/shop"})})]})}const zt=({onClick:o})=>e.jsxs(ue,{onClick:o,sx:{minWidth:120,height:"100%",borderRadius:4,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",bgcolor:"action.hover",border:1,borderColor:"divider",cursor:"pointer","&:hover":{borderColor:"primary.main",bgcolor:"action.selected",transform:"scale(1.02)",transition:"all 0.2s"}},children:[e.jsx(re,{sx:{bgcolor:"primary.main",mb:1.5,width:48,height:48},children:e.jsx(dt,{sx:{color:"black",fontSize:20,ml:.5}})}),e.jsx(c,{variant:"subtitle2",sx:{fontWeight:800,color:"text.primary"},children:"View All"})]}),ie=({title:o,count:a,products:r,onProductClick:i,onViewAll:x,setActiveCategory:m,viewMode:S="thumbnail"})=>S==="chips"?e.jsx(K,{label:o,onClick:x,avatar:a>0?e.jsx(re,{sx:{bgcolor:"primary.main",color:"common.black",fontSize:"0.7rem",fontWeight:900},children:a}):void 0,sx:{height:40,borderRadius:2.5,fontWeight:600,bgcolor:"background.paper",border:1,borderColor:"divider","&:hover":{bgcolor:"action.hover",borderColor:"primary.main"}}}):e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",px:0,mb:1.5},children:[e.jsxs(c,{variant:"h6",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,fontSize:"0.9rem"},children:[o," ",e.jsxs(c,{component:"span",sx:{color:"text.secondary",fontWeight:600},children:["(",a,")"]})]}),e.jsx(X,{size:"small",onClick:x,sx:{fontWeight:700,textTransform:"none",color:"primary.main",minWidth:0,p:0,"&:hover":{bgcolor:"transparent",textDecoration:"underline"}},children:"View all"})]}),e.jsxs(s,{sx:{display:"flex",gap:2,overflowX:"auto",px:2,pb:1,"&::-webkit-scrollbar":{display:"none"},scrollSnapType:"x mandatory","& > *":{scrollSnapAlign:"start"}},children:[r.filter(p=>p.categoryOnly).slice(0,1).map(p=>e.jsx(s,{sx:{minWidth:200,maxWidth:200},children:e.jsx(ae,{product:p,onClick:i,setActiveCategory:m})},p.id)),e.jsx(s,{sx:{minWidth:120,py:.5},children:e.jsx(zt,{onClick:x})})]})]}),Wt=({open:o,handleClose:a,supplier:r})=>r?e.jsx(le,{fullWidth:!0,maxWidth:"xs",open:o,onClose:a,TransitionComponent:ze,PaperProps:{sx:{borderRadius:4,bgcolor:"background.paper",backgroundImage:"none"}},children:e.jsxs(s,{sx:{p:3},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:2},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:800},children:"Supplier Details"}),e.jsx(N,{onClick:a,size:"small",children:e.jsx(Se,{})})]}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:2.5},children:[e.jsx(s,{children:e.jsx(c,{variant:"h6",sx:{fontWeight:800,color:"primary.main"},children:r.name})}),r.contacts?.map((i,x)=>e.jsxs(s,{sx:{p:2,bgcolor:"action.hover",borderRadius:3,border:1,borderColor:"divider"},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsxs(c,{variant:"subtitle2",sx:{fontWeight:900,display:"flex",alignItems:"center",gap:1},children:[e.jsx(Fe,{sx:{fontSize:18,color:"primary.main"}})," ",i.name||"Contact Person"]}),i.rating>0&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5},children:[e.jsx(ut,{sx:{color:"warning.main",fontSize:14}}),e.jsxs(c,{variant:"caption",fontWeight:700,children:[i.rating,"/5"]})]})]}),e.jsxs(be,{spacing:1,children:[i.phone&&e.jsxs(s,{sx:{display:"flex",gap:1.5,alignItems:"center"},children:[e.jsx(Ge,{sx:{fontSize:16,opacity:.6}}),e.jsx(c,{variant:"body2",fontWeight:600,children:i.phone})]}),i.email&&e.jsxs(s,{sx:{display:"flex",gap:1.5,alignItems:"center"},children:[e.jsx(Xe,{sx:{fontSize:16,opacity:.6}}),e.jsx(c,{variant:"body2",fontWeight:500,sx:{color:"text.secondary"},children:i.email})]}),i.address&&e.jsxs(s,{sx:{display:"flex",gap:1.5,alignItems:"flex-start"},children:[e.jsx(qe,{sx:{fontSize:16,opacity:.6,mt:.2}}),e.jsx(c,{variant:"caption",sx:{color:"text.secondary",lineHeight:1.4},children:i.address})]}),i.gstins?.length>0&&e.jsx(s,{sx:{mt:1,display:"flex",gap:.5,flexWrap:"wrap"},children:i.gstins.map((m,S)=>e.jsx(K,{label:`GST: ${m}`,size:"small",variant:"outlined",sx:{height:18,fontSize:"0.6rem",fontWeight:800}},S))})]})]},x))]})]})}):null,Rt=({open:o,handleClose:a,product:r})=>{const[i,x]=h.useState(1),[m,S]=h.useState(""),[p,I]=h.useState(""),[f,R]=h.useState(null),M=Z(t=>t.addToCart),T=Z(t=>t.items),O=Z(t=>t.updateQuantity),{rules:w}=ve(),B=Q(t=>t.categoryItems),U=ge(t=>t.suppliers),L=Z(t=>t.removeFromCart),[V,H]=h.useState(null),k=T.filter(t=>t.id===r?.id),P=T.find(t=>t.id===r?.id&&t.selectedSize?.label===f?.label);G.useEffect(()=>{o&&r&&(P?x(P.quantity):(x(1),S(""),I("")))},[o,r?.id,f?.label]),G.useEffect(()=>{if(r?.isComplexVariant)if(m&&p){const t=Number(m)*Number(p);x(Math.round(t*100)/100)}else x(0)},[m,p,r?.isComplexVariant]),G.useEffect(()=>{o&&r?r.sizes&&r.sizes.length>0?R(r.sizes[0]):R(null):o||R(null)},[o,r?.id]);const z=f?f.price:r?.price,W=f?f.purchasePrice:r?.purchasePrice,Y=G.useMemo(()=>!o||z===void 0||W===void 0?"N/A":St(z,W),[o,z,W]);if(!r)return null;const E=f?f.price:r.price??0,y=f&&f.price!==void 0||r.price!==void 0;let j=0;if(r.taxRuleId){const t=w.find(l=>l.id===r.taxRuleId);t&&(t.valueType==="percentage"?j=E*(t.value/100):j=t.value)}let C=0;r.addonRuleIds&&r.addonRuleIds.length>0&&r.addonRuleIds.forEach(t=>{const l=w.find(n=>n.id===t);l&&(l.valueType==="percentage"?C+=E*(l.value/100):C+=l.value)});const g=E,A=g+j+C,_=()=>{let t=f;r.isComplexVariant&&(t={label:`${m} x ${p} ${r.unitName||"units"}`,price:E}),P?(r.isComplexVariant?T.find(n=>n.id===r.id&&n.selectedSize?.label===t.label):P)?O(r.id,i,t?.label):M({id:r.id,sku:r.sku,name:r.name,buyPrice:g,taxAmount:j,addonAmount:C,totalPrice:A,src:r.src,quantity:i,selectedSize:t,category:r.category,isComplexVariant:r.isComplexVariant,unitName:r.unitName}):M({id:r.id,sku:r.sku,name:r.name,buyPrice:g,taxAmount:j,addonAmount:C,totalPrice:A,src:r.src,quantity:i,selectedSize:t,category:r.category,isComplexVariant:r.isComplexVariant,unitName:r.unitName}),r.isComplexVariant?(S(""),I(""),x(1)):r.sizes&&r.sizes.length>0};return e.jsxs(le,{fullScreen:!0,open:o,onClose:a,TransitionComponent:ze,PaperProps:{sx:{bgcolor:"background.default",color:"text.primary"}},children:[e.jsxs(s,{sx:{position:"relative",display:"flex",flexDirection:"column",height:"100%",maxWidth:"sm",mx:"auto",width:"100%",bgcolor:"background.paper",boxShadow:t=>t.shadows[10]},children:[e.jsx(ye,{sx:{position:"sticky",bgcolor:"background.paper",color:"text.primary",boxShadow:"none",borderBottom:1,borderColor:"divider"},children:e.jsxs(je,{sx:{justifyContent:"space-between",minHeight:56},children:[e.jsx(N,{edge:"start",onClick:a,"aria-label":"close",size:"small",children:e.jsx(De,{fontSize:"small"})}),e.jsx(c,{sx:{fontWeight:800,fontSize:"1.1rem",letterSpacing:-.5},variant:"h6",children:"Product Details"}),e.jsx(s,{sx:{position:"relative",display:"flex"},children:e.jsx(Ie,{})})]})}),e.jsxs(s,{sx:{flex:1,overflowY:"auto",pb:13},children:[e.jsxs(s,{sx:{width:"100%",aspectRatio:"16/9",bgcolor:"#121212",borderRadius:"0 0 20px 20px",position:"relative",overflow:"hidden",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"inset 0 -10px 20px rgba(0,0,0,0.2)"},children:[r.src&&e.jsx(s,{component:"img",src:r.src,alt:r.name,sx:{maxWidth:"100%",maxHeight:"100%",objectFit:"contain"}}),e.jsx(s,{sx:{position:"absolute",bottom:12,right:12,bgcolor:"rgba(0,0,0,0.6)",color:"white",px:1.2,py:.4,borderRadius:10,fontSize:11,fontWeight:"bold",backdropFilter:"blur(8px)",zIndex:1},children:"1 / 3"})]}),e.jsxs(s,{sx:{px:2.5,pt:2.5},children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start",mb:.5},children:[e.jsxs(s,{sx:{flex:1,pr:2},children:[e.jsx(c,{variant:"h6",sx:{fontWeight:800,lineHeight:1.2,mb:.5},children:r.name}),e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5,color:"success.main"},children:[e.jsx(Le,{sx:{fontSize:14}}),e.jsx(c,{variant:"caption",sx:{fontWeight:600},children:"In Stock • Ready to sell"})]}),Y&&e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:.5,color:"grey.600",mt:.5},children:[e.jsx(he,{sx:{fontSize:14}}),e.jsxs(c,{variant:"caption",sx:{fontWeight:600},children:["PID: ",Y]})]}),r.sku&&e.jsxs(c,{variant:"caption",sx:{fontWeight:800,color:"text.disabled",letterSpacing:1,mt:.5,display:"block"},children:["SKU: ",r.sku]})]}),e.jsxs(s,{sx:{textAlign:"right"},children:[e.jsx(c,{variant:"h6",color:"primary.main",sx:{fontWeight:800,lineHeight:1},children:y?`₹${A?.toFixed(2)}`:"Price on Request"}),(j>0||C>0)&&e.jsxs(e.Fragment,{children:[e.jsxs(c,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.5,fontSize:"0.7rem"},children:["(Base: ₹",g.toFixed(2),")"]}),e.jsxs(c,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.2,fontSize:"0.7rem"},children:["(Tax: ₹",j.toFixed(2),")"]}),e.jsxs(c,{variant:"caption",color:"text.secondary",sx:{display:"block",mt:.2,fontSize:"0.7rem"},children:["(Addon: ₹",C.toFixed(2),")"]})]})]})]}),e.jsx(ee,{sx:{my:2,opacity:.6}}),e.jsxs(s,{sx:{display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",mb:1.5},children:[e.jsx(c,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:1,color:"text.secondary"},children:"Size Selection"}),e.jsx(X,{variant:"text",size:"small",startIcon:e.jsx(Oe,{sx:{fontSize:"14px !important"}}),sx:{textTransform:"none",color:"text.secondary",fontSize:"0.75rem",fontWeight:600,minWidth:0,p:0},children:"Size Guide"})]}),r.sizes&&r.sizes.length>0?e.jsx(Je,{fullWidth:!0,size:"small",children:e.jsx(et,{value:f?f.label:"",onChange:t=>{const l=r.sizes.find(n=>n.label===t.target.value);R(l)},sx:{borderRadius:2,fontWeight:700,fontSize:"0.85rem",bgcolor:"background.paper","& .MuiSelect-select":{py:1}},children:r.sizes.map(t=>e.jsxs(at,{value:t.label,children:[t.label," - ₹",t.price.toFixed(2)]},t.label))})}):e.jsx(c,{variant:"body2",sx:{fontWeight:600,color:"text.secondary",bgcolor:"action.hover",p:1,borderRadius:2,textAlign:"center"},children:"SIngle Variant"})]}),e.jsxs(s,{sx:{bgcolor:"action.hover",borderRadius:3,p:2,display:"flex",alignItems:"flex-start",justifyContent:"space-between"},children:[e.jsx(s,{sx:{flex:1,mr:2},children:r.isComplexVariant?e.jsxs(s,{sx:{width:"100%"},children:[e.jsxs(c,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:1},children:["Measurements (",r.unitName,")"]}),e.jsxs(s,{sx:{display:"flex",gap:2,alignItems:"center"},children:[e.jsx(ne,{type:"number",placeholder:"X",value:m,onChange:t=>S(Number(t.target.value)),sx:{bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:2,px:2,py:1,width:"100%",fontWeight:"bold"}}),e.jsx(c,{sx:{color:"text.secondary",fontWeight:"bold"},children:"x"}),e.jsx(ne,{type:"number",placeholder:"Y",value:p,onChange:t=>I(Number(t.target.value)),sx:{bgcolor:"background.paper",border:1,borderColor:"divider",borderRadius:2,px:2,py:1,width:"100%",fontWeight:"bold"}})]}),e.jsxs(c,{variant:"body2",sx:{mt:1,fontWeight:"bold",color:"primary.main",textAlign:"right"},children:["Total: ",i," ",r.unitName,"²"]})]}):e.jsxs(e.Fragment,{children:[e.jsx(c,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:.5},children:"Quantity"}),e.jsx(tt,{quantity:i,onQuantityChange:x})]})}),e.jsxs(s,{sx:{textAlign:"right",marginTop:"auto",marginBottom:"auto"},children:[e.jsx(c,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",letterSpacing:.5,color:"text.secondary",display:"block",mb:.5},children:"Total Value"}),e.jsxs(c,{sx:{fontWeight:900,color:"text.primary",fontSize:"1.1rem"},children:["₹",(A*i).toFixed(2)]})]})]}),k.length>0&&e.jsxs(s,{sx:{mt:2,px:2.5},children:[e.jsxs(c,{variant:"caption",sx:{fontWeight:800,textTransform:"uppercase",color:"primary.main",mb:1.5,display:"block"},children:["Current Project Order (",k.length,")"]}),e.jsx(be,{spacing:1.5,children:k.map((t,l)=>e.jsxs(s,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center",p:1.5,bgcolor:"action.hover",borderRadius:2,border:1,borderColor:"divider"},children:[e.jsxs(s,{sx:{flex:1},children:[e.jsx(c,{variant:"body2",sx:{fontWeight:800},children:t.selectedSize?.label||"Default Size"}),e.jsxs(c,{variant:"caption",color:"text.secondary",sx:{fontWeight:600},children:[t.quantity," ",t.isComplexVariant?t.unitName||"units":"qty"," × ₹",t.totalPrice?.toFixed(2)]})]}),e.jsxs(s,{sx:{textAlign:"right",display:"flex",alignItems:"center",gap:1},children:[e.jsxs(c,{variant:"body2",sx:{fontWeight:900,color:"text.primary",mr:1},children:["₹",(t.totalPrice*t.quantity).toFixed(2)]}),e.jsx(N,{size:"small",color:"error",onClick:()=>L(t.id,t.selectedSize?.label),sx:{bgcolor:"error.lighter","&:hover":{bgcolor:"error.light"}},children:e.jsx(st,{sx:{fontSize:16}})})]})]},l))})]}),e.jsxs(s,{children:[e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,mb:1},children:[e.jsx(c,{variant:"subtitle1",sx:{fontWeight:800},children:"Description"}),e.jsx(he,{sx:{fontSize:16,color:"text.disabled"}})]}),e.jsx(c,{variant:"body2",color:"text.secondary",sx:{lineHeight:1.6,fontSize:"0.875rem"},children:r.detail}),(r.secondaryCategoryIds?.length>0||r.supplierIds?.length>0)&&e.jsxs(s,{sx:{mt:2,display:"flex",flexDirection:"column",gap:1.5},children:[r.secondaryCategoryIds?.length>0&&e.jsxs(s,{children:[e.jsx(c,{variant:"caption",sx:{fontWeight:800,color:"text.secondary",display:"block",mb:.5},children:"ALSO IN"}),e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:r.secondaryCategoryIds.map(t=>{const l=B.find(n=>n.id===t);return l?e.jsx(K,{label:l.name,size:"small",sx:{height:24,fontSize:"0.7rem"}},t):null})})]}),r.supplierIds?.length>0&&e.jsxs(s,{children:[e.jsx(c,{variant:"caption",sx:{fontWeight:800,color:"text.secondary",display:"block",mb:.5},children:"SUPPLIERS"}),e.jsx(s,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:r.supplierIds.map(t=>{const l=U.find(n=>n.id===t);return l?e.jsx(K,{label:l.name,onClick:()=>H(l),size:"small",variant:"outlined",sx:{height:24,fontSize:"0.7rem",cursor:"pointer","&:hover":{bgcolor:"action.hover"}}},t):null})})]})]}),e.jsxs(s,{sx:{mt:2.5,p:1.5,borderRadius:3,display:"flex",gap:1.5,bgcolor:"primary.light",background:"linear-gradient(135deg, rgba(242, 215, 13, 0.1) 0%, rgba(242, 215, 13, 0.05) 100%)",border:"1px solid rgba(242, 215, 13, 0.2)",alignItems:"center"},children:[e.jsx(s,{sx:{width:36,height:36,borderRadius:"10px",bgcolor:"primary.main",display:"flex",alignItems:"center",justifyContent:"center",color:"common.black",flexShrink:0},children:e.jsx(Be,{sx:{fontSize:18}})}),e.jsxs(s,{children:[e.jsx(c,{sx:{fontWeight:800,fontSize:"0.8rem",color:"text.primary"},children:"Free Desk Delivery"}),e.jsx(c,{sx:{fontSize:"0.7rem",color:"text.secondary",fontWeight:500},children:"Collection available within 2 hours at front desk"})]})]})]})]})]})]}),e.jsxs(s,{sx:{position:"fixed",bottom:0,left:0,right:0,p:2,bgcolor:"background.paper",borderTop:1,borderColor:"divider",maxWidth:"sm",mx:"auto",zIndex:10,display:"flex",gap:1.5},children:[e.jsx(X,{variant:"outlined",size:"large",onClick:a,sx:{flex:.4,py:2,borderRadius:4,fontWeight:800,textTransform:"none",fontSize:"1rem",borderColor:"divider",color:"text.secondary"},children:"Finish"}),e.jsx(X,{fullWidth:!0,variant:"contained",size:"large",onClick:_,disabled:!y||r.isComplexVariant&&(!m||!p),sx:{flex:1,py:2,borderRadius:4,fontWeight:800,textTransform:"none",fontSize:"0.9rem",bgcolor:!y||r.isComplexVariant&&(!m||!p)?"action.disabled":P?"success.main":"primary.main",color:!y||r.isComplexVariant&&(!m||!p)?"text.disabled":P?"white":"black",boxShadow:y?"0 8px 20px -4px rgba(242, 215, 13, 0.4)":"none","&:hover":{bgcolor:P?"success.dark":"primary.dark"}},children:y?r.isComplexVariant&&(!m||!p)?"Enter Dimensions":`${P?"Update":"Add"} ₹${(A*i).toFixed(1)}`:"Contact for Pricing"})]})]}),e.jsx(Wt,{open:!!V,handleClose:()=>H(null),supplier:V})]})},ae=({product:o,onClick:a,setActiveCategory:r,viewMode:i="thumbnail"})=>{const m=Z(p=>p.items).some(p=>p.id===o.id),S=p=>{p.stopPropagation(),a(o)};if(i==="chips"){const p=o.sizes&&o.sizes.length>0?`${o.sizes.length} vars`:o?.price!==void 0?`₹${o.price.toFixed(0)}`:"";return e.jsx(K,{variant:"outlined",onClick:()=>{o.categoryOnly?r(o.category):a(o)},avatar:o.src?e.jsx(re,{src:o.src,sx:{width:28,height:28}}):e.jsx(re,{sx:{bgcolor:"action.hover",width:28,height:28},children:e.jsx(te,{name:o.icon,sx:{fontSize:16}})}),label:e.jsxs(s,{sx:{display:"flex",alignItems:"center",gap:1,whiteSpace:"normal",py:.5},children:[e.jsx(c,{sx:{fontWeight:800,fontSize:"0.85rem",color:"text.primary",lineHeight:1.2,flex:1},children:o.name}),p&&e.jsx(c,{sx:{fontWeight:900,color:"primary.main",fontSize:"0.75rem",bgcolor:"rgba(242, 215, 13, 0.1)",px:.75,py:.25,borderRadius:1.5,whiteSpace:"nowrap"},children:p})]}),sx:{minHeight:50,height:"auto",borderRadius:3,borderColor:m?"primary.main":"divider",bgcolor:m?"rgba(242, 215, 13, 0.05)":"background.paper",border:1,"&:hover":{borderColor:"primary.main",bgcolor:"action.hover"},"& .MuiChip-label":{px:1.5,whiteSpace:"normal",display:"block",width:"100%"},"& .MuiChip-avatar":{ml:"4px !important"}}})}return e.jsx(ue,{onClick:()=>{o.categoryOnly?r(o.category):a(o)},sx:{cursor:"pointer",borderRadius:4,height:"100%",display:"flex",flexDirection:"column",bgcolor:"background.paper",border:1,borderColor:m?"primary.main":"divider",boxShadow:m?"0 0 15px rgba(242, 215, 13, 0.2)":"0 2px 6px -1px rgba(0, 0, 0, 0.05)",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)","&:hover":{borderColor:"primary.main",transform:"translateY(-4px)",boxShadow:"0 12px 20px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.05)"}},children:e.jsxs(s,{sx:{p:1,flex:1,display:"flex",flexDirection:"column"},children:[e.jsxs(s,{sx:{aspectRatio:"1/1",bgcolor:"action.hover",borderRadius:3,mb:1,display:"flex",alignItems:"center",justifyContent:"center",position:"relative",overflow:"hidden"},children:[o.src?e.jsx("img",{loading:"lazy",src:o.src,alt:o.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"10px"}}):e.jsx(s,{sx:{color:"text.disabled",opacity:.2},children:e.jsx(te,{name:o.icon,className:"!text-5xl"})}),e.jsxs(s,{sx:{position:"absolute",top:6,left:6,display:"flex",flexDirection:"column",gap:.5},children:[o.sale&&e.jsx(s,{sx:{bgcolor:"secondary.main",color:"white",fontSize:"0.6rem",fontWeight:900,px:.75,py:.25,borderRadius:1.5,textTransform:"uppercase",letterSpacing:.5},children:"Sale"}),o.isNew&&e.jsx(s,{sx:{bgcolor:"info.main",color:"black",fontSize:"0.6rem",fontWeight:900,px:.75,py:.25,borderRadius:1.5,textTransform:"uppercase",letterSpacing:.5},children:"New"})]}),!o.categoryOnly&&e.jsx(s,{sx:{position:"absolute",bottom:6,left:6,bgcolor:"rgba(0,0,0,0.7)",backdropFilter:"blur(4px)",px:1,py:.5,borderRadius:2,color:"white"},children:e.jsx(c,{sx:{fontSize:"0.75rem",fontWeight:900},children:o.sizes&&o.sizes.length>0?`${o.sizes.length} Variants`:o?.price!==void 0?`₹${o.price.toFixed(0)}`:"Contact for Price"})}),!o.categoryOnly&&e.jsx(N,{onClick:S,size:"small",sx:{position:"absolute",bottom:6,right:6,bgcolor:m?"primary.main":"rgba(255,255,255,0.9)",color:m?"black":"text.primary",width:32,height:32,borderRadius:2,transition:"all 0.2s","&:hover":{bgcolor:"primary.main",color:"black",transform:"scale(1.1)"}},children:e.jsx(Ne,{sx:{fontSize:20}})})]}),e.jsxs(s,{sx:{px:.5,pb:.5},children:[e.jsx(c,{variant:"caption",sx:{fontWeight:900,lineHeight:1.1,fontSize:"0.75rem",overflow:"hidden",textOverflow:"ellipsis",display:"-webkit-box",WebkitLineClamp:2,WebkitBoxOrient:"vertical",color:"text.primary",mb:o.categoryOnly?.5:0},children:o.name}),o.categoryOnly&&e.jsxs(e.Fragment,{children:[o.detail&&e.jsx(c,{variant:"caption",sx:{display:"block",fontSize:"0.65rem",color:"text.secondary",lineHeight:1.2,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:o.detail.length>40?`${o.detail.substring(0,40)}...`:o.detail}),o.sku&&e.jsxs(c,{variant:"caption",sx:{display:"block",fontSize:"0.6rem",fontWeight:700,color:"text.disabled",mt:.25,letterSpacing:.5},children:["SKU: ",o.sku]})]})]})]})})};export{fr as component};
