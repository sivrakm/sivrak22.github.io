import{f as ke,j as n,ak as Ie,a as Te,r as be,B as fe,I as De,A as Le,h as ne,m as Ce,a7 as Fe}from"./index-CBou6moi.js";import{G as pe}from"./Grid-IWINzjQb.js";import{C as we}from"./CardContent-_zFc-Dpr.js";import{B as ve}from"./Button-BflV7euM.js";import{C as Re}from"./CloudUpload-ticYINSt.js";import{T as Ne,a as Pe,b as Me,c as Oe,d as B,e as Ue}from"./TableRow-du5aDt-d.js";import"./isMuiElement-fD2fXW9_.js";const We=ke(n.jsx("path",{d:"M5 20h14v-2H5zM19 9h-4V3H9v6H5l7 7z"})),Be=ke(n.jsx("path",{d:"M20 6h-8l-2-2H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V8c0-1.1-.9-2-2-2m-6 10H6v-2h8zm4-4H6v-2h12z"})),He=ke(n.jsx("path",{d:"M10 10.02h5V21h-5zM17 21h3c1.1 0 2-.9 2-2v-9h-5zm3-18H5c-1.1 0-2 .9-2 2v3h19V5c0-1.1-.9-2-2-2M3 19c0 1.1.9 2 2 2h3V10H3z"}));var ge={exports:{}};var qe=ge.exports,ze;function Je(){return ze||(ze=1,(function(_e,Z){((de,k)=>{_e.exports=k()})(qe,function de(){var k=typeof self<"u"?self:typeof window<"u"?window:k!==void 0?k:{},re,V=!k.document&&!!k.postMessage,ae=k.IS_PAPA_WORKER||!1,oe={},me=0,o={};function Q(e){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},(function(t){var r=xe(t);r.chunkSize=parseInt(r.chunkSize),t.step||t.chunk||(r.chunkSize=null),this._handle=new P(r),(this._handle.streamer=this)._config=r}).call(this,e),this.parseChunk=function(t,r){var s=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<s){let c=this._config.newline;c||(i=this._config.quoteChar||'"',c=this._handle.guessLineEndings(t,i)),t=[...t.split(c).slice(s)].join(c)}this.isFirstChunk&&b(this._config.beforeFirstChunk)&&(i=this._config.beforeFirstChunk(t))!==void 0&&(t=i),this.isFirstChunk=!1,this._halted=!1;var s=this._partialLine+t,i=(this._partialLine="",this._handle.parse(s,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(t=i.meta.cursor,s=(this._finished||(this._partialLine=s.substring(t-this._baseIndex),this._baseIndex=t),i&&i.data&&(this._rowCount+=i.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),ae)k.postMessage({results:i,workerId:o.WORKER_ID,finished:s});else if(b(this._config.chunk)&&!r){if(this._config.chunk(i,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=i=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),this._completed||!s||!b(this._config.complete)||i&&i.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),s||i&&i.meta.paused||this._nextChunk(),i}this._halted=!0},this._sendError=function(t){b(this._config.error)?this._config.error(t):ae&&this._config.error&&k.postMessage({workerId:o.WORKER_ID,error:t,finished:!1})}}function E(e){var t;(e=e||{}).chunkSize||(e.chunkSize=o.RemoteChunkSize),Q.call(this,e),this._nextChunk=V?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(r){this._input=r,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(t=new XMLHttpRequest,this._config.withCredentials&&(t.withCredentials=this._config.withCredentials),V||(t.onload=ie(this._chunkLoaded,this),t.onerror=ie(this._chunkError,this)),t.open(this._config.downloadRequestBody?"POST":"GET",this._input,!V),this._config.downloadRequestHeaders){var r,s=this._config.downloadRequestHeaders;for(r in s)t.setRequestHeader(r,s[r])}var i;this._config.chunkSize&&(i=this._start+this._config.chunkSize-1,t.setRequestHeader("Range","bytes="+this._start+"-"+i));try{t.send(this._config.downloadRequestBody)}catch(c){this._chunkError(c.message)}V&&t.status===0&&this._chunkError()}},this._chunkLoaded=function(){t.readyState===4&&(t.status<200||400<=t.status?this._chunkError():(this._start+=this._config.chunkSize||t.responseText.length,this._finished=!this._config.chunkSize||this._start>=(r=>(r=r.getResponseHeader("Content-Range"))!==null?parseInt(r.substring(r.lastIndexOf("/")+1)):-1)(t),this.parseChunk(t.responseText)))},this._chunkError=function(r){r=t.statusText||r,this._sendError(new Error(r))}}function L(e){(e=e||{}).chunkSize||(e.chunkSize=o.LocalChunkSize),Q.call(this,e);var t,r,s=typeof FileReader<"u";this.stream=function(i){this._input=i,r=i.slice||i.webkitSlice||i.mozSlice,s?((t=new FileReader).onload=ie(this._chunkLoaded,this),t.onerror=ie(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var i=this._input,c=(this._config.chunkSize&&(c=Math.min(this._start+this._config.chunkSize,this._input.size),i=r.call(i,this._start,c)),t.readAsText(i,this._config.encoding));s||this._chunkLoaded({target:{result:c}})},this._chunkLoaded=function(i){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(i.target.result)},this._chunkError=function(){this._sendError(t.error)}}function O(e){var t;Q.call(this,e=e||{}),this.stream=function(r){return t=r,this._nextChunk()},this._nextChunk=function(){var r,s;if(!this._finished)return r=this._config.chunkSize,t=r?(s=t.substring(0,r),t.substring(r)):(s=t,""),this._finished=!t,this.parseChunk(s)}}function H(e){Q.call(this,e=e||{});var t=[],r=!0,s=!1;this.pause=function(){Q.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){Q.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(i){this._input=i,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){s&&t.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),t.length?this.parseChunk(t.shift()):r=!0},this._streamData=ie(function(i){try{t.push(typeof i=="string"?i:i.toString(this._config.encoding)),r&&(r=!1,this._checkIsFinished(),this.parseChunk(t.shift()))}catch(c){this._streamError(c)}},this),this._streamError=ie(function(i){this._streamCleanUp(),this._sendError(i)},this),this._streamEnd=ie(function(){this._streamCleanUp(),s=!0,this._streamData("")},this),this._streamCleanUp=ie(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function P(e){var t,r,s,i,c=Math.pow(2,53),I=-c,q=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,J=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,f=this,C=0,l=0,M=!1,d=!1,p=[],a={data:[],errors:[],meta:{}};function T(g){return e.skipEmptyLines==="greedy"?g.join("").trim()==="":g.length===1&&g[0].length===0}function A(){if(a&&s&&(K("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+o.DefaultDelimiter+"'"),s=!1),e.skipEmptyLines&&(a.data=a.data.filter(function(h){return!T(h)})),N()){let h=function(R,D){b(e.transformHeader)&&(R=e.transformHeader(R,D)),p.push(R)};if(a)if(Array.isArray(a.data[0])){for(var g=0;N()&&g<a.data.length;g++)a.data[g].forEach(h);a.data.splice(0,1)}else a.data.forEach(h)}function x(h,R){for(var D=e.header?{}:[],y=0;y<h.length;y++){var v=y,_=h[y],_=((G,u)=>(j=>(e.dynamicTypingFunction&&e.dynamicTyping[j]===void 0&&(e.dynamicTyping[j]=e.dynamicTypingFunction(j)),(e.dynamicTyping[j]||e.dynamicTyping)===!0))(G)?u==="true"||u==="TRUE"||u!=="false"&&u!=="FALSE"&&((j=>{if(q.test(j)&&(j=parseFloat(j),I<j&&j<c))return 1})(u)?parseFloat(u):J.test(u)?new Date(u):u===""?null:u):u)(v=e.header?y>=p.length?"__parsed_extra":p[y]:v,_=e.transform?e.transform(_,v):_);v==="__parsed_extra"?(D[v]=D[v]||[],D[v].push(_)):D[v]=_}return e.header&&(y>p.length?K("FieldMismatch","TooManyFields","Too many fields: expected "+p.length+" fields but parsed "+y,l+R):y<p.length&&K("FieldMismatch","TooFewFields","Too few fields: expected "+p.length+" fields but parsed "+y,l+R)),D}var w;a&&(e.header||e.dynamicTyping||e.transform)&&(w=1,!a.data.length||Array.isArray(a.data[0])?(a.data=a.data.map(x),w=a.data.length):a.data=x(a.data,0),e.header&&a.meta&&(a.meta.fields=p),l+=w)}function N(){return e.header&&p.length===0}function K(g,x,w,h){g={type:g,code:x,message:w},h!==void 0&&(g.row=h),a.errors.push(g)}b(e.step)&&(i=e.step,e.step=function(g){a=g,N()?A():(A(),a.data.length!==0&&(C+=g.data.length,e.preview&&C>e.preview?r.abort():(a.data=a.data[0],i(a,f))))}),this.parse=function(g,x,w){var h=e.quoteChar||'"',h=(e.newline||(e.newline=this.guessLineEndings(g,h)),s=!1,e.delimiter?b(e.delimiter)&&(e.delimiter=e.delimiter(g),a.meta.delimiter=e.delimiter):((h=((R,D,y,v,_)=>{var G,u,j,se;_=_||[",","	","|",";",o.RECORD_SEP,o.UNIT_SEP];for(var le=0;le<_.length;le++){for(var Y,ue=_[le],U=0,X=0,F=0,W=(j=void 0,new z({comments:v,delimiter:ue,newline:D,preview:10}).parse(R)),te=0;te<W.data.length;te++)y&&T(W.data[te])?F++:(Y=W.data[te].length,X+=Y,j===void 0?j=Y:0<Y&&(U+=Math.abs(Y-j),j=Y));0<W.data.length&&(X/=W.data.length-F),(u===void 0||U<=u)&&(se===void 0||se<X)&&1.99<X&&(u=U,G=ue,se=X)}return{successful:!!(e.delimiter=G),bestDelimiter:G}})(g,e.newline,e.skipEmptyLines,e.comments,e.delimitersToGuess)).successful?e.delimiter=h.bestDelimiter:(s=!0,e.delimiter=o.DefaultDelimiter),a.meta.delimiter=e.delimiter),xe(e));return e.preview&&e.header&&h.preview++,t=g,r=new z(h),a=r.parse(t,x,w),A(),M?{meta:{paused:!0}}:a||{meta:{paused:!1}}},this.paused=function(){return M},this.pause=function(){M=!0,r.abort(),t=b(e.chunk)?"":t.substring(r.getCharIndex())},this.resume=function(){f.streamer._halted?(M=!1,f.streamer.parseChunk(t,!0)):setTimeout(f.resume,3)},this.aborted=function(){return d},this.abort=function(){d=!0,r.abort(),a.meta.aborted=!0,b(e.complete)&&e.complete(a),t=""},this.guessLineEndings=function(R,h){R=R.substring(0,1048576);var h=new RegExp(m(h)+"([^]*?)"+m(h),"gm"),w=(R=R.replace(h,"")).split("\r"),h=R.split(`
`),R=1<h.length&&h[0].length<w[0].length;if(w.length===1||R)return`
`;for(var D=0,y=0;y<w.length;y++)w[y][0]===`
`&&D++;return D>=w.length/2?`\r
`:"\r"}}function m(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function z(e){var t=(e=e||{}).delimiter,r=e.newline,s=e.comments,i=e.step,c=e.preview,I=e.fastMode,q=null,J=!1,f=e.quoteChar==null?'"':e.quoteChar,C=f;if(e.escapeChar!==void 0&&(C=e.escapeChar),(typeof t!="string"||-1<o.BAD_DELIMITERS.indexOf(t))&&(t=","),s===t)throw new Error("Comment character same as delimiter");s===!0?s="#":(typeof s!="string"||-1<o.BAD_DELIMITERS.indexOf(s))&&(s=!1),r!==`
`&&r!=="\r"&&r!==`\r
`&&(r=`
`);var l=0,M=!1;this.parse=function(d,p,a){if(typeof d!="string")throw new Error("Input must be a string");var T=d.length,A=t.length,N=r.length,K=s.length,g=b(i),x=[],w=[],h=[],R=l=0;if(!d)return U();if(I||I!==!1&&d.indexOf(f)===-1){for(var D=d.split(r),y=0;y<D.length;y++){if(h=D[y],l+=h.length,y!==D.length-1)l+=r.length;else if(a)return U();if(!s||h.substring(0,K)!==s){if(g){if(x=[],se(h.split(t)),X(),M)return U()}else se(h.split(t));if(c&&c<=y)return x=x.slice(0,c),U(!0)}}return U()}for(var v=d.indexOf(t,l),_=d.indexOf(r,l),G=new RegExp(m(C)+m(f),"g"),u=d.indexOf(f,l);;)if(d[l]===f)for(u=l,l++;;){if((u=d.indexOf(f,u+1))===-1)return a||w.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:x.length,index:l}),Y();if(u===T-1)return Y(d.substring(l,u).replace(G,f));if(f===C&&d[u+1]===C)u++;else if(f===C||u===0||d[u-1]!==C){v!==-1&&v<u+1&&(v=d.indexOf(t,u+1));var j=le((_=_!==-1&&_<u+1?d.indexOf(r,u+1):_)===-1?v:Math.min(v,_));if(d.substr(u+1+j,A)===t){h.push(d.substring(l,u).replace(G,f)),d[l=u+1+j+A]!==f&&(u=d.indexOf(f,l)),v=d.indexOf(t,l),_=d.indexOf(r,l);break}if(j=le(_),d.substring(u+1+j,u+1+j+N)===r){if(h.push(d.substring(l,u).replace(G,f)),ue(u+1+j+N),v=d.indexOf(t,l),u=d.indexOf(f,l),g&&(X(),M))return U();if(c&&x.length>=c)return U(!0);break}w.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:x.length,index:l}),u++}}else if(s&&h.length===0&&d.substring(l,l+K)===s){if(_===-1)return U();l=_+N,_=d.indexOf(r,l),v=d.indexOf(t,l)}else if(v!==-1&&(v<_||_===-1))h.push(d.substring(l,v)),l=v+A,v=d.indexOf(t,l);else{if(_===-1)break;if(h.push(d.substring(l,_)),ue(_+N),g&&(X(),M))return U();if(c&&x.length>=c)return U(!0)}return Y();function se(F){x.push(F),R=l}function le(F){var W=0;return W=F!==-1&&(F=d.substring(u+1,F))&&F.trim()===""?F.length:W}function Y(F){return a||(F===void 0&&(F=d.substring(l)),h.push(F),l=T,se(h),g&&X()),U()}function ue(F){l=F,se(h),h=[],_=d.indexOf(r,l)}function U(F){if(e.header&&!p&&x.length&&!J){var W=x[0],te=Object.create(null),ye=new Set(W);let Ee=!1;for(let he=0;he<W.length;he++){let ee=W[he];if(te[ee=b(e.transformHeader)?e.transformHeader(ee,he):ee]){let ce,Se=te[ee];for(;ce=ee+"_"+Se,Se++,ye.has(ce););ye.add(ce),W[he]=ce,te[ee]++,Ee=!0,(q=q===null?{}:q)[ce]=ee}else te[ee]=1,W[he]=ee;ye.add(ee)}Ee&&console.warn("Duplicate headers found and renamed."),J=!0}return{data:x,errors:w,meta:{delimiter:t,linebreak:r,aborted:M,truncated:!!F,cursor:R+(p||0),renamedHeaders:q}}}function X(){i(U()),x=[],w=[]}},this.abort=function(){M=!0},this.getCharIndex=function(){return l}}function S(e){var t=e.data,r=oe[t.workerId],s=!1;if(t.error)r.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){s=!0,$(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:je,resume:je};if(b(r.userStep)){for(var c=0;c<t.results.data.length&&(r.userStep({data:t.results.data[c],errors:t.results.errors,meta:t.results.meta},i),!s);c++);delete t.results}else b(r.userChunk)&&(r.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!s&&$(t.workerId,t.results)}function $(e,t){var r=oe[e];b(r.userComplete)&&r.userComplete(t),r.terminate(),delete oe[e]}function je(){throw new Error("Not implemented.")}function xe(e){if(typeof e!="object"||e===null)return e;var t,r=Array.isArray(e)?[]:{};for(t in e)r[t]=xe(e[t]);return r}function ie(e,t){return function(){e.apply(t,arguments)}}function b(e){return typeof e=="function"}return o.parse=function(e,t){var r=(t=t||{}).dynamicTyping||!1;if(b(r)&&(t.dynamicTypingFunction=r,r={}),t.dynamicTyping=r,t.transform=!!b(t.transform)&&t.transform,!t.worker||!o.WORKERS_SUPPORTED)return r=null,o.NODE_STREAM_INPUT,typeof e=="string"?(e=(s=>s.charCodeAt(0)!==65279?s:s.slice(1))(e),r=new(t.download?E:O)(t)):e.readable===!0&&b(e.read)&&b(e.on)?r=new H(t):(k.File&&e instanceof File||e instanceof Object)&&(r=new L(t)),r.stream(e);(r=(()=>{var s;return!!o.WORKERS_SUPPORTED&&(s=(()=>{var i=k.URL||k.webkitURL||null,c=de.toString();return o.BLOB_URL||(o.BLOB_URL=i.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",c,")();"],{type:"text/javascript"})))})(),(s=new k.Worker(s)).onmessage=S,s.id=me++,oe[s.id]=s)})()).userStep=t.step,r.userChunk=t.chunk,r.userComplete=t.complete,r.userError=t.error,t.step=b(t.step),t.chunk=b(t.chunk),t.complete=b(t.complete),t.error=b(t.error),delete t.worker,r.postMessage({input:e,config:t,workerId:r.id})},o.unparse=function(e,t){var r=!1,s=!0,i=",",c=`\r
`,I='"',q=I+I,J=!1,f=null,C=!1,l=((()=>{if(typeof t=="object"){if(typeof t.delimiter!="string"||o.BAD_DELIMITERS.filter(function(p){return t.delimiter.indexOf(p)!==-1}).length||(i=t.delimiter),typeof t.quotes!="boolean"&&typeof t.quotes!="function"&&!Array.isArray(t.quotes)||(r=t.quotes),typeof t.skipEmptyLines!="boolean"&&typeof t.skipEmptyLines!="string"||(J=t.skipEmptyLines),typeof t.newline=="string"&&(c=t.newline),typeof t.quoteChar=="string"&&(I=t.quoteChar),typeof t.header=="boolean"&&(s=t.header),Array.isArray(t.columns)){if(t.columns.length===0)throw new Error("Option columns is empty");f=t.columns}t.escapeChar!==void 0&&(q=t.escapeChar+I),t.escapeFormulae instanceof RegExp?C=t.escapeFormulae:typeof t.escapeFormulae=="boolean"&&t.escapeFormulae&&(C=/^[=+\-@\t\r].*$/)}})(),new RegExp(m(I),"g"));if(typeof e=="string"&&(e=JSON.parse(e)),Array.isArray(e)){if(!e.length||Array.isArray(e[0]))return M(null,e,J);if(typeof e[0]=="object")return M(f||Object.keys(e[0]),e,J)}else if(typeof e=="object")return typeof e.data=="string"&&(e.data=JSON.parse(e.data)),Array.isArray(e.data)&&(e.fields||(e.fields=e.meta&&e.meta.fields||f),e.fields||(e.fields=Array.isArray(e.data[0])?e.fields:typeof e.data[0]=="object"?Object.keys(e.data[0]):[]),Array.isArray(e.data[0])||typeof e.data[0]=="object"||(e.data=[e.data])),M(e.fields||[],e.data||[],J);throw new Error("Unable to serialize unrecognized input");function M(p,a,T){var A="",N=(typeof p=="string"&&(p=JSON.parse(p)),typeof a=="string"&&(a=JSON.parse(a)),Array.isArray(p)&&0<p.length),K=!Array.isArray(a[0]);if(N&&s){for(var g=0;g<p.length;g++)0<g&&(A+=i),A+=d(p[g],g);0<a.length&&(A+=c)}for(var x=0;x<a.length;x++){var w=(N?p:a[x]).length,h=!1,R=N?Object.keys(a[x]).length===0:a[x].length===0;if(T&&!N&&(h=T==="greedy"?a[x].join("").trim()==="":a[x].length===1&&a[x][0].length===0),T==="greedy"&&N){for(var D=[],y=0;y<w;y++){var v=K?p[y]:y;D.push(a[x][v])}h=D.join("").trim()===""}if(!h){for(var _=0;_<w;_++){0<_&&!R&&(A+=i);var G=N&&K?p[_]:_;A+=d(a[x][G],_)}x<a.length-1&&(!T||0<w&&!R)&&(A+=c)}}return A}function d(p,a){var T,A;return p==null?"":p.constructor===Date?JSON.stringify(p).slice(1,25):(A=!1,C&&typeof p=="string"&&C.test(p)&&(p="'"+p,A=!0),T=p.toString().replace(l,q),(A=A||r===!0||typeof r=="function"&&r(p,a)||Array.isArray(r)&&r[a]||((N,K)=>{for(var g=0;g<K.length;g++)if(-1<N.indexOf(K[g]))return!0;return!1})(T,o.BAD_DELIMITERS)||-1<T.indexOf(i)||T.charAt(0)===" "||T.charAt(T.length-1)===" ")?I+T+I:T)}},o.RECORD_SEP="",o.UNIT_SEP="",o.BYTE_ORDER_MARK="\uFEFF",o.BAD_DELIMITERS=["\r",`
`,'"',o.BYTE_ORDER_MARK],o.WORKERS_SUPPORTED=!V&&!!k.Worker,o.NODE_STREAM_INPUT=1,o.LocalChunkSize=10485760,o.RemoteChunkSize=5242880,o.DefaultDelimiter=",",o.Parser=z,o.ParserHandle=P,o.NetworkStreamer=E,o.FileStreamer=L,o.StringStreamer=O,o.ReadableStreamStreamer=H,k.jQuery&&((re=k.jQuery).fn.parse=function(e){var t=e.config||{},r=[];return this.each(function(c){if(!(re(this).prop("tagName").toUpperCase()==="INPUT"&&re(this).attr("type").toLowerCase()==="file"&&k.FileReader)||!this.files||this.files.length===0)return!0;for(var I=0;I<this.files.length;I++)r.push({file:this.files[I],inputElem:this,instanceConfig:re.extend({},t)})}),s(),this;function s(){if(r.length===0)b(e.complete)&&e.complete();else{var c,I,q,J,f=r[0];if(b(e.before)){var C=e.before(f.file,f.inputElem);if(typeof C=="object"){if(C.action==="abort")return c="AbortError",I=f.file,q=f.inputElem,J=C.reason,void(b(e.error)&&e.error({name:c},I,q,J));if(C.action==="skip")return void i();typeof C.config=="object"&&(f.instanceConfig=re.extend(f.instanceConfig,C.config))}else if(C==="skip")return void i()}var l=f.instanceConfig.complete;f.instanceConfig.complete=function(M){b(l)&&l(M,f.file,f.inputElem),i()},o.parse(f.file,f.instanceConfig)}}function i(){r.splice(0,1),s()}}),ae&&(k.onmessage=function(e){e=e.data,o.WORKER_ID===void 0&&e&&(o.WORKER_ID=e.workerId),typeof e.input=="string"?k.postMessage({workerId:o.WORKER_ID,results:o.parse(e.input,e.config),finished:!0}):(k.File&&e.input instanceof File||e.input instanceof Object)&&(e=o.parse(e.input,e.config))&&k.postMessage({workerId:o.WORKER_ID,results:e,finished:!0})}),(E.prototype=Object.create(Q.prototype)).constructor=E,(L.prototype=Object.create(Q.prototype)).constructor=L,(O.prototype=Object.create(O.prototype)).constructor=O,(H.prototype=Object.create(Q.prototype)).constructor=H,o})})(ge)),ge.exports}var Ke=Je();const Ae=Ie(Ke);function et(){const _e=Te(),[Z,de]=be.useState([]),[k,re]=be.useState(""),[V,ae]=be.useState(null),oe=E=>{const L=E.target.files?.[0];if(!L)return;re(L.name),ae("json");const O=new FileReader;O.onload=H=>{try{const P=JSON.parse(H.target?.result),m=P.products||P;if(!Array.isArray(m)){alert("Invalid JSON format. Expected an array of products.");return}const z=[];m.forEach(S=>{Array.isArray(S.sizes)&&S.sizes.length>0?S.sizes.forEach($=>{z.push({...S,sizes:void 0,size_label:$.label||"",size_price:$.price??"",size_stock:$.stock??"",size_purchasePrice:$.purchasePrice??"",size_returnStock:$.returnStock??""})}):z.push({...S,sizes:void 0,size_label:"",size_price:"",size_stock:"",size_purchasePrice:"",size_returnStock:""})}),de(z)}catch(P){console.error(P),alert("Error parsing JSON file.")}},O.readAsText(L)},me=E=>{const L=E.target.files?.[0];L&&(re(L.name),ae("csv"),Ae.parse(L,{header:!0,dynamicTyping:!0,complete:O=>{const H=O.data.reduce((m,z)=>{const S=z.id;return S&&(m[S]||(m[S]={...z,sizes:[]},delete m[S].size_label,delete m[S].size_price,delete m[S].size_stock,delete m[S].size_purchasePrice,delete m[S].size_returnStock,Object.keys(m[S]).forEach($=>{m[S][$]===null&&(m[S][$]="")})),(z.size_label!==null&&z.size_label!==""||z.size_price!==null&&z.size_price!=="")&&m[S].sizes.push({label:String(z.size_label||""),price:Number(z.size_price)||0,stock:Number(z.size_stock)||0,purchasePrice:Number(z.size_purchasePrice)||0,returnStock:Number(z.size_returnStock)||0})),m},{}),P=Object.values(H).map(m=>({...m,categoryOnly:m.categoryOnly==="true"||m.categoryOnly===!0,isNew:m.isNew==="true"||m.isNew===!0,sale:m.sale==="true"||m.sale===!0}));de(P)},error:O=>{console.error(O),alert("Error parsing CSV file.")}}))},o=()=>{if(Z.length===0)return;const E=new Set;Z.forEach(z=>Object.keys(z).forEach(S=>E.add(S)));const L=Array.from(E),O=Ae.unparse({fields:L,data:Z}),H=new Blob([O],{type:"text/csv;charset=utf-8;"}),P=document.createElement("a"),m=URL.createObjectURL(H);P.setAttribute("href",m),P.setAttribute("download",k.replace(".json",".csv")),P.style.visibility="hidden",document.body.appendChild(P),P.click(),document.body.removeChild(P)},Q=()=>{if(Z.length===0)return;const E=JSON.stringify({products:Z},null,2),L=new Blob([E],{type:"application/json"}),O=document.createElement("a"),H=URL.createObjectURL(L);O.setAttribute("href",H),O.setAttribute("download",k.replace(".csv",".json")),O.style.visibility="hidden",document.body.appendChild(O),O.click(),document.body.removeChild(O)};return n.jsxs(fe,{sx:{p:{xs:2,md:4},bgcolor:"background.default",minHeight:"100vh"},children:[n.jsxs(fe,{sx:{display:"flex",alignItems:"center",mb:4,gap:2},children:[n.jsx(De,{onClick:()=>_e({to:"/admin"}),sx:{bgcolor:"background.paper"},children:n.jsx(Le,{})}),n.jsx(ne,{variant:"h4",sx:{fontWeight:"bold"},children:"Catalog Converter"})]}),n.jsxs(pe,{container:!0,spacing:3,children:[n.jsx(pe,{size:{xs:12,md:6},children:n.jsx(Ce,{sx:{height:"100%",borderRadius:4,border:"1px dashed",borderColor:"divider",bgcolor:"background.paper"},children:n.jsxs(we,{sx:{textAlign:"center",py:6},children:[n.jsx(Be,{sx:{fontSize:48,mb:2,color:"primary.main"}}),n.jsx(ne,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"JSON to CSV"}),n.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Upload `offline_catalog.json` to edit in Excel or Google Sheets."}),n.jsxs(ve,{variant:"contained",component:"label",startIcon:n.jsx(Re,{}),sx:{borderRadius:3,px:4,py:1.5,fontWeight:"bold"},children:["Upload JSON",n.jsx("input",{type:"file",hidden:!0,accept:".json",onChange:oe})]})]})})}),n.jsx(pe,{size:{xs:12,md:6},children:n.jsx(Ce,{sx:{height:"100%",borderRadius:4,border:"1px dashed",borderColor:"divider",bgcolor:"background.paper"},children:n.jsxs(we,{sx:{textAlign:"center",py:6},children:[n.jsx(He,{sx:{fontSize:48,mb:2,color:"info.main"}}),n.jsx(ne,{variant:"h6",gutterBottom:!0,sx:{fontWeight:"bold"},children:"CSV to JSON"}),n.jsx(ne,{variant:"body2",color:"text.secondary",sx:{mb:3},children:"Convert your edited CSV back to JSON for the app."}),n.jsxs(ve,{variant:"contained",component:"label",color:"info",startIcon:n.jsx(Re,{}),sx:{borderRadius:3,px:4,py:1.5,fontWeight:"bold",color:"white"},children:["Upload CSV",n.jsx("input",{type:"file",hidden:!0,accept:".csv",onChange:me})]})]})})}),Z.length>0&&n.jsx(pe,{size:{xs:12},children:n.jsxs(Fe,{sx:{p:0,borderRadius:4,overflow:"hidden",boxShadow:3},children:[n.jsxs(fe,{sx:{p:2,bgcolor:"action.hover",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[n.jsxs(ne,{variant:"subtitle1",sx:{fontWeight:"bold"},children:["Preview: ",k," (",Z.length," items)"]}),n.jsxs(ve,{variant:"contained",color:V==="json"?"success":"primary",startIcon:n.jsx(We,{}),onClick:V==="json"?o:Q,sx:{borderRadius:2,fontWeight:"bold"},children:["Download ",V==="json"?"CSV":"JSON"]})]}),n.jsx(Ne,{sx:{maxHeight:400},children:n.jsxs(Pe,{stickyHeader:!0,size:"small",children:[n.jsx(Me,{children:n.jsxs(Oe,{children:[n.jsx(B,{sx:{fontWeight:"bold"},children:"ID"}),n.jsx(B,{sx:{fontWeight:"bold"},children:"Name"}),n.jsx(B,{sx:{fontWeight:"bold"},children:"Category"}),n.jsx(B,{sx:{fontWeight:"bold"},children:"Price"}),V==="json"?n.jsxs(n.Fragment,{children:[n.jsx(B,{sx:{fontWeight:"bold"},children:"Size Label"}),n.jsx(B,{sx:{fontWeight:"bold"},children:"Size Price"})]}):n.jsx(B,{sx:{fontWeight:"bold"},children:"Sizes (Count)"})]})}),n.jsx(Ue,{children:Z.slice(0,10).map((E,L)=>n.jsxs(Oe,{children:[n.jsx(B,{children:E.id}),n.jsx(B,{sx:{fontWeight:500},children:E.name}),n.jsx(B,{children:E.category}),n.jsxs(B,{children:["â‚¹",E.price]}),V==="json"?n.jsxs(n.Fragment,{children:[n.jsx(B,{children:E.size_label}),n.jsx(B,{children:E.size_price})]}):n.jsxs(B,{sx:{color:"text.secondary",fontSize:"0.75rem"},children:[Array.isArray(E.sizes)?E.sizes.length:0," sizes"]})]},L))})]})}),Z.length>10&&n.jsx(fe,{sx:{p:1,textAlign:"center",bgcolor:"action.hover"},children:n.jsx(ne,{variant:"caption",color:"text.secondary",children:"Showing first 10 items. Download to see all data."})})]})})]})]})}export{et as component};
