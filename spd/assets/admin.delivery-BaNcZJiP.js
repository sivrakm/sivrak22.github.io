import{f as Q,j as e,r as d,B as n,I as m,h as l,S as g,E as Y,l as q,a7 as H}from"./index-CBou6moi.js";import{u as U}from"./deliveryStore-DfoFwVpJ.js";import{Y as _}from"./index-DWku4nr_.js";import{A as J,T as K,a as X}from"./ArrowBackIosNew-CIbvTB3E.js";import{C as Z}from"./Container-DtrslpOQ.js";import{A as $}from"./AddCircle-cTCxnp_u.js";import{G as r}from"./Grid-IWINzjQb.js";import{T as o}from"./TextField-RXHFbKtb.js";import{I as c}from"./InputAdornment-DpBsnqo5.js";import{P as ee}from"./Person-Ppu-bxkp.js";import{P as S}from"./Phone-CMIUrlWo.js";import{M as z}from"./Mail-DsOhcTLt.js";import{M as P}from"./MenuItem-CGHN6H8j.js";import{L as w}from"./LocationOn-CDKi7nvV.js";import{B as p}from"./Button-BflV7euM.js";import{S as se}from"./Save-BYobhu1a.js";import{S as te}from"./Search-DEj_P3US.js";import{C as re}from"./Chip-BXUFp7Xu.js";import{E as ie}from"./Edit-FTKVc5Ef.js";import{D as oe}from"./Delete-DRnHzxX1.js";import{D as ae,a as ne,b as le}from"./DialogTitle-f2PvcPNk.js";import{D as de}from"./DialogContentText-QZEy0qxP.js";import{D as ce}from"./DialogActions-BLBSxaJt.js";import"./isMuiElement-fD2fXW9_.js";import"./listItemTextClasses-CNe8SJtV.js";import"./dividerClasses-aUSE17Cl.js";const A=Q(e.jsx("path",{d:"M18.92 6.01C18.72 5.42 18.16 5 17.5 5h-11c-.66 0-1.21.42-1.42 1.01L3 12v8c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-1h12v1c0 .55.45 1 1 1h1c.55 0 1-.45 1-1v-8zM6.5 16c-.83 0-1.5-.67-1.5-1.5S5.67 13 6.5 13s1.5.67 1.5 1.5S7.33 16 6.5 16m11 0c-.83 0-1.5-.67-1.5-1.5s.67-1.5 1.5-1.5 1.5.67 1.5 1.5-.67 1.5-1.5 1.5M5 11l1.5-4.5h11L19 11z"}));function Oe(){const{deliveryPersons:N,fetchDeliveryPersons:W,addDeliveryPerson:T,updateDeliveryPerson:k,deleteDeliveryPerson:M}=U();d.useEffect(()=>{W()},[]);const[x,b]=d.useState(null),[f,j]=d.useState(!1),[R,u]=d.useState(!1),[y,C]=d.useState(null),[h,E]=d.useState(""),[i,v]=d.useState({name:"",phone:"",email:"",address:"",vehicleNumber:"",vehicleType:"",idName:"",idCode:"",status:"active"}),a=(s,t)=>{v(D=>({...D,[s]:t}))},O=async()=>{if(!i.name||!i.phone){alert("Name and Phone are required");return}try{x?await k({id:x,...i}):await T(i),I()}catch(s){console.error("Error saving delivery person:",s),alert("Failed to save delivery person")}},B=s=>{const{id:t,createdAt:D,...V}=s;v(V),b(t),j(!0),window.scrollTo({top:0,behavior:"smooth"})},L=s=>{C(s),u(!0)},F=async()=>{y&&(await M(y),u(!1),C(null))},I=()=>{v({name:"",phone:"",email:"",address:"",vehicleNumber:"",vehicleType:"",idName:"",idCode:"",status:"active"}),b(null),j(!1),window.scrollTo({top:0,behavior:"smooth"})},G=N.filter(s=>s.name.toLowerCase().includes(h.toLowerCase())||s.phone.includes(h)||s.vehicleNumber?.toLowerCase().includes(h.toLowerCase()));return e.jsxs(n,{sx:{minHeight:"100vh",bgcolor:"background.default",pb:10},children:[e.jsx(J,{position:"sticky",color:"default",elevation:0,sx:{bgcolor:"background.paper",borderBottom:1,borderColor:"divider"},children:e.jsxs(K,{children:[e.jsx(m,{onClick:()=>window.history.back(),edge:"start",children:e.jsx(X,{})}),e.jsx(l,{variant:"h6",component:"h1",sx:{flexGrow:1,textAlign:"center",pr:5,fontWeight:"bold"},children:"Manage Delivery Persons"})]})}),e.jsxs(Z,{maxWidth:"md",sx:{py:3,display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(n,{sx:{border:1,borderColor:"divider",borderRadius:3,overflow:"hidden",bgcolor:"background.paper"},children:[e.jsxs(n,{onClick:()=>j(!f),sx:{display:"flex",alignItems:"center",justifyContent:"space-between",cursor:"pointer",p:2,bgcolor:"action.hover",transition:"background-color 0.2s","&:hover":{bgcolor:"action.selected"}},children:[e.jsxs(g,{direction:"row",spacing:1.5,alignItems:"center",children:[e.jsx($,{color:"primary"}),e.jsx(l,{variant:"subtitle1",sx:{fontWeight:"bold"},children:x?"Edit Delivery Person":"Add New Delivery Person"})]}),e.jsx(m,{size:"small",sx:{transform:f?"rotate(180deg)":"none",transition:"transform 0.3s"},children:e.jsx(Y,{})})]}),e.jsx(q,{in:f,children:e.jsxs(n,{sx:{p:3,display:"flex",flexDirection:"column",gap:3},children:[e.jsxs(r,{container:!0,spacing:2,children:[e.jsx(r,{size:{xs:12,sm:6},children:e.jsx(o,{fullWidth:!0,label:"Full Name",value:i.name,onChange:s=>a("name",s.target.value),InputProps:{startAdornment:e.jsx(c,{position:"start",children:e.jsx(ee,{opacity:.5})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(r,{size:{xs:12,sm:6},children:e.jsx(o,{fullWidth:!0,label:"Phone Number",value:i.phone,onChange:s=>a("phone",s.target.value),InputProps:{startAdornment:e.jsx(c,{position:"start",children:e.jsx(S,{opacity:.5})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(r,{size:{xs:12,sm:6},children:e.jsx(o,{fullWidth:!0,label:"Email Address",value:i.email,onChange:s=>a("email",s.target.value),InputProps:{startAdornment:e.jsx(c,{position:"start",children:e.jsx(z,{opacity:.5})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(r,{size:{xs:12,sm:6},children:e.jsxs(o,{select:!0,fullWidth:!0,label:"Status",value:i.status,onChange:s=>a("status",s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}},children:[e.jsx(P,{value:"active",children:"Active"}),e.jsx(P,{value:"inactive",children:"Inactive"})]})}),e.jsx(r,{size:{xs:12,sm:6},children:e.jsx(o,{fullWidth:!0,label:"Vehicle Number",value:i.vehicleNumber,onChange:s=>a("vehicleNumber",s.target.value),InputProps:{startAdornment:e.jsx(c,{position:"start",children:e.jsx(A,{opacity:.5})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(r,{size:{xs:12,sm:6},children:e.jsx(o,{fullWidth:!0,label:"Vehicle Type",value:i.vehicleType,onChange:s=>a("vehicleType",s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(r,{size:{xs:12,sm:6},children:e.jsx(o,{fullWidth:!0,label:"ID Name (e.g. Aadhar)",value:i.idName,onChange:s=>a("idName",s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(r,{size:{xs:12,sm:6},children:e.jsx(o,{fullWidth:!0,label:"ID Number/Code",value:i.idCode,onChange:s=>a("idCode",s.target.value),sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})}),e.jsx(r,{size:12,children:e.jsx(o,{fullWidth:!0,label:"Address",multiline:!0,rows:2,value:i.address,onChange:s=>a("address",s.target.value),InputProps:{startAdornment:e.jsx(c,{position:"start",sx:{alignSelf:"flex-start",mt:1},children:e.jsx(w,{opacity:.5})})},sx:{"& .MuiOutlinedInput-root":{borderRadius:2}}})})]}),e.jsxs(g,{direction:"row",spacing:2,children:[e.jsx(p,{fullWidth:!0,variant:"contained",size:"large",startIcon:e.jsx(se,{}),onClick:O,sx:{borderRadius:2,height:48},children:x?"Update Detail":"Save Delivery Person"}),x&&e.jsx(p,{variant:"outlined",color:"inherit",onClick:I,sx:{borderRadius:2,px:4},children:"Cancel"})]})]})})]}),e.jsxs(n,{children:[e.jsx(o,{size:"small",fullWidth:!0,placeholder:"Search by name, phone or vehicle...",value:h,onChange:s=>E(s.target.value),InputProps:{startAdornment:e.jsx(c,{position:"start",children:e.jsx(te,{sx:{opacity:.5}})}),sx:{borderRadius:2,bgcolor:"background.paper",mb:2}}}),e.jsx(_,{useWindowScroll:!0,data:G,itemContent:(s,t)=>e.jsx(H,{sx:{p:2,mb:2,borderRadius:2},variant:"outlined",children:e.jsxs(n,{sx:{display:"flex",justifyContent:"space-between",alignItems:"flex-start"},children:[e.jsxs(n,{sx:{flex:1},children:[e.jsxs(g,{direction:"row",spacing:1,alignItems:"center",sx:{mb:1},children:[e.jsx(l,{variant:"h6",fontWeight:"bold",sx:{color:"primary.main"},children:t.name}),e.jsx(re,{label:t.status,size:"small",color:t.status==="active"?"success":"default",sx:{height:20,fontSize:"0.65rem",fontWeight:"bold",textTransform:"uppercase"}})]}),e.jsxs(r,{container:!0,spacing:1,children:[e.jsx(r,{size:{xs:12,sm:6},children:e.jsxs(l,{variant:"caption",sx:{display:"flex",alignItems:"center",gap:1,fontWeight:600},children:[e.jsx(S,{sx:{fontSize:14,opacity:.6}})," ",t.phone]})}),t.email&&e.jsx(r,{size:{xs:12,sm:6},children:e.jsxs(l,{variant:"caption",sx:{display:"flex",alignItems:"center",gap:1,color:"text.secondary"},children:[e.jsx(z,{sx:{fontSize:14,opacity:.6}})," ",t.email]})}),t.vehicleNumber&&e.jsx(r,{size:{xs:12,sm:6},children:e.jsxs(l,{variant:"caption",sx:{display:"flex",alignItems:"center",gap:1,fontWeight:500},children:[e.jsx(A,{sx:{fontSize:14,opacity:.6}})," ",t.vehicleNumber," (",t.vehicleType,")"]})}),t.address&&e.jsx(r,{size:12,children:e.jsxs(l,{variant:"caption",sx:{display:"flex",alignItems:"center",gap:1,color:"text.secondary",fontStyle:"italic"},children:[e.jsx(w,{sx:{fontSize:14,opacity:.6}})," ",t.address]})}),t.idName&&e.jsx(r,{size:12,children:e.jsxs(l,{variant:"caption",sx:{display:"flex",alignItems:"center",gap:1,fontWeight:700,color:"primary.dark",mt:.5},children:[t.idName,": ",t.idCode]})})]})]}),e.jsxs(n,{sx:{display:"flex",gap:.5},children:[e.jsx(m,{size:"small",onClick:()=>B(t),children:e.jsx(ie,{fontSize:"small"})}),e.jsx(m,{size:"small",color:"error",onClick:()=>L(t.id),children:e.jsx(oe,{fontSize:"small"})})]})]})},t.id)})]})]}),e.jsxs(ae,{open:R,onClose:()=>u(!1),children:[e.jsx(ne,{children:"Delete Delivery Person?"}),e.jsx(le,{children:e.jsx(de,{children:"This action cannot be undone. All delivery records for this person might be affected."})}),e.jsxs(ce,{children:[e.jsx(p,{onClick:()=>u(!1),children:"Cancel"}),e.jsx(p,{onClick:F,color:"error",variant:"contained",children:"Delete"})]})]})]})}export{Oe as component};
